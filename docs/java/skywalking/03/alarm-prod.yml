rules:
  service_resp_time_rule:
    metrics-name: service_resp_time
    exclude-names:
      - prod-nginx::prod-media-nginx
    op: ">"
    threshold: 10000
    period: 10
    count: 3
    silence-period: 5
    message: "{name} 在过去 10 分钟内有 3 分钟的平均响应时长超过 10s。"
  service_sla_rule:
    metrics-name: service_sla
    exclude-names:
      - prod-nginx::prod-media-nginx
    op: "<"
    threshold: 8000
    period: 10
    count: 2
    silence-period: 3
    message: "{name} 在过去 10 分钟内有 2 分钟的请求响应成功率低于 80%。"
  service_instance_resp_time_rule:
    metrics-name: service_instance_resp_time
    exclude-names:
      - 172.17.85.182 of prod-nginx::prod-media-nginx
    op: ">"
    threshold: 10000
    period: 10
    count: 2
    silence-period: 5
    message: "{name} 在过去 10 分钟内有 2 分钟平均响应时长超过 10s。"
  endpoint_resp_time_rule:
    metrics-name: endpoint_resp_time
    include-names:
      - com.zmn.oms.dubbo.interfaces.normal.order.NormalOrderWorkRemoteService.addOrder(NormalOrderWorkAddDIO) in zmn-oms::zmn-oms-dubbo
      - com.zmn.oms.dubbo.interfaces.zmn.master.order.MasterWorkListRemoteService.getWorkDetail(MasterWorkDIO) in zmn-oms::zmn-oms-dubbo
      - com.zmn.oms.dubbo.interfaces.zmn.master.order.MasterWorkListRemoteService.getDoingWork(MasterWorkDIO) in zmn-oms::zmn-oms-dubbo
    op: ">"
    threshold: 10000
    period: 10
    count: 2
    silence-period: 30
    message: "{name} 在过去 10 分钟内有 2 分钟的平均响应时长超过 10s。"

dingtalkHooks:
  textTemplate: |-
    {
      "msgtype": "text",
      "text": {
        "content": "SkyWalking 预警: \n %s."
      }
    }
  webhooks:
    - url: https://oapi.dingtalk.com/robot/send?access_token=e2c6c28ba91b92984c9b570f01bb274513d7966aaec0c2d1c009ba7408accc3d
      secret: SECf22681f75622a833416bc30ef2c9eba39404529496c71add4501971c18e2590f