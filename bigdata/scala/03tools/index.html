<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.42">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>Scala编程 | zmn.cn</title><meta name="description" content="后端开发知识库">
    <link rel="modulepreload" href="/doc/assets/app.40df414d.js"><link rel="modulepreload" href="/doc/assets/index.html.a25f2824.js"><link rel="modulepreload" href="/doc/assets/index.html.6881f0e6.js"><link rel="prefetch" href="/doc/assets/index.html.ac157e58.js"><link rel="prefetch" href="/doc/assets/index.html.795c9140.js"><link rel="prefetch" href="/doc/assets/index.html.fd51b8b2.js"><link rel="prefetch" href="/doc/assets/index.html.0c15a99b.js"><link rel="prefetch" href="/doc/assets/index.html.0c59ef61.js"><link rel="prefetch" href="/doc/assets/index.html.f10e9c63.js"><link rel="prefetch" href="/doc/assets/index.html.b5bfa26a.js"><link rel="prefetch" href="/doc/assets/index.html.e8912321.js"><link rel="prefetch" href="/doc/assets/index.html.e524e2c7.js"><link rel="prefetch" href="/doc/assets/index.html.e2c03529.js"><link rel="prefetch" href="/doc/assets/index.html.1a75e17e.js"><link rel="prefetch" href="/doc/assets/index.html.27d315d2.js"><link rel="prefetch" href="/doc/assets/index.html.8527be29.js"><link rel="prefetch" href="/doc/assets/index.html.5603dc63.js"><link rel="prefetch" href="/doc/assets/index.html.a735b5dd.js"><link rel="prefetch" href="/doc/assets/index.html.68217935.js"><link rel="prefetch" href="/doc/assets/index.html.79799519.js"><link rel="prefetch" href="/doc/assets/index.html.e7ff66c5.js"><link rel="prefetch" href="/doc/assets/index.html.b3989c09.js"><link rel="prefetch" href="/doc/assets/index.html.90a11c7e.js"><link rel="prefetch" href="/doc/assets/index.html.e552d764.js"><link rel="prefetch" href="/doc/assets/index.html.a2e921be.js"><link rel="prefetch" href="/doc/assets/index.html.40de4d57.js"><link rel="prefetch" href="/doc/assets/index.html.8dfb5661.js"><link rel="prefetch" href="/doc/assets/index.html.0b633e02.js"><link rel="prefetch" href="/doc/assets/index.html.325a81ac.js"><link rel="prefetch" href="/doc/assets/index.html.fc94b663.js"><link rel="prefetch" href="/doc/assets/index.html.a61a14dc.js"><link rel="prefetch" href="/doc/assets/index.html.915b115c.js"><link rel="prefetch" href="/doc/assets/index.html.74c3962d.js"><link rel="prefetch" href="/doc/assets/index.html.50e666c4.js"><link rel="prefetch" href="/doc/assets/index.html.bd0865d1.js"><link rel="prefetch" href="/doc/assets/index.html.670a8d54.js"><link rel="prefetch" href="/doc/assets/index.html.267a5925.js"><link rel="prefetch" href="/doc/assets/index.html.820a240a.js"><link rel="prefetch" href="/doc/assets/index.html.956e3861.js"><link rel="prefetch" href="/doc/assets/index.html.1eb9b84f.js"><link rel="prefetch" href="/doc/assets/index.html.085c7b3b.js"><link rel="prefetch" href="/doc/assets/index.html.cc6b0c3f.js"><link rel="prefetch" href="/doc/assets/index.html.878a89e3.js"><link rel="prefetch" href="/doc/assets/index.html.4349d3a7.js"><link rel="prefetch" href="/doc/assets/index.html.ad70fd8f.js"><link rel="prefetch" href="/doc/assets/index.html.ae8f6e96.js"><link rel="prefetch" href="/doc/assets/index.html.5904c85d.js"><link rel="prefetch" href="/doc/assets/index.html.67ad7772.js"><link rel="prefetch" href="/doc/assets/index.html.1fb78180.js"><link rel="prefetch" href="/doc/assets/index.html.79837727.js"><link rel="prefetch" href="/doc/assets/index.html.3b548d45.js"><link rel="prefetch" href="/doc/assets/index.html.3a65bcaf.js"><link rel="prefetch" href="/doc/assets/index.html.636ab4d4.js"><link rel="prefetch" href="/doc/assets/index.html.8c20145c.js"><link rel="prefetch" href="/doc/assets/index.html.93d3f714.js"><link rel="prefetch" href="/doc/assets/index.html.5cc28277.js"><link rel="prefetch" href="/doc/assets/index.html.587df9cf.js"><link rel="prefetch" href="/doc/assets/index.html.cffff73c.js"><link rel="prefetch" href="/doc/assets/index.html.0faea7db.js"><link rel="prefetch" href="/doc/assets/index.html.9ec36555.js"><link rel="prefetch" href="/doc/assets/index.html.4fbceb17.js"><link rel="prefetch" href="/doc/assets/index.html.a8892ad4.js"><link rel="prefetch" href="/doc/assets/index.html.1a7d6859.js"><link rel="prefetch" href="/doc/assets/index.html.5c08cce8.js"><link rel="prefetch" href="/doc/assets/index.html.ff1641e6.js"><link rel="prefetch" href="/doc/assets/index.html.10100559.js"><link rel="prefetch" href="/doc/assets/index.html.eca48ebd.js"><link rel="prefetch" href="/doc/assets/index.html.d9180794.js"><link rel="prefetch" href="/doc/assets/Spring.html.41ca96bd.js"><link rel="prefetch" href="/doc/assets/SpringBoot.html.c063ae1a.js"><link rel="prefetch" href="/doc/assets/SpringBoot源码.html.cdd45461.js"><link rel="prefetch" href="/doc/assets/SpringBoot高级.html.b3e5002b.js"><link rel="prefetch" href="/doc/assets/SpringMVC.html.25759dd3.js"><link rel="prefetch" href="/doc/assets/SpringSecurity.html.2ba8791d.js"><link rel="prefetch" href="/doc/assets/index.html.3afa53b5.js"><link rel="prefetch" href="/doc/assets/index.html.1963ae5c.js"><link rel="prefetch" href="/doc/assets/index.html.657aec84.js"><link rel="prefetch" href="/doc/assets/index.html.871b2105.js"><link rel="prefetch" href="/doc/assets/index.html.46266feb.js"><link rel="prefetch" href="/doc/assets/index.html.019ddb74.js"><link rel="prefetch" href="/doc/assets/index.html.2636a08e.js"><link rel="prefetch" href="/doc/assets/index.html.c6a50762.js"><link rel="prefetch" href="/doc/assets/index.html.6632d187.js"><link rel="prefetch" href="/doc/assets/index.html.480096df.js"><link rel="prefetch" href="/doc/assets/index.html.7bf9c484.js"><link rel="prefetch" href="/doc/assets/index.html.1ca63bf8.js"><link rel="prefetch" href="/doc/assets/index.html.ee1ff92b.js"><link rel="prefetch" href="/doc/assets/index.html.d1efbe95.js"><link rel="prefetch" href="/doc/assets/index.html.d302d742.js"><link rel="prefetch" href="/doc/assets/index.html.73b0a46e.js"><link rel="prefetch" href="/doc/assets/index.html.9b9e7b22.js"><link rel="prefetch" href="/doc/assets/index.html.5080b714.js"><link rel="prefetch" href="/doc/assets/index.html.e2de7b5a.js"><link rel="prefetch" href="/doc/assets/index.html.5a365a3f.js"><link rel="prefetch" href="/doc/assets/index.html.ea186b24.js"><link rel="prefetch" href="/doc/assets/index.html.da1b811a.js"><link rel="prefetch" href="/doc/assets/index.html.ba20a9fa.js"><link rel="prefetch" href="/doc/assets/index.html.23e205db.js"><link rel="prefetch" href="/doc/assets/index.html.92cefa25.js"><link rel="prefetch" href="/doc/assets/index.html.0519d6c0.js"><link rel="prefetch" href="/doc/assets/index.html.df3e94ce.js"><link rel="prefetch" href="/doc/assets/index.html.850ddff2.js"><link rel="prefetch" href="/doc/assets/index.html.060bc27e.js"><link rel="prefetch" href="/doc/assets/index.html.e9e53a65.js"><link rel="prefetch" href="/doc/assets/index.html.e03489a4.js"><link rel="prefetch" href="/doc/assets/index.html.5730a56d.js"><link rel="prefetch" href="/doc/assets/index.html.b2f4abe8.js"><link rel="prefetch" href="/doc/assets/index.html.cafd859a.js"><link rel="prefetch" href="/doc/assets/index.html.c8328127.js"><link rel="prefetch" href="/doc/assets/index.html.887c0664.js"><link rel="prefetch" href="/doc/assets/index.html.4bf77624.js"><link rel="prefetch" href="/doc/assets/index.html.0e7972f9.js"><link rel="prefetch" href="/doc/assets/index.html.265aab2e.js"><link rel="prefetch" href="/doc/assets/index.html.ec74946d.js"><link rel="prefetch" href="/doc/assets/index.html.e3a2fec1.js"><link rel="prefetch" href="/doc/assets/index.html.36b699b6.js"><link rel="prefetch" href="/doc/assets/index.html.fdaf1cae.js"><link rel="prefetch" href="/doc/assets/index.html.ae3b119d.js"><link rel="prefetch" href="/doc/assets/index.html.b6c53f53.js"><link rel="prefetch" href="/doc/assets/index.html.0773f88d.js"><link rel="prefetch" href="/doc/assets/index.html.d571ef54.js"><link rel="prefetch" href="/doc/assets/index.html.86f9e908.js"><link rel="prefetch" href="/doc/assets/index.html.60f723ac.js"><link rel="prefetch" href="/doc/assets/index.html.01581c9b.js"><link rel="prefetch" href="/doc/assets/index.html.d96d738e.js"><link rel="prefetch" href="/doc/assets/index.html.5ddae78d.js"><link rel="prefetch" href="/doc/assets/index.html.7c0814ab.js"><link rel="prefetch" href="/doc/assets/index.html.965b7fff.js"><link rel="prefetch" href="/doc/assets/vue3快速上手.html.8773c5ea.js"><link rel="prefetch" href="/doc/assets/index.html.b2090b45.js"><link rel="prefetch" href="/doc/assets/index.html.f6fbe2a7.js"><link rel="prefetch" href="/doc/assets/index.html.5079d83e.js"><link rel="prefetch" href="/doc/assets/index.html.0e7d3814.js"><link rel="prefetch" href="/doc/assets/index.html.236535af.js"><link rel="prefetch" href="/doc/assets/index.html.e7057fa7.js"><link rel="prefetch" href="/doc/assets/index.html.0dfecf7e.js"><link rel="prefetch" href="/doc/assets/index.html.ba833381.js"><link rel="prefetch" href="/doc/assets/404.html.93146c89.js"><link rel="prefetch" href="/doc/assets/index.html.3b7265f0.js"><link rel="prefetch" href="/doc/assets/index.html.f94b83e6.js"><link rel="prefetch" href="/doc/assets/index.html.478d12bf.js"><link rel="prefetch" href="/doc/assets/index.html.9eee768a.js"><link rel="prefetch" href="/doc/assets/index.html.2b8b2ed7.js"><link rel="prefetch" href="/doc/assets/index.html.a370c4da.js"><link rel="prefetch" href="/doc/assets/index.html.4078504f.js"><link rel="prefetch" href="/doc/assets/index.html.0a470d26.js"><link rel="prefetch" href="/doc/assets/index.html.70589c68.js"><link rel="prefetch" href="/doc/assets/index.html.3e00e696.js"><link rel="prefetch" href="/doc/assets/index.html.a2857e37.js"><link rel="prefetch" href="/doc/assets/index.html.11a24d88.js"><link rel="prefetch" href="/doc/assets/index.html.13fcd6dc.js"><link rel="prefetch" href="/doc/assets/index.html.bb926e52.js"><link rel="prefetch" href="/doc/assets/index.html.83c356d4.js"><link rel="prefetch" href="/doc/assets/index.html.9093f441.js"><link rel="prefetch" href="/doc/assets/index.html.99329590.js"><link rel="prefetch" href="/doc/assets/index.html.5dd4e8e8.js"><link rel="prefetch" href="/doc/assets/index.html.80a1a8a8.js"><link rel="prefetch" href="/doc/assets/index.html.e6aaf5e4.js"><link rel="prefetch" href="/doc/assets/index.html.4b4f53af.js"><link rel="prefetch" href="/doc/assets/index.html.63d82858.js"><link rel="prefetch" href="/doc/assets/index.html.02f66c42.js"><link rel="prefetch" href="/doc/assets/index.html.b02e0cb9.js"><link rel="prefetch" href="/doc/assets/index.html.b2cf2462.js"><link rel="prefetch" href="/doc/assets/index.html.4d88523a.js"><link rel="prefetch" href="/doc/assets/index.html.b6d3a8c2.js"><link rel="prefetch" href="/doc/assets/index.html.8e3bc1fc.js"><link rel="prefetch" href="/doc/assets/index.html.593a1904.js"><link rel="prefetch" href="/doc/assets/index.html.d0fdf009.js"><link rel="prefetch" href="/doc/assets/index.html.bb125db3.js"><link rel="prefetch" href="/doc/assets/index.html.7a967c9a.js"><link rel="prefetch" href="/doc/assets/index.html.ca6b22e1.js"><link rel="prefetch" href="/doc/assets/index.html.e1c469a1.js"><link rel="prefetch" href="/doc/assets/index.html.ff09b3af.js"><link rel="prefetch" href="/doc/assets/index.html.ec4bbb87.js"><link rel="prefetch" href="/doc/assets/index.html.12c1e355.js"><link rel="prefetch" href="/doc/assets/index.html.8a4045e6.js"><link rel="prefetch" href="/doc/assets/index.html.b54dc8a6.js"><link rel="prefetch" href="/doc/assets/index.html.721d96fd.js"><link rel="prefetch" href="/doc/assets/index.html.d855e8ed.js"><link rel="prefetch" href="/doc/assets/index.html.17fbd68b.js"><link rel="prefetch" href="/doc/assets/index.html.ad5ccf5a.js"><link rel="prefetch" href="/doc/assets/index.html.130dead3.js"><link rel="prefetch" href="/doc/assets/index.html.0bcc78cc.js"><link rel="prefetch" href="/doc/assets/index.html.557897f7.js"><link rel="prefetch" href="/doc/assets/index.html.1d57cd02.js"><link rel="prefetch" href="/doc/assets/index.html.df77ede5.js"><link rel="prefetch" href="/doc/assets/index.html.ac04a9ed.js"><link rel="prefetch" href="/doc/assets/index.html.037f3861.js"><link rel="prefetch" href="/doc/assets/index.html.08a635f2.js"><link rel="prefetch" href="/doc/assets/index.html.d37ad707.js"><link rel="prefetch" href="/doc/assets/index.html.af40cb25.js"><link rel="prefetch" href="/doc/assets/index.html.7b09b414.js"><link rel="prefetch" href="/doc/assets/index.html.ca416dcc.js"><link rel="prefetch" href="/doc/assets/index.html.f5eae5e4.js"><link rel="prefetch" href="/doc/assets/index.html.acf5622e.js"><link rel="prefetch" href="/doc/assets/index.html.77c30969.js"><link rel="prefetch" href="/doc/assets/index.html.ff8fef88.js"><link rel="prefetch" href="/doc/assets/index.html.b03ad9ee.js"><link rel="prefetch" href="/doc/assets/index.html.883bb815.js"><link rel="prefetch" href="/doc/assets/index.html.e5048f53.js"><link rel="prefetch" href="/doc/assets/index.html.80bf8279.js"><link rel="prefetch" href="/doc/assets/index.html.411d2f13.js"><link rel="prefetch" href="/doc/assets/index.html.e55b3889.js"><link rel="prefetch" href="/doc/assets/Spring.html.2f3df8d9.js"><link rel="prefetch" href="/doc/assets/SpringBoot.html.9cb899e2.js"><link rel="prefetch" href="/doc/assets/SpringBoot源码.html.6dd51782.js"><link rel="prefetch" href="/doc/assets/SpringBoot高级.html.74275d08.js"><link rel="prefetch" href="/doc/assets/SpringMVC.html.cf650f7b.js"><link rel="prefetch" href="/doc/assets/SpringSecurity.html.1e2f9882.js"><link rel="prefetch" href="/doc/assets/index.html.8489e95c.js"><link rel="prefetch" href="/doc/assets/index.html.4fc255fb.js"><link rel="prefetch" href="/doc/assets/index.html.6e298d1f.js"><link rel="prefetch" href="/doc/assets/index.html.dfb5c354.js"><link rel="prefetch" href="/doc/assets/index.html.55c13f7d.js"><link rel="prefetch" href="/doc/assets/index.html.9746da44.js"><link rel="prefetch" href="/doc/assets/index.html.5cad0d30.js"><link rel="prefetch" href="/doc/assets/index.html.a5a742fd.js"><link rel="prefetch" href="/doc/assets/index.html.2d7d46f5.js"><link rel="prefetch" href="/doc/assets/index.html.4fd15fc0.js"><link rel="prefetch" href="/doc/assets/index.html.5cf91540.js"><link rel="prefetch" href="/doc/assets/index.html.3d50e978.js"><link rel="prefetch" href="/doc/assets/index.html.21ff9d3b.js"><link rel="prefetch" href="/doc/assets/index.html.47b83ec4.js"><link rel="prefetch" href="/doc/assets/index.html.bc304f81.js"><link rel="prefetch" href="/doc/assets/index.html.b2a59940.js"><link rel="prefetch" href="/doc/assets/index.html.13415a43.js"><link rel="prefetch" href="/doc/assets/index.html.100ec837.js"><link rel="prefetch" href="/doc/assets/index.html.3472a443.js"><link rel="prefetch" href="/doc/assets/index.html.33aece6b.js"><link rel="prefetch" href="/doc/assets/index.html.e61dd289.js"><link rel="prefetch" href="/doc/assets/index.html.64183ae2.js"><link rel="prefetch" href="/doc/assets/index.html.446a1818.js"><link rel="prefetch" href="/doc/assets/index.html.97ea4a5c.js"><link rel="prefetch" href="/doc/assets/index.html.a6ef03fb.js"><link rel="prefetch" href="/doc/assets/index.html.3920cc47.js"><link rel="prefetch" href="/doc/assets/index.html.34f4e287.js"><link rel="prefetch" href="/doc/assets/index.html.1351290b.js"><link rel="prefetch" href="/doc/assets/index.html.84a20a4f.js"><link rel="prefetch" href="/doc/assets/index.html.e55a3317.js"><link rel="prefetch" href="/doc/assets/index.html.a5eeaab0.js"><link rel="prefetch" href="/doc/assets/index.html.a8d854c3.js"><link rel="prefetch" href="/doc/assets/index.html.74d28158.js"><link rel="prefetch" href="/doc/assets/index.html.9b6544ca.js"><link rel="prefetch" href="/doc/assets/index.html.ea3deaa2.js"><link rel="prefetch" href="/doc/assets/index.html.f5114c18.js"><link rel="prefetch" href="/doc/assets/index.html.ca8dada1.js"><link rel="prefetch" href="/doc/assets/index.html.0d3a5370.js"><link rel="prefetch" href="/doc/assets/index.html.13e899ea.js"><link rel="prefetch" href="/doc/assets/index.html.4f4461aa.js"><link rel="prefetch" href="/doc/assets/index.html.b6ced39d.js"><link rel="prefetch" href="/doc/assets/index.html.6c0283f0.js"><link rel="prefetch" href="/doc/assets/index.html.01661ebc.js"><link rel="prefetch" href="/doc/assets/index.html.657c6ed2.js"><link rel="prefetch" href="/doc/assets/index.html.f5f7aed0.js"><link rel="prefetch" href="/doc/assets/index.html.cdd6e499.js"><link rel="prefetch" href="/doc/assets/index.html.2d661523.js"><link rel="prefetch" href="/doc/assets/index.html.6893b4fb.js"><link rel="prefetch" href="/doc/assets/index.html.566e406c.js"><link rel="prefetch" href="/doc/assets/index.html.1357e2d3.js"><link rel="prefetch" href="/doc/assets/index.html.d910030e.js"><link rel="prefetch" href="/doc/assets/index.html.4d5146a8.js"><link rel="prefetch" href="/doc/assets/index.html.d830c4f5.js"><link rel="prefetch" href="/doc/assets/index.html.b1bef10b.js"><link rel="prefetch" href="/doc/assets/vue3快速上手.html.d36d3c30.js"><link rel="prefetch" href="/doc/assets/index.html.1e6ab806.js"><link rel="prefetch" href="/doc/assets/index.html.4125d933.js"><link rel="prefetch" href="/doc/assets/index.html.c5dc4567.js"><link rel="prefetch" href="/doc/assets/index.html.451edb2d.js"><link rel="prefetch" href="/doc/assets/index.html.a665dde3.js"><link rel="prefetch" href="/doc/assets/index.html.5ba5e8a1.js"><link rel="prefetch" href="/doc/assets/index.html.23b6b000.js"><link rel="prefetch" href="/doc/assets/index.html.629d6531.js"><link rel="prefetch" href="/doc/assets/404.html.d315880d.js"><link rel="prefetch" href="/doc/assets/404.bebaa092.js"><link rel="prefetch" href="/doc/assets/Layout.4134e473.js">
    <link rel="stylesheet" href="/doc/assets/style.83db67df.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/doc/" class=""><img class="logo" src="https://cdn-statics.zmn.cn/_nuxt/img/logo_web.b793f2a.png" alt="zmn.cn"><span class="site-name can-hide">zmn.cn</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/doc/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Java"><span class="title">Java</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Java"><span class="title">Java</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/doc/java/kafka/" class="" aria-label="Kafka"><!--[--><!--]--> Kafka <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/doc/java/redis/" class="" aria-label="Redis"><!--[--><!--]--> Redis <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/doc/java/skywalking/" class="" aria-label="SkyWalking"><!--[--><!--]--> SkyWalking <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/doc/java/es/01/" class="" aria-label="ElasticSearch"><!--[--><!--]--> ElasticSearch <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/doc/java/drools/" class="" aria-label="Drools"><!--[--><!--]--> Drools <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/doc/java/jvm/01/" class="" aria-label="JVM"><!--[--><!--]--> JVM <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="BigData"><span class="title">BigData</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="BigData"><span class="title">BigData</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/doc/bigdata/hadoop/core/hadoop/01/" class="" aria-label="Hadoop"><!--[--><!--]--> Hadoop <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/doc/bigdata/scala/01base/" class="" aria-label="Scala"><!--[--><!--]--> Scala <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/doc/bigdata/spark/core/base/" class="" aria-label="Spark"><!--[--><!--]--> Spark <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/faustine8/doc" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="搜索" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/doc/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Java"><span class="title">Java</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Java"><span class="title">Java</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/doc/java/kafka/" class="" aria-label="Kafka"><!--[--><!--]--> Kafka <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/doc/java/redis/" class="" aria-label="Redis"><!--[--><!--]--> Redis <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/doc/java/skywalking/" class="" aria-label="SkyWalking"><!--[--><!--]--> SkyWalking <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/doc/java/es/01/" class="" aria-label="ElasticSearch"><!--[--><!--]--> ElasticSearch <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/doc/java/drools/" class="" aria-label="Drools"><!--[--><!--]--> Drools <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/doc/java/jvm/01/" class="" aria-label="JVM"><!--[--><!--]--> JVM <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="BigData"><span class="title">BigData</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="BigData"><span class="title">BigData</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/doc/bigdata/hadoop/core/hadoop/01/" class="" aria-label="Hadoop"><!--[--><!--]--> Hadoop <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/doc/bigdata/scala/01base/" class="" aria-label="Scala"><!--[--><!--]--> Scala <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/doc/bigdata/spark/core/base/" class="" aria-label="Spark"><!--[--><!--]--> Spark <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/faustine8/doc" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Scala编程 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/doc/bigdata/scala/03tools/#第七部分-模式匹配和样例类" class="router-link-active router-link-exact-active sidebar-item" aria-label="第七部分 模式匹配和样例类"><!--[--><!--]--> 第七部分 模式匹配和样例类 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/doc/bigdata/scala/03tools/#第1节-模式匹配" class="router-link-active router-link-exact-active sidebar-item" aria-label="第1节 模式匹配"><!--[--><!--]--> 第1节 模式匹配 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/doc/bigdata/scala/03tools/#第2节-字符和字符串匹配" class="router-link-active router-link-exact-active sidebar-item" aria-label="第2节 字符和字符串匹配"><!--[--><!--]--> 第2节 字符和字符串匹配 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/doc/bigdata/scala/03tools/#第3节-守卫式匹配" class="router-link-active router-link-exact-active sidebar-item" aria-label="第3节 守卫式匹配"><!--[--><!--]--> 第3节 守卫式匹配 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/doc/bigdata/scala/03tools/#第4节-匹配类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="第4节 匹配类型"><!--[--><!--]--> 第4节 匹配类型 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/doc/bigdata/scala/03tools/#第5节-匹配数组、元组、集合" class="router-link-active router-link-exact-active sidebar-item" aria-label="第5节 匹配数组、元组、集合"><!--[--><!--]--> 第5节 匹配数组、元组、集合 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/doc/bigdata/scala/03tools/#第6节-样例类" class="router-link-active router-link-exact-active sidebar-item" aria-label="第6节 样例类"><!--[--><!--]--> 第6节 样例类 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/doc/bigdata/scala/03tools/#第7节-option与模式匹配" class="router-link-active router-link-exact-active sidebar-item" aria-label="第7节 Option与模式匹配"><!--[--><!--]--> 第7节 Option与模式匹配 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/doc/bigdata/scala/03tools/#第八部分-函数及抽象化" class="router-link-active router-link-exact-active sidebar-item" aria-label="第八部分 函数及抽象化"><!--[--><!--]--> 第八部分 函数及抽象化 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/doc/bigdata/scala/03tools/#第1节-函数字面量及函数的定义" class="router-link-active router-link-exact-active sidebar-item" aria-label="第1节 函数字面量及函数的定义"><!--[--><!--]--> 第1节 函数字面量及函数的定义 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/doc/bigdata/scala/03tools/#第2节-函数与方法的区别" class="router-link-active router-link-exact-active sidebar-item" aria-label="第2节 函数与方法的区别"><!--[--><!--]--> 第2节 函数与方法的区别 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/doc/bigdata/scala/03tools/#第3节-匿名函数与占位符" class="router-link-active router-link-exact-active sidebar-item" aria-label="第3节 匿名函数与占位符"><!--[--><!--]--> 第3节 匿名函数与占位符 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/doc/bigdata/scala/03tools/#第4节-高阶函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="第4节 高阶函数"><!--[--><!--]--> 第4节 高阶函数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/doc/bigdata/scala/03tools/#第5节-闭包" class="router-link-active router-link-exact-active sidebar-item" aria-label="第5节 闭包"><!--[--><!--]--> 第5节 闭包 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/doc/bigdata/scala/03tools/#第6节-柯里化" class="router-link-active router-link-exact-active sidebar-item" aria-label="第6节 柯里化"><!--[--><!--]--> 第6节 柯里化 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/doc/bigdata/scala/03tools/#第7节-部分应用函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="第7节 部分应用函数"><!--[--><!--]--> 第7节 部分应用函数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/doc/bigdata/scala/03tools/#第8节-偏函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="第8节 偏函数"><!--[--><!--]--> 第8节 偏函数 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/doc/bigdata/scala/03tools/#第九部分-集合" class="router-link-active router-link-exact-active sidebar-item" aria-label="第九部分 集合"><!--[--><!--]--> 第九部分 集合 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/doc/bigdata/scala/03tools/#第1节-可变和不可变集合" class="router-link-active router-link-exact-active sidebar-item" aria-label="第1节 可变和不可变集合"><!--[--><!--]--> 第1节 可变和不可变集合 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/doc/bigdata/scala/03tools/#第2节-seq" class="router-link-active router-link-exact-active sidebar-item" aria-label="第2节 Seq"><!--[--><!--]--> 第2节 Seq <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/doc/bigdata/scala/03tools/#第3节-set" class="router-link-active router-link-exact-active sidebar-item" aria-label="第3节 Set"><!--[--><!--]--> 第3节 Set <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/doc/bigdata/scala/03tools/#第4节-map" class="router-link-active router-link-exact-active sidebar-item" aria-label="第4节 Map"><!--[--><!--]--> 第4节 Map <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/doc/bigdata/scala/03tools/#第5节-集合常用算子" class="router-link-active router-link-exact-active sidebar-item" aria-label="第5节 集合常用算子"><!--[--><!--]--> 第5节 集合常用算子 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/doc/bigdata/scala/03tools/#第6节-与java集合的转换" class="router-link-active router-link-exact-active sidebar-item" aria-label="第6节 与Java集合的转换"><!--[--><!--]--> 第6节 与Java集合的转换 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/doc/bigdata/scala/03tools/#第十部分-隐式机制" class="router-link-active router-link-exact-active sidebar-item" aria-label="第十部分 隐式机制"><!--[--><!--]--> 第十部分 隐式机制 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/doc/bigdata/scala/03tools/#第1节-隐式转换" class="router-link-active router-link-exact-active sidebar-item" aria-label="第1节 隐式转换"><!--[--><!--]--> 第1节 隐式转换 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/doc/bigdata/scala/03tools/#第2节-隐式转换函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="第2节 隐式转换函数"><!--[--><!--]--> 第2节 隐式转换函数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/doc/bigdata/scala/03tools/#第3节-隐式参数和隐式值" class="router-link-active router-link-exact-active sidebar-item" aria-label="第3节 隐式参数和隐式值"><!--[--><!--]--> 第3节 隐式参数和隐式值 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/doc/bigdata/scala/03tools/#第十一部分-扩展部分" class="router-link-active router-link-exact-active sidebar-item" aria-label="第十一部分 扩展部分"><!--[--><!--]--> 第十一部分 扩展部分 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/doc/bigdata/scala/03tools/#第1节-类型参数" class="router-link-active router-link-exact-active sidebar-item" aria-label="第1节 类型参数"><!--[--><!--]--> 第1节 类型参数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/doc/bigdata/scala/03tools/#第2节-akka" class="router-link-active router-link-exact-active sidebar-item" aria-label="第2节 Akka"><!--[--><!--]--> 第2节 Akka <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="scala编程" tabindex="-1"><a class="header-anchor" href="#scala编程" aria-hidden="true">#</a> Scala编程</h1><h2 id="第七部分-模式匹配和样例类" tabindex="-1"><a class="header-anchor" href="#第七部分-模式匹配和样例类" aria-hidden="true">#</a> 第七部分 模式匹配和样例类</h2><h3 id="第1节-模式匹配" tabindex="-1"><a class="header-anchor" href="#第1节-模式匹配" aria-hidden="true">#</a> 第1节 模式匹配</h3><p>Scala没有Java中的 <code>switch ... case</code>，它有一个更加强大的模式匹配机制，可以应用到很多场合。</p><p>Scala的模式匹配可以匹配各种情况，比如变量的类型、集合的元素、有值或无值。</p><p>模式匹配的基本语法结构：<code>变量 match { case 值 =&gt; 代码 }</code></p><p>模式匹配 <code>match ... case</code> 中，只要有一个 <code>case</code> 分支满足并处理了，就不会继续判断下一个case分支了，不需要使用 <code>break</code> 语句。 这点与Java不同，Java的 <code>switch case</code> 需要用 <code>break</code> 阻止。如果值为下划线，则代表不满足以上所有情况的时候如何处理。</p><p>模式匹配 <code>match case</code> 最基本的应用，就是对变量的值进行模式匹配。match是表达式，与if表达式一样，是有返回值的。</p><p>除此之外，Scala 还提供了样例类，对模式匹配进行了优化，可以快速进行匹配。</p><h3 id="第2节-字符和字符串匹配" tabindex="-1"><a class="header-anchor" href="#第2节-字符和字符串匹配" aria-hidden="true">#</a> 第2节 字符和字符串匹配</h3><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 对字符进行模式匹配</span>
  <span class="token keyword">val</span> char <span class="token operator">=</span> <span class="token char">&#39;=&#39;</span>
  char <span class="token keyword">match</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token char">&#39;+&#39;</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;加号&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token char">&#39;-&#39;</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;减号&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token char">&#39;*&#39;</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;乘号&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token char">&#39;/&#39;</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;除号&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;不是运算符&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 对字符串进行模式匹配</span>
  <span class="token keyword">val</span> content <span class="token operator">=</span> Array<span class="token punctuation">(</span><span class="token string">&quot;hadoop&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;spark&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;flink&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">val</span> project <span class="token operator">=</span> content<span class="token punctuation">(</span>Random<span class="token punctuation">.</span>nextInt<span class="token punctuation">(</span>content<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span>
  project <span class="token keyword">match</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&quot;hadoop&quot;</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;大数据计算框架&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token string">&quot;spark&quot;</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;大数据内存框架&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token string">&quot;flink&quot;</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;大数据实时框架&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;啥也不是&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="第3节-守卫式匹配" tabindex="-1"><a class="header-anchor" href="#第3节-守卫式匹配" aria-hidden="true">#</a> 第3节 守卫式匹配</h3><p>所谓守卫就是添加if语句</p><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token keyword">object</span> MatchDemo <span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 守卫式匹配 (就是添加了 if 判断)</span>
    <span class="token keyword">val</span> char2 <span class="token operator">=</span> <span class="token char">&#39;*&#39;</span>
    <span class="token keyword">val</span> num <span class="token operator">=</span> char2 <span class="token keyword">match</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token char">&#39;+&#39;</span> <span class="token keyword">=&gt;</span> <span class="token number">1</span>
      <span class="token keyword">case</span> <span class="token char">&#39;-&#39;</span> <span class="token keyword">=&gt;</span> <span class="token number">2</span>
      <span class="token keyword">case</span> _ <span class="token keyword">if</span> <span class="token punctuation">(</span>char2<span class="token punctuation">.</span>equals<span class="token punctuation">(</span><span class="token char">&#39;*&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token number">3</span>
      <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> <span class="token number">4</span>
    <span class="token punctuation">}</span>
    println<span class="token punctuation">(</span>num<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><div class="highlight-line"> </div><br><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="第4节-匹配类型" tabindex="-1"><a class="header-anchor" href="#第4节-匹配类型" aria-hidden="true">#</a> 第4节 匹配类型</h3><p>Scala的模式匹配还有一个强大的功能，它可以直接匹配类型，而不是值。这一点是Java的 <code>switch ... case</code> 做不到的。</p><p>匹配类型的语法：<code>case 变量: 类型 =&gt; 代码</code>，而不是匹配值的 <code>case 值 =&gt; 代码</code> 这种语法。</p><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token comment">// 匹配类型</span>
<span class="token keyword">def</span> typeMatch<span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">Any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  x <span class="token keyword">match</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> x<span class="token operator">:</span> <span class="token builtin">String</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;是一个字符串类型&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> x<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;是一个整形&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> x<span class="token operator">:</span> <span class="token builtin">Boolean</span> <span class="token keyword">if</span> <span class="token operator">!</span>x <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;是一个 false 的 Boolean 类型&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> x<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;是一个整形数组&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;啥也不是&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="第5节-匹配数组、元组、集合" tabindex="-1"><a class="header-anchor" href="#第5节-匹配数组、元组、集合" aria-hidden="true">#</a> 第5节 匹配数组、元组、集合</h3><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token keyword">object</span> MatchCollection <span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> arr <span class="token operator">=</span> Array<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span>
    <span class="token comment">// 对 Array 数组进行模式匹配，分别匹配：</span>
    <span class="token comment">// 带有指定个数元素的数组、带有指定元素的数组、以某元素开头的数组</span>
    arr <span class="token keyword">match</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> Array<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span>x <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> y<span class="token punctuation">)</span> <span class="token comment">// 数组有三个元素</span>
      <span class="token keyword">case</span> Array<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;only 1 ...&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 数组只包含 1</span>
      <span class="token keyword">case</span> Array<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> _<span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;Start with 1&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 数组以 1 开头</span>
      <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;啥也不是&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 对 List 列表进行模式匹配</span>
    <span class="token keyword">val</span> list <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
    <span class="token comment">// 匹配三种情况：带有指定个数元素的列表、带有指定元素的列表、以某元素开头的列表</span>
    list <span class="token keyword">match</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> x <span class="token operator">::</span> y <span class="token operator">::</span> Nil <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">x</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">y</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span> <span class="token comment">// Nil 表示一个空List, :: 起连接作用，表示将元素添加到某个列表中。=&gt; 匹配有两个元素的集合。</span>
      <span class="token keyword">case</span> <span class="token number">2</span> <span class="token operator">::</span> Nil <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;only 2 ...&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 2 添加到空列表。=&gt; 即：匹配只有元素2的List集合</span>
      <span class="token keyword">case</span> <span class="token number">1</span> <span class="token operator">::</span> tail <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;Start with 1&quot;</span><span class="token punctuation">)</span> <span class="token comment">// tail 表示返回除第一个元素之外的其他元素的列表 =&gt; 即：匹配以数字1开头的集合</span>
      <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;啥也不是&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 对元组进行匹配</span>
    <span class="token keyword">val</span> tuple <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
    tuple <span class="token keyword">match</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">x</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">y</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token comment">// 以 1 开头，包含三个元素的元组</span>
      <span class="token keyword">case</span> <span class="token punctuation">(</span>_<span class="token punctuation">,</span> z<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span>z<span class="token punctuation">)</span> <span class="token comment">// 以 5 结尾，包含三个元素的元组</span>
      <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;啥也不是&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h3 id="第6节-样例类" tabindex="-1"><a class="header-anchor" href="#第6节-样例类" aria-hidden="true">#</a> 第6节 样例类</h3><p><code>case class</code> 样例类是Scala中特殊的类。当声明样例类时，以下事情会自动发生：</p><ul><li>主构造函数接收的参数通常不需要显式使用 <code>var</code> 或 <code>val</code> 修饰，Scala会自动使用 <code>val</code> 修饰(意味着值不能改变，只有 getter 方法)</li><li>自动为样例类定义了伴生对象，并提供 <code>apply</code> 方法，不用 <code>new</code> 关键字就能够构造出相应的对象</li><li>将生成<code>toString</code>、<code>equals</code>、<code>hashCode</code>和<code>copy</code>方法，除非显示的给出这些方法的定义</li><li>继承了 <code>Product</code> 和 <code>Serializable</code> 这两个特质，也就是说<strong>样例类</strong>可序列化和可应用Product的方法</li></ul><p><code>case class</code> 是多例的，后面要跟构造参数，<code>case object</code>是单例的。</p><p>此外，<code>case class</code> 样例类中可以添加方法和字段，并且可用于模式匹配。</p><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token keyword">class</span> Amount

<span class="token comment">// 样例类中主构造器的参数默认用 val 来修饰</span>
<span class="token comment">// 样例类中自动生成 apply 方法</span>
<span class="token keyword">case</span> <span class="token keyword">class</span> Dollar<span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">Double</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> Amount

<span class="token keyword">case</span> <span class="token keyword">class</span> Currency<span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">Double</span><span class="token punctuation">,</span> unit<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> Amount

<span class="token keyword">case</span> <span class="token keyword">object</span> <span class="token builtin">Nothing</span> <span class="token keyword">extends</span> Amount

<span class="token keyword">object</span> CaseClassDemo <span class="token punctuation">{</span>

  <span class="token keyword">def</span> judgeIdentity<span class="token punctuation">(</span>amt<span class="token operator">:</span> Amount<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    amt <span class="token keyword">match</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> Dollar<span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span>value<span class="token punctuation">)</span>
      <span class="token keyword">case</span> Currency<span class="token punctuation">(</span>value<span class="token punctuation">,</span> unit<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">value</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">unit</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
      <span class="token keyword">case</span> <span class="token builtin">Nothing</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;nothing&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    judgeIdentity<span class="token punctuation">(</span>Dollar<span class="token punctuation">(</span><span class="token number">10.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    judgeIdentity<span class="token punctuation">(</span>Currency<span class="token punctuation">(</span><span class="token number">20.0</span><span class="token punctuation">,</span> <span class="token string">&quot;100&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    judgeIdentity<span class="token punctuation">(</span><span class="token builtin">Nothing</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="第7节-option与模式匹配" tabindex="-1"><a class="header-anchor" href="#第7节-option与模式匹配" aria-hidden="true">#</a> 第7节 Option与模式匹配</h3><p>Scala Option选项类型用来表示一个值是可选的，有值或无值。</p><p><code>Option[T]</code> 是一个类型为 <code>T</code> 的可选值的容器，可以通过 <code>get()</code> 函数获取 <code>Option</code> 的值。 如果值存在，<code>Option[T]</code> 就是一个 <code>Some</code>。如果不存在，<code>Option[T]</code> 就是对象 None。</p><p>Option通常与模式匹配结合使用，用于判断某个变量是有值还是无值。</p><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token keyword">object</span> OptionDemo <span class="token punctuation">{</span>

  <span class="token keyword">val</span> grades <span class="token operator">=</span> Map<span class="token punctuation">(</span><span class="token string">&quot;jack&quot;</span> <span class="token operator">-&gt;</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token string">&quot;tom&quot;</span> <span class="token operator">-&gt;</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token string">&quot;jerry&quot;</span> <span class="token operator">-&gt;</span> <span class="token number">60</span><span class="token punctuation">)</span>

  <span class="token keyword">def</span> getGrade<span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> grade<span class="token operator">:</span> Option<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> grades<span class="token punctuation">.</span>get<span class="token punctuation">(</span>name<span class="token punctuation">)</span>
    grade <span class="token keyword">match</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> Some<span class="token punctuation">(</span>grande<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;成绩是：&quot;</span> <span class="token operator">+</span> grande<span class="token punctuation">)</span>
      <span class="token keyword">case</span> None <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;无此人成绩！&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    getGrade<span class="token punctuation">(</span><span class="token string">&quot;jack&quot;</span><span class="token punctuation">)</span>
    getGrade<span class="token punctuation">(</span><span class="token string">&quot;wong&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="第八部分-函数及抽象化" tabindex="-1"><a class="header-anchor" href="#第八部分-函数及抽象化" aria-hidden="true">#</a> 第八部分 函数及抽象化</h2><h3 id="第1节-函数字面量及函数的定义" tabindex="-1"><a class="header-anchor" href="#第1节-函数字面量及函数的定义" aria-hidden="true">#</a> 第1节 函数字面量及函数的定义</h3><p>Scala中函数为头等公民，不仅可以定义一个函数然后调用它，还可以写一个未命名的函数字面量， 然后可以把它当成一个值传递到其它函数或是赋值给其它变量。</p><p><em>函数字面量</em>体现了函数式编程的核心理念。字面量包括整数字面量、浮点数字面量、布尔型字面量、 字符字面量、字符串字面量、符号字面量、函数字面量等。</p><p>什么是函数字面量呢?</p><p>在函数式编程中，函数是“头等公民”，可以像任何其他数据类型一样被传递和操作。 函数的使用方式和其他数据类型的使用方式完全一致，可以像定义变量那样去定义一个函数， 函数也会和其他变量一样，有类型有值; 就像变量的“类型”和“值”是分开的两个概念一样， 函数的“类型”和“值”也成为两个分开的概念; <em>函数的“值”，就是“函数字面量”</em>。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>scala<span class="token operator">&gt;</span> def add1<span class="token punctuation">(</span>x:Int<span class="token punctuation">)</span>: <span class="token assign-left variable">Int</span><span class="token operator">=</span> <span class="token punctuation">{</span>x+1<span class="token punctuation">}</span> 
add1: <span class="token punctuation">(</span>x: Int<span class="token punctuation">)</span>Int
<span class="token comment"># 函数的类型为: (Int) =&gt; Int</span>
<span class="token comment"># 输入参数列表只有一个, 括号可以省略，简写为: Int =&gt; Int</span>

scala<span class="token operator">&gt;</span> def add2<span class="token punctuation">(</span>x: Int, y: Int<span class="token punctuation">)</span>: Int <span class="token operator">=</span> <span class="token punctuation">{</span> x + y <span class="token punctuation">}</span> 
add2: <span class="token punctuation">(</span>x: Int, y: Int<span class="token punctuation">)</span>Int
<span class="token comment"># 函数的类型为: (Int, Int) =&gt; Int</span>

scala<span class="token operator">&gt;</span> def add3<span class="token punctuation">(</span>x: Int, y: Int, z: Int<span class="token punctuation">)</span>: Int <span class="token operator">=</span> <span class="token punctuation">{</span> x + y + z <span class="token punctuation">}</span> 
add3: <span class="token punctuation">(</span>x: Int, y: Int, z: Int<span class="token punctuation">)</span>Int
<span class="token comment"># 函数的类型为: (Int, Int, Int) =&gt; Int</span>

scala<span class="token operator">&gt;</span> def add4<span class="token punctuation">(</span>x: Int, y: Int, z: Int<span class="token punctuation">)</span>: <span class="token punctuation">(</span>Int, Int<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>x + y, y + z<span class="token punctuation">)</span> <span class="token punctuation">}</span> 
add4: <span class="token punctuation">(</span>x: Int, y: Int, z: Int<span class="token punctuation">)</span><span class="token punctuation">(</span>Int, Int<span class="token punctuation">)</span>
<span class="token comment"># 函数的类型为: (Int, Int, Int) =&gt; (Int, Int)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><code>函数类型:(输入参数类型列表) =&gt; (输出参数类型列表)</code></p><p>只有一个参数时，小括号可省略; 函数体中只有1行语句时，大括号可以省略;</p><p>把函数定义中的类型声明部分去除，剩下的就是函数的“值”，即函数字面量:</p><p><img src="/doc/assets/README-1647778365675.9dd373bb.png" alt="函数语法"></p><ul><li>对 add1 而言函数的值为: <code>(x) =&gt; x + 1</code></li><li>对 add2 而言函数的值为: <code>(x, y) =&gt; x + y</code></li><li>对 add3 而言函数的值为: <code>(x, y, z) =&gt; x + y + z</code></li><li>对 add4 而言函数的值为: <code>(x, y, z) =&gt; (x+y, y+z)</code></li></ul><p>在Scala中我们这样定义变量: <code>val 变量名: 类型 = 值</code></p><p>我们可以用完全相同的方式定义函数: <code>val 函数名: 函数类型 = 函数字面量</code></p><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token keyword">val</span> add1<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token keyword">=&gt;</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> x <span class="token operator">+</span> <span class="token number">1</span>
<span class="token keyword">val</span> add2<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">Int</span><span class="token punctuation">,</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> x <span class="token operator">+</span> y
<span class="token keyword">val</span> add3<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">Int</span><span class="token punctuation">,</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> x <span class="token operator">+</span> y <span class="token operator">+</span> z
<span class="token keyword">val</span> add4<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">Int</span><span class="token punctuation">,</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token punctuation">(</span><span class="token builtin">Int</span><span class="token punctuation">,</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token punctuation">(</span>x <span class="token operator">+</span> y<span class="token punctuation">,</span> y <span class="token operator">+</span> z<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>在Scala中有自动类型推断，所以可以省略变量的类型 <code>val 变量名 = 值</code>。</p><p>同样函数也可以这样: <code>val 函数名 = 函数字面量</code></p><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token keyword">val</span> add1 <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> x <span class="token operator">+</span> <span class="token number">1</span>
<span class="token keyword">val</span> add2 <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> x <span class="token operator">+</span> y
<span class="token keyword">val</span> add3 <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> z<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> x <span class="token operator">+</span> y <span class="token operator">+</span> z
<span class="token keyword">val</span> add4 <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> z<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token punctuation">(</span>x <span class="token operator">+</span> y<span class="token punctuation">,</span> y <span class="token operator">+</span> z<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>备注: 要让编译器进行自动类型推断，要告诉编译器足够的信息，所以添加了 <code>x</code> 的类型信息。</p></blockquote><p>函数的定义:</p><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token keyword">val</span> 函数名<span class="token operator">:</span> <span class="token punctuation">(</span>参数类型<span class="token number">1</span>，参数类型<span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token punctuation">(</span>返回类型<span class="token punctuation">)</span> <span class="token operator">=</span> 函数字面量 
<span class="token keyword">val</span> 函数名 <span class="token operator">=</span> 函数字面量 函数字面量<span class="token operator">:</span><span class="token punctuation">(</span>参数<span class="token number">1</span><span class="token operator">:</span>类型<span class="token number">1</span>，参数<span class="token number">2</span><span class="token operator">:</span>类型<span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> 函数体
<span class="token keyword">val</span> 函数名 <span class="token operator">=</span> <span class="token punctuation">(</span>参数<span class="token number">1</span><span class="token operator">:</span>类型<span class="token number">1</span>，参数<span class="token number">2</span><span class="token operator">:</span>类型<span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> 函数体
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="第2节-函数与方法的区别" tabindex="-1"><a class="header-anchor" href="#第2节-函数与方法的区别" aria-hidden="true">#</a> 第2节 函数与方法的区别</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>scala<span class="token operator">&gt;</span> def addm<span class="token punctuation">(</span>x: Int, y: Int<span class="token punctuation">)</span>: Int <span class="token operator">=</span> x + y
addm: <span class="token punctuation">(</span>x: Int, y: Int<span class="token punctuation">)</span>Int

scala<span class="token operator">&gt;</span> val addf <span class="token operator">=</span> <span class="token punctuation">(</span>x: Int, y: Int<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> x + y
addf: <span class="token punctuation">(</span>Int, Int<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> Int <span class="token operator">=</span> <span class="token operator">&lt;</span>function<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>严格的说: 使用 <code>val</code> 定义的是函数(function)，使用 <code>def</code> 定义的是方法(method)。</p><p>二者在语义上的区别很小，在绝大多数情况下都可以不去理会它们之间的区别，但是有时候有必要了解它们之间的不同。</p><p>Scala中的方法与函数有以下区别:</p><ul><li>Scala 中的方法与 Java 的类似，方法是组成类的一部分</li><li>Scala 中的函数则是一个完整的对象。Scala 中用 22 个特质(从 Function1 到 Function22)抽象出了函数的概念</li><li>Scala 中用 <code>val</code> 语句定义函数，<code>def</code> 语句定义方法</li></ul><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token comment">// 下面用三种方式定义了函数，其中第二种方式最常见</span>
<span class="token keyword">val</span> adder1<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token builtin">Int</span><span class="token punctuation">,</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> x <span class="token operator">+</span> y 
<span class="token keyword">val</span> adder2 <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> x <span class="token operator">+</span> y

<span class="token comment">// Function2是特质，不能直接new</span>
<span class="token comment">// new Function2[Int,Int,Int]{ ... } </span>
<span class="token comment">// 其实是定义并实例化一个实现了 Function2 特质的类的对象</span>
<span class="token keyword">val</span> adder3 <span class="token operator">=</span> <span class="token keyword">new</span> Function2<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">,</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> <span class="token builtin">Int</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
  <span class="token keyword">def</span> apply<span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token punctuation">{</span> 
    x <span class="token operator">+</span> y
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><blockquote><p>第二种最为常见</p></blockquote><ul><li>方法不能作为单独的表达式而存在，而函数可以;</li><li>函数必须要有参数列表，而方法可以没有参数列表;</li><li>方法名是方法调用，而函数名只是代表函数对象本身;</li><li>在需要函数的地方，如果传递一个方法，会自动把方法转换为函数</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 方法不能作为单独的表达式而存在，而函数可以 </span>
scala<span class="token operator">&gt;</span> def addm<span class="token punctuation">(</span>x: Int, y: Int<span class="token punctuation">)</span>: Int <span class="token operator">=</span> x + y
addm: <span class="token punctuation">(</span>x: Int, y: Int<span class="token punctuation">)</span>Int

scala<span class="token operator">&gt;</span> val addf <span class="token operator">=</span> <span class="token punctuation">(</span>x: Int, y: Int<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> x + y
addf: <span class="token punctuation">(</span>Int, Int<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> Int <span class="token operator">=</span> <span class="token operator">&lt;</span>function<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>

scala<span class="token operator">&gt;</span> addm
<span class="token operator">&lt;</span>console<span class="token operator">&gt;</span>:13: error: missing argument list <span class="token keyword">for</span> method addm

scala<span class="token operator">&gt;</span> addf
res8: <span class="token punctuation">(</span>Int, Int<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> Int <span class="token operator">=</span> <span class="token operator">&lt;</span>function<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>

<span class="token comment"># 函数必须要有参数列表，而方法可以没有参数列表 </span>
scala<span class="token operator">&gt;</span> def m1 <span class="token operator">=</span> <span class="token string">&quot;This is zmn&quot;</span>
m1: String

<span class="token comment"># 函数必须有参数列表</span>
scala<span class="token operator">&gt;</span> val f1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&quot;This is zmn&quot;</span> 
f1: <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> String <span class="token operator">=</span> <span class="token operator">&lt;</span>function<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span>

<span class="token comment"># 方法名是方法调用</span>
scala<span class="token operator">&gt;</span> m1
res16: String <span class="token operator">=</span> This is zmn

<span class="token comment"># 函数名代表函数对象本身</span>
scala<span class="token operator">&gt;</span> f1
res17: <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> String <span class="token operator">=</span> <span class="token operator">&lt;</span>function<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span>

<span class="token comment"># 这才代表函数调用</span>
scala<span class="token operator">&gt;</span> f1<span class="token punctuation">(</span><span class="token punctuation">)</span>
res18: String <span class="token operator">=</span> This is zmn

<span class="token comment"># 需要函数的地方，可以传递一个方法，方法会自动转化为函数</span>
scala<span class="token operator">&gt;</span> val list <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span> to <span class="token number">10</span><span class="token punctuation">)</span>.toList
list: List<span class="token punctuation">[</span>Int<span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">1</span>, <span class="token number">2</span>, <span class="token number">3</span>, <span class="token number">4</span>, <span class="token number">5</span>, <span class="token number">6</span>, <span class="token number">7</span>, <span class="token number">8</span>, <span class="token number">9</span>, <span class="token number">10</span><span class="token punctuation">)</span>

scala<span class="token operator">&gt;</span> def double<span class="token punctuation">(</span>x: Int<span class="token punctuation">)</span> <span class="token operator">=</span> x * x
double: <span class="token punctuation">(</span>x: Int<span class="token punctuation">)</span>Int

scala<span class="token operator">&gt;</span> list.map<span class="token punctuation">(</span>double<span class="token punctuation">(</span>_<span class="token punctuation">))</span>
res20: List<span class="token punctuation">[</span>Int<span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">1</span>, <span class="token number">4</span>, <span class="token number">9</span>, <span class="token number">16</span>, <span class="token number">25</span>, <span class="token number">36</span>, <span class="token number">49</span>, <span class="token number">64</span>, <span class="token number">81</span>, <span class="token number">100</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><p>手动将方法转换为函数:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 注意: 方法名与下划线之间有一个空格 </span>
scala<span class="token operator">&gt;</span> def f1 <span class="token operator">=</span> double _
f1: Int <span class="token operator">=</span><span class="token operator">&gt;</span> Int

scala<span class="token operator">&gt;</span> f1
res21: Int <span class="token operator">=</span><span class="token operator">&gt;</span> Int <span class="token operator">=</span> <span class="token operator">&lt;</span>function<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>写程序的时候是定义方法、还是定义函数?</p><p>一般情况下，不对二者做区分，认为都是函数，更多的时候使用 <code>def</code> 定义函数。</p><h3 id="第3节-匿名函数与占位符" tabindex="-1"><a class="header-anchor" href="#第3节-匿名函数与占位符" aria-hidden="true">#</a> 第3节 匿名函数与占位符</h3><p>函数没有名字就是匿名函数;</p><p>匿名函数，又被称为 Lambda 表达式。</p><p>Lambda表达式的形式如下: <code>(参数名1: 类型1, 参数名2: 类型2, ... ...) =&gt; 函数体</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 定义匿名函数</span>
scala<span class="token operator">&gt;</span> <span class="token punctuation">(</span>x: Int<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> x + <span class="token number">1</span>
res0: Int <span class="token operator">=</span><span class="token operator">&gt;</span> Int <span class="token operator">=</span> <span class="token operator">&lt;</span>function<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>

<span class="token comment"># 函数没有名字，在集成开发环境中是无法被调用的 </span>
scala<span class="token operator">&gt;</span> res0<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
res1: Int <span class="token operator">=</span> <span class="token number">11</span>

scala<span class="token operator">&gt;</span> val list <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span> to <span class="token number">10</span><span class="token punctuation">)</span>.toList
lst: List<span class="token punctuation">[</span>Int<span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">1</span>, <span class="token number">2</span>, <span class="token number">3</span>, <span class="token number">4</span>, <span class="token number">5</span>, <span class="token number">6</span>, <span class="token number">7</span>, <span class="token number">8</span>, <span class="token number">9</span>, <span class="token number">10</span><span class="token punctuation">)</span>

<span class="token comment"># 将匿名函数作为参数传递给另一个函数 </span>
scala<span class="token operator">&gt;</span> list.map<span class="token variable"><span class="token punctuation">((</span>x<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
res2<span class="token operator">:</span> List[Int] <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span>

# x一定是Int类型，这里可以省略
scala<span class="token operator">&gt;</span> list.map<span class="token punctuation">((</span>x<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
res3<span class="token operator">:</span> List[Int] <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span>

# 只有一个参数，小括号可以省略
scala<span class="token operator">&gt;</span> list.map<span class="token punctuation">(</span>x <span class="token operator">=</span><span class="token operator">&gt;</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
res4<span class="token operator">:</span> List[Int] <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span>

# 使用占位符简化函数字面量
scala<span class="token operator">&gt;</span> list.map<span class="token punctuation">(</span>_ <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
res5<span class="token operator">:</span> List[Int] <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span>

# 实现将List中的每个元素<span class="token operator">*</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span>，但是出错了
scala<span class="token operator">&gt;</span> list.map<span class="token punctuation">(</span>_ <span class="token operator">+</span> _ <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span>console<span class="token operator">&gt;</span><span class="token operator">:</span><span class="token number">13</span><span class="token operator">:</span> error<span class="token operator">:</span> missing parameter type for expanded function <span class="token punctuation">((</span>x$<span class="token number">1</span><span class="token punctuation">,</span> x$<span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> x$<span class="token number">1.</span>$plus<span class="token punctuation">(</span>x$<span class="token number">2</span><span class="token punctuation">)</span>.$plus<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">))</span></span>
<span class="token comment"># 两个下划线代表的是两个参数，而不是一个参数的重复应用</span>

<span class="token comment"># 这样是可行的</span>
scala<span class="token operator">&gt;</span> list.map<span class="token punctuation">(</span><span class="token number">2</span> * _ + <span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment"># 通过reduce这个高阶函数，将list列表中的元素相加求和 </span>
scala<span class="token operator">&gt;</span> list.reduce<span class="token punctuation">((</span>x,y<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> x + y<span class="token punctuation">)</span>
res0: Int <span class="token operator">=</span> <span class="token number">55</span>

<span class="token comment"># 使用占位符简化函数字面量</span>
<span class="token comment"># 第一个下划线代表第一个参数，第二个下划线代表第二个参数 </span>
scala<span class="token operator">&gt;</span> list.reduce<span class="token punctuation">(</span>_ + _<span class="token punctuation">)</span>
res1: Int <span class="token operator">=</span> <span class="token number">55</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><p>多个下划线指代多个参数，而不是单个参数的重复运用</p><p>第一个下划线代表第一个参数 第二个下划线代表第二个参数 第三个下划线代表第三个参数，以此类推...</p><h3 id="第4节-高阶函数" tabindex="-1"><a class="header-anchor" href="#第4节-高阶函数" aria-hidden="true">#</a> 第4节 高阶函数</h3><p>高阶函数: 接收一个或多个函数作为输入, 或输出一个函数。</p><p>函数的参数可以是变量，而函数又可以赋值给变量，由于函数和变量地位一样，所以函数参数也可以是函数;</p><p>常用的高阶函数: <code>map</code>、<code>reduce</code>、<code>flatMap</code>、<code>foreach</code>、<code>filter</code>、<code>count</code> ... ... (接收函数作为参数)</p><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token keyword">object</span> HighFunction <span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>

    <span class="token comment">// 接收一个或多个函数作为输入的高阶函数</span>
    <span class="token keyword">val</span> func <span class="token operator">=</span> n <span class="token keyword">=&gt;</span> <span class="token string">&quot;*&quot;</span> <span class="token operator">*</span> n
    <span class="token punctuation">(</span><span class="token number">1</span> to <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span>map<span class="token punctuation">(</span>func<span class="token punctuation">(</span>_<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>foreach<span class="token punctuation">(</span>println<span class="token punctuation">(</span>_<span class="token punctuation">)</span><span class="token punctuation">)</span>
    println<span class="token punctuation">(</span><span class="token string">&quot;-----------------------------------&quot;</span><span class="token punctuation">)</span>

    <span class="token comment">// 输出一个函数的高阶函数</span>
    <span class="token keyword">val</span> urlBuilder <span class="token operator">=</span> <span class="token punctuation">(</span>ssl<span class="token operator">:</span> <span class="token builtin">Boolean</span><span class="token punctuation">,</span> domain<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">val</span> schema<span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>ssl<span class="token punctuation">)</span> <span class="token string">&quot;https://&quot;</span> <span class="token keyword">else</span> <span class="token string">&quot;http&quot;</span>
        <span class="token comment">// 输出一个匿名函数</span>
        <span class="token punctuation">(</span>endPoint<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">,</span> query<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">schema</span></span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">domain</span></span><span class="token string">/</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">endPoint</span></span><span class="token string">?</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">query</span></span><span class="token string">&quot;</span></span>
      <span class="token punctuation">}</span>
    <span class="token keyword">val</span> domainName <span class="token operator">=</span> <span class="token string">&quot;www.zmn.cn&quot;</span>

    <span class="token keyword">def</span> getUrl <span class="token operator">=</span> urlBuilder<span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> domainName<span class="token punctuation">)</span>

    <span class="token keyword">val</span> endPoint <span class="token operator">=</span> <span class="token string">&quot;show&quot;</span>
    <span class="token keyword">val</span> query <span class="token operator">=</span> <span class="token string">&quot;id=1&quot;</span>
    <span class="token keyword">val</span> url<span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> getUrl<span class="token punctuation">(</span>endPoint<span class="token punctuation">,</span> query<span class="token punctuation">)</span>
    println<span class="token punctuation">(</span>url<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="第5节-闭包" tabindex="-1"><a class="header-anchor" href="#第5节-闭包" aria-hidden="true">#</a> 第5节 闭包</h3><p>闭包是一种函数，一种比较特殊的函数，它和普通的函数有很大区别:</p><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token comment">// 普通的函数</span>
<span class="token keyword">val</span> addMore1 <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> x <span class="token operator">+</span> <span class="token number">10</span> 

<span class="token comment">// 外部变量，也称为自由变量</span>
<span class="token keyword">var</span> more <span class="token operator">=</span> <span class="token number">10</span>

<span class="token comment">// 闭包</span>
<span class="token keyword">val</span> addMore2 <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> x <span class="token operator">+</span> more

<span class="token comment">// 调用addMore1函数</span>
println<span class="token punctuation">(</span>addMore1<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 15</span>

<span class="token comment">// 每次addMore2函数被调用时，都会去捕获外部的自由变量 </span>
println<span class="token punctuation">(</span>addMore2<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 20</span>

<span class="token comment">// 如果外部自由变量改变，addMore2 的结果也会随之发生变化</span>
more <span class="token operator">=</span> <span class="token number">100</span>
println<span class="token punctuation">(</span>addMore2<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 110</span>

more <span class="token operator">=</span> <span class="token number">1000</span>
println<span class="token punctuation">(</span>addMore2<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 1010</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p><strong>闭包是在其上下文中引用了自由变量的函数;</strong></p><p>闭包引用到函数外面定义的变量，定义这个函数的过程就是将这个自由变量捕获而构成的一个封闭的函数， 也可理解为&quot;<em>把函数外部的一个自由变量关闭进来</em>&quot;。</p><p>何为闭包? 需满足下面三个条件:</p><ol><li>闭包是一个<strong>函数</strong></li><li>函数必须要<strong>有返回值</strong></li><li><strong>返回值依赖声明在函数外部的一个或多个变量</strong>，用Java的话说，就是返回值和定义的全局变量有关</li></ol><h3 id="第6节-柯里化" tabindex="-1"><a class="header-anchor" href="#第6节-柯里化" aria-hidden="true">#</a> 第6节 柯里化</h3><p>函数编程中，<strong>接收多个参数的函数都可以转化为接收单个参数的函数</strong>，这个转化过程就叫柯里化(Currying)。</p><p>Scala中，柯里化函数的定义形式和普通函数类似，区别在于柯里化函数拥有多组参数列表，每组参数用小括号括起来。</p><p>Scala API中很多函数都是柯里化的形式。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 使用普通的方式</span>
scala<span class="token operator">&gt;</span> def add1<span class="token punctuation">(</span>x: Int, y: Int<span class="token punctuation">)</span> <span class="token operator">=</span> x + y

<span class="token comment"># 使用闭包的方式，将其中一个函数作为返回值 </span>
scala<span class="token operator">&gt;</span> def add2<span class="token punctuation">(</span>x: Int<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span>y:Int<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> x + y

<span class="token comment"># 使用柯里化的方式</span>
scala<span class="token operator">&gt;</span> def add<span class="token punctuation">(</span>x: Int<span class="token punctuation">)</span><span class="token punctuation">(</span>y: Int<span class="token punctuation">)</span> <span class="token operator">=</span> x + y

<span class="token comment">#调用柯里化函数add</span>
scala<span class="token operator">&gt;</span> add<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
res1: Int <span class="token operator">=</span> <span class="token number">3</span> 
<span class="token comment"># add(1)(2)实际上第一次调用使用参数x，返回一个函数类型的值，第二次使用参数y调用这个函数类型的值。</span>

<span class="token comment"># 实际上最先演变成这样的函数:def add(x: Int) = (y:Int) =&gt; x + y </span>
<span class="token comment"># 在这个函数中，接收一个x为参数，返回一个匿名函数，这个匿名函数的定义是:接收一个Int型参数y，函数体是x+y。</span>
<span class="token comment"># 调用过程如下:</span>
scala<span class="token operator">&gt;</span> val <span class="token assign-left variable">result</span><span class="token operator">=</span>add<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
result: Int <span class="token operator">=</span><span class="token operator">&gt;</span> Int <span class="token operator">=</span> <span class="token operator">&lt;</span>function<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>

scala<span class="token operator">&gt;</span> val <span class="token assign-left variable">sum</span><span class="token operator">=</span>result<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
sum: Int <span class="token operator">=</span> <span class="token number">3</span>

scala<span class="token operator">&gt;</span> <span class="token function">sum</span>
res0: Int <span class="token operator">=</span> <span class="token number">3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="第7节-部分应用函数" tabindex="-1"><a class="header-anchor" href="#第7节-部分应用函数" aria-hidden="true">#</a> 第7节 部分应用函数</h3><p>部分应用函数(Partial Applied Function)也叫偏应用函数，与偏函数从名称上看非常接近， 但二者之间却有天壤之别。</p><p>部分应用函数是指缺少部分(甚至全部)参数的函数。</p><p>如果一个函数有n个参数, 而为其提供少于n个参数, 那就得到了一个部分应用函数。</p><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token comment">// 定义一个函数</span>
<span class="token keyword">def</span> add<span class="token punctuation">(</span>x<span class="token operator">:</span><span class="token builtin">Int</span><span class="token punctuation">,</span> y<span class="token operator">:</span><span class="token builtin">Int</span><span class="token punctuation">,</span> z<span class="token operator">:</span><span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token operator">=</span> x<span class="token operator">+</span>y<span class="token operator">+</span>z

<span class="token comment">// 得到一个偏应用函数 // Int不能省略</span>
<span class="token keyword">def</span> addX <span class="token operator">=</span> add<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> _<span class="token operator">:</span><span class="token builtin">Int</span><span class="token punctuation">,</span> _<span class="token operator">:</span><span class="token builtin">Int</span><span class="token punctuation">)</span> 
addX<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// 1 + 2 + 3 = 6</span>
addX<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment">// 1 + 3 + 4 = 8</span>

<span class="token keyword">def</span> addXAndY <span class="token operator">=</span> add<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> _<span class="token operator">:</span><span class="token builtin">Int</span><span class="token punctuation">)</span>
addXAndY<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 10 + 100 + 1 = 111</span>

<span class="token keyword">def</span> addZ <span class="token operator">=</span> add<span class="token punctuation">(</span>_<span class="token operator">:</span><span class="token builtin">Int</span><span class="token punctuation">,</span> _<span class="token operator">:</span><span class="token builtin">Int</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
addZ<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 1 + 2 + 10 = 13</span>

<span class="token comment">// 省略了全部的参数，下面两个等价。第二个更常用 </span>
<span class="token keyword">def</span> add1 <span class="token operator">=</span> add<span class="token punctuation">(</span>_<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> _<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> _<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> 
<span class="token keyword">def</span> add2 <span class="token operator">=</span> add _
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="第8节-偏函数" tabindex="-1"><a class="header-anchor" href="#第8节-偏函数" aria-hidden="true">#</a> 第8节 偏函数</h3><p>偏函数(Partial Function)之所以&quot;偏&quot;，原因在于它们并不处理所有可能的输入， 而只处理那些能与至少一个 <code>case</code> 语句匹配的输入;</p><p>在偏函数中只能使用 <code>case</code> 语句，整个函数必须用大括号包围。 这与普通的函数字面量不同，普通的函数字面量可以使用大括号，也可以用小括号; 被包裹在大括号中的<strong>一组case语句是一个偏函数</strong>，是一个并非对所有输入值都有定义的函数;</p><p>Scala中的Partial Function是一个 <code>trait</code>，其类型为 <code>PartialFunction[A,B]</code>， 表示: 接收一个类型为A的参数，返回一个类型为B的结果。</p><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token comment">// 1、2、3有对应的输出值，其它输入打印 Other </span>
<span class="token keyword">val</span> pf<span class="token operator">:</span> PartialFunction<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">,</span> <span class="token builtin">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">case</span> <span class="token number">1</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;One&quot;</span>
  <span class="token keyword">case</span> <span class="token number">2</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;Two&quot;</span>
  <span class="token keyword">case</span> <span class="token number">3</span> <span class="token keyword">=&gt;</span> <span class="token string">&quot;Three&quot;</span>
  <span class="token keyword">case</span> _<span class="token keyword">=&gt;</span> <span class="token string">&quot;Other&quot;</span>
<span class="token punctuation">}</span>

pf<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 返回: One </span>
pf<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 返回: Two </span>
pf<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token comment">// 返回: Other</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>需求: 过滤List中的String类型的元素，并将Int类型的元素加1。通过偏函数实现上述需求。</p><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token keyword">object</span> PartialFunctionDemo <span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> partialFunction <span class="token operator">=</span> <span class="token keyword">new</span> PartialFunction<span class="token punctuation">[</span><span class="token builtin">Any</span><span class="token punctuation">,</span> <span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
      <span class="token comment">// [Any, Int] 表示偏函数接收的数据类型是 Any, 返回的数据类型是 Int</span>

      <span class="token comment">// 如果返回true 就调用 apply 方法; 否则就过滤掉</span>
      <span class="token keyword">override</span> <span class="token keyword">def</span> isDefinedAt<span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">Any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Boolean</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
        println<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
        x<span class="token punctuation">.</span>isInstanceOf<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// 对传入的整数值 +1 并返回</span>
      <span class="token keyword">override</span> <span class="token keyword">def</span> apply<span class="token punctuation">(</span>v1<span class="token operator">:</span> <span class="token builtin">Any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
        println<span class="token punctuation">(</span>v1<span class="token punctuation">.</span>toString<span class="token punctuation">)</span>
        v1<span class="token punctuation">.</span>asInstanceOf<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">val</span> list <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;hadoop&quot;</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">&quot;spark&quot;</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token string">&quot;flink&quot;</span><span class="token punctuation">)</span>
    list<span class="token punctuation">.</span>collect<span class="token punctuation">(</span>partialFunction<span class="token punctuation">)</span><span class="token punctuation">.</span>foreach<span class="token punctuation">(</span>println<span class="token punctuation">(</span>_<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment">// 实际简单多了</span>
    list<span class="token punctuation">.</span>collect<span class="token punctuation">{</span><span class="token keyword">case</span> x<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token keyword">=&gt;</span> x<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">.</span>foreach<span class="token punctuation">(</span>println<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="第九部分-集合" tabindex="-1"><a class="header-anchor" href="#第九部分-集合" aria-hidden="true">#</a> 第九部分 集合</h2><p>主要内容:</p><ol><li>Scala中的可变和不可变集合</li><li>集合的三大类: Seq、Set、Map</li><li>集合的常用算子</li><li>Scala与Java之间的集合转换</li></ol><h3 id="第1节-可变和不可变集合" tabindex="-1"><a class="header-anchor" href="#第1节-可变和不可变集合" aria-hidden="true">#</a> 第1节 可变和不可变集合</h3><p>根据容器中元素的组织方式和操作方式，可以分为有序和无序、可变和不可变等不同的容器类别;</p><ul><li><p><em>不可变集合</em>指集合内的元素一旦初始化完成就不可再进行更改，任何对集合的改变都将生成一个新的集合;</p></li><li><p><em>可变集合</em>提供了改变集合内元素的方法;</p></li></ul><p>Scala同时支持可变集合和不可变集合，主要下面两个包:</p><ul><li><code>scala.collection.mutable</code>: 定义了可变集合的特质和具体实现类</li><li><code>scala.collection.immutable</code>: 定义了不可变集合的特质和具体实现类</li></ul><p>对于几乎所有的集合类，Scala都同时提供了可变和不可变的版本。</p><p><strong>Scala优先采用不可变集合</strong>，不可变集合元素不可更改，可以安全的并发访问。</p><p>Scala集合有三大类: Seq(序列)、Set(集)、Map(映射); 所有的集合都扩展自 <code>Iterable</code> 特质。</p><p><img src="/doc/assets/README-1648178456195.6ede0325.png" alt="Scala集合框架"></p><p>immutable 不可变集合框架</p><p><img src="/doc/assets/README-1648178511983.7e2c2e46.png" alt="不可变集合框架"></p><p>mutable 可变集合框架</p><p><img src="/doc/assets/README-1648178574089.9dfed28b.png" alt="可变集合框架"></p><p>小结:</p><ul><li>String 属于 <code>IndexedSeq</code></li><li><code>Queue</code> 队列和 <code>Stack</code> 堆这两个经典的数据结构属于 <code>LinearSeq</code></li><li><code>Map</code> 体系下有一个 <code>SortedMap</code>，说明Scala中的Map是可以支持排序的</li><li><code>mutable</code> 可变集合中 <code>Seq</code> 中的 <code>Buffer</code> 下有 <code>ListBuffer</code>，它相当于可变的List列表</li><li><code>List</code> 列表属于 <code>Seq</code> 中的 <code>LinearSeq</code></li></ul><h3 id="第2节-seq" tabindex="-1"><a class="header-anchor" href="#第2节-seq" aria-hidden="true">#</a> 第2节 Seq</h3><p>Seq代表按照一定顺序排列的元素序列;</p><p>该序列是一种特别的可迭代集合，包含可重复的元素;</p><p>元素的顺序是确定的，每个元素对应一个索引值;</p><p>Seq提供了两个重要的子特质:</p><ul><li>IndexedSeq: 提供了快速随机访问元素的功能，它通过索引来查找和定位的</li><li>LinearSeq: 提供了访问head、tail的功能，它是线型的，有头部和尾部的概念，通过遍历来查找。</li></ul><blockquote><p>LinearSeq 应该类似于链表</p></blockquote><h4 id="_2-1-list" tabindex="-1"><a class="header-anchor" href="#_2-1-list" aria-hidden="true">#</a> 2.1 List</h4><p>List代表元素顺序固定的不可变的链表，它是Seq的子类，在Scala编程中经常使用。</p><p>List是函数式编程语言中典型的数据结构，与数组类似，可索引、存放类型相同的元素。</p><p>List一旦被定义，其值就不能改变。</p><p>List列表有头部和尾部的概念，可以分别使用 <code>head</code> 和 <code>tail</code> 方法来获取:</p><ul><li><code>head</code> 返回的是列表第一个元素的值</li><li><code>tail</code> 返回的是除第一个元素外的其它元素构成的新列表</li></ul><blockquote><p>这体现出列表具有递归的链表结构。</p></blockquote><p>Scala定义了一个空列表对象 <code>Nil</code>，定义为 <code>List[Nothing]</code></p><p>借助 Nil 可将多个元素用操作符 <code>::</code> 添加到列表头部，常用来初始化列表;</p><p>操作符 <code>:::</code> 用于拼接两个列表;</p><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token keyword">object</span> ListDemo <span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// Nil 表示一个空的列表</span>
    <span class="token comment">// :: 操作符表示向集合中添加元素，他是从右往左运算的，所以集合对象一定要放在最右边</span>
    <span class="token keyword">val</span> list1 <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">::</span> <span class="token number">2</span> <span class="token operator">::</span> <span class="token number">3</span> <span class="token operator">::</span> <span class="token number">4</span> <span class="token operator">::</span> Nil

    <span class="token keyword">val</span> list2 <span class="token operator">=</span> <span class="token number">5</span> <span class="token operator">::</span> <span class="token number">6</span> <span class="token operator">::</span> <span class="token number">7</span> <span class="token operator">::</span> <span class="token number">8</span> <span class="token operator">::</span> Nil

    <span class="token comment">// ::: 操作符进行拼接，不用使用 :: 进行列表的拼接</span>
    <span class="token keyword">val</span> list3 <span class="token operator">=</span> list1 <span class="token operator">::</span><span class="token operator">:</span> list2

    <span class="token comment">//返回第一个元素</span>
    println<span class="token punctuation">(</span>list3<span class="token punctuation">.</span>head<span class="token punctuation">)</span> <span class="token comment">// 1</span>
    <span class="token comment">//返回除第一个元素外的其它元素构成的新列表</span>
    println<span class="token punctuation">(</span>list3<span class="token punctuation">.</span>tail<span class="token punctuation">)</span> <span class="token comment">// List(2, 3, 4, 5, 6, 7, 8)</span>
    <span class="token comment">//返回除最后一个元素外的其它元素构成的新列表</span>
    println<span class="token punctuation">(</span>list3<span class="token punctuation">.</span>init<span class="token punctuation">)</span> <span class="token comment">// List(1, 2, 3, 4, 5, 6, 7)</span>
    <span class="token comment">//返回最后一个元素</span>
    println<span class="token punctuation">(</span>list3<span class="token punctuation">.</span>last<span class="token punctuation">)</span> <span class="token comment">// 8</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>列表递归的结构，便于编写递归的算法:</p><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token keyword">object</span> ListDemo <span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> list4 <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span>
    println<span class="token punctuation">(</span>quickSort<span class="token punctuation">(</span>list4<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// List(1, 2, 4, 6, 7, 9)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">def</span> quickSort<span class="token punctuation">(</span>list<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    list <span class="token keyword">match</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> Nil <span class="token keyword">=&gt;</span> Nil
      <span class="token keyword">case</span> head <span class="token operator">::</span> tail <span class="token keyword">=&gt;</span>
        <span class="token comment">// 通过 partition 将 tail 分为两部分</span>
        <span class="token comment">// 小于 head 的元素放入 less 中，大于 head 的元素放入 greater 中</span>
        <span class="token keyword">val</span> <span class="token punctuation">(</span>less<span class="token punctuation">,</span> greater<span class="token punctuation">)</span> <span class="token operator">=</span> tail<span class="token punctuation">.</span>partition<span class="token punctuation">(</span>_ <span class="token operator">&lt;</span> head<span class="token punctuation">)</span>
        quickSort<span class="token punctuation">(</span>less<span class="token punctuation">)</span> <span class="token operator">::</span><span class="token operator">:</span> head <span class="token operator">::</span> quickSort<span class="token punctuation">(</span>greater<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br><br></div><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="_2-2-queue" tabindex="-1"><a class="header-anchor" href="#_2-2-queue" aria-hidden="true">#</a> 2.2 Queue</h4><p>队列Queue是一个先进先出的结构。</p><p>队列是一个有序列表，在底层可以用数组或链表来实现。</p><p><em>先进先出</em>的原则就是: 先存入的数据，要先取出，后存入的数据后取出。</p><p>在Scala中，有 <code>scala.collection.mutable.Queue</code> 和 <code>scala.collection.immutable.Queue</code>， 一般来说，我们使用的是 <code>scala.collection.mutable.Queue</code> (可变队列)</p><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token keyword">object</span> QueueDemo <span class="token punctuation">{</span>

  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 创建一个可变队列</span>
    <span class="token keyword">val</span> queue1 <span class="token operator">=</span> <span class="token keyword">new</span> mutable<span class="token punctuation">.</span>Queue<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    println<span class="token punctuation">(</span>queue1<span class="token punctuation">)</span> <span class="token comment">// Queue()</span>

    <span class="token comment">// 向队列中添加元素</span>
    queue1 <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token comment">// 向队列中添加 List 列表</span>
    queue1 <span class="token operator">++</span><span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
    println<span class="token punctuation">(</span>queue1<span class="token punctuation">)</span> <span class="token comment">// Queue(1, 2, 3, 4)</span>

    <span class="token comment">// 按照进入队列的顺序，删除队列中的元素</span>
    <span class="token comment">// 返回队列中的第一个元素，并从队列中删除这个元素</span>
    <span class="token keyword">val</span> dequeue<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> queue1<span class="token punctuation">.</span>dequeue<span class="token punctuation">(</span><span class="token punctuation">)</span>
    println<span class="token punctuation">(</span>dequeue<span class="token punctuation">)</span> <span class="token comment">// 1</span>
    println<span class="token punctuation">(</span>queue1<span class="token punctuation">)</span> <span class="token comment">// Queue(2, 3, 4)</span>

    <span class="token comment">// 再向队列中添加元素</span>
    queue1<span class="token punctuation">.</span>enqueue<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span>
    println<span class="token punctuation">(</span>queue1<span class="token punctuation">)</span> <span class="token comment">// Queue(2, 3, 4, 5, 6, 7)</span>

    <span class="token comment">// 获取第一个和最后一个元素</span>
    println<span class="token punctuation">(</span>queue1<span class="token punctuation">.</span>head<span class="token punctuation">)</span> <span class="token comment">// 2</span>
    println<span class="token punctuation">(</span>queue1<span class="token punctuation">.</span>last<span class="token punctuation">)</span> <span class="token comment">// 7</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h3 id="第3节-set" tabindex="-1"><a class="header-anchor" href="#第3节-set" aria-hidden="true">#</a> 第3节 Set</h3><p>Set(集合)是没有重复元素的对象集合，Set中的元素是唯一的;</p><p>Set分为可变的和不可变的集合;</p><p>默认情况下，使用的是不可变集合(引用 <code>scala.collection.immutable.Set</code>);</p><p>使用可变集合，需要引用 <code>scala.collection.mutable.Set</code> 包;</p><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token keyword">object</span> SetDemo <span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 创建一个 Set 集合</span>
    <span class="token keyword">val</span> set <span class="token operator">=</span> Set<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span>
    set<span class="token punctuation">.</span>drop<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    println<span class="token punctuation">(</span>set<span class="token punctuation">)</span> <span class="token comment">// HashSet(5, 1, 6, 2, 3, 4) 没有发生任何改变</span>

    <span class="token comment">// 创建一个可变的 Set</span>
    <span class="token keyword">val</span> mutableSet <span class="token operator">=</span> mutable<span class="token punctuation">.</span>Set<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
    <span class="token comment">// 对可变 Set 进行增加/删除元素操作</span>
    mutableSet<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>
    println<span class="token punctuation">(</span>mutableSet<span class="token punctuation">)</span> <span class="token comment">// HashSet(3, 4, 5, 7)</span>

    mutableSet<span class="token punctuation">.</span>remove<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>
    println<span class="token punctuation">(</span>mutableSet<span class="token punctuation">)</span> <span class="token comment">// HashSet(3, 4, 5)</span>

    <span class="token comment">// 通过 +=/-= 进行增加/删除元素操作</span>
    mutableSet <span class="token operator">+=</span> <span class="token number">8</span>
    mutableSet <span class="token operator">-=</span> <span class="token number">3</span>
    println<span class="token punctuation">(</span>mutableSet<span class="token punctuation">)</span> <span class="token comment">// HashSet(8, 4, 5)</span>

    <span class="token comment">// 对 Set 集合求交集 &amp;, intersect</span>
    println<span class="token punctuation">(</span>mutable<span class="token punctuation">.</span>Set<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> mutable<span class="token punctuation">.</span>Set<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//HashSet(2, 3)</span>
    println<span class="token punctuation">(</span>mutable<span class="token punctuation">.</span>Set<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span>intersect<span class="token punctuation">(</span>mutable<span class="token punctuation">.</span>Set<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//HashSet(2, 3)</span>

    <span class="token comment">// 对 Set 集合求并集 ++, |, union</span>
    println<span class="token punctuation">(</span>mutable<span class="token punctuation">.</span>Set<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">++</span> mutable<span class="token punctuation">.</span>Set<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// HashSet(1, 2, 3, 4)</span>
    println<span class="token punctuation">(</span>mutable<span class="token punctuation">.</span>Set<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">|</span> mutable<span class="token punctuation">.</span>Set<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// HashSet(1, 2, 3, 4)</span>
    println<span class="token punctuation">(</span>mutable<span class="token punctuation">.</span>Set<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span>union<span class="token punctuation">(</span>mutable<span class="token punctuation">.</span>Set<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// HashSet(1, 2, 3, 4)</span>

    <span class="token comment">// 对 Set 集合求差集 --, &amp;~, diff</span>
    println<span class="token punctuation">(</span>mutable<span class="token punctuation">.</span>Set<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">--</span> mutable<span class="token punctuation">.</span>Set<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// HashSet(1)</span>
    <span class="token comment">// 求差集就相当于把 Set1 中与 Set2 相同的元素删除，所得到的集合</span>
    println<span class="token punctuation">(</span>mutable<span class="token punctuation">.</span>Set<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span><span class="token operator">~</span> mutable<span class="token punctuation">.</span>Set<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// HashSet(1)</span>
    println<span class="token punctuation">(</span>mutable<span class="token punctuation">.</span>Set<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span>diff<span class="token punctuation">(</span>mutable<span class="token punctuation">.</span>Set<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// HashSet(1)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h3 id="第4节-map" tabindex="-1"><a class="header-anchor" href="#第4节-map" aria-hidden="true">#</a> 第4节 Map</h3><p>Map(映射)是一系列键值对的容器;</p><p>Scala 提供了可变的和不可变的两种版本的Map，分别定义在包 <code>scala.collection.mutable</code> 和 <code>scala.collection.immutable</code> 包里;</p><p>默认情况下，Scala中使用不可变的 <code>Map</code>;</p><p>如果要使用可变Map，必须导入 <code>scala.collection.mutable.Map</code>;</p><blockquote><p>在Map中，键的值是唯一的，可以根据键来对值进行快速的检索。</p></blockquote><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token comment">// 可使用两种方式定义Map</span>
<span class="token comment">// Map缺省是不可变的，值不能更改</span>
<span class="token keyword">val</span> a <span class="token operator">=</span> Map<span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span> <span class="token operator">-&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span> <span class="token operator">-&gt;</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span> <span class="token operator">-&gt;</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> a <span class="token operator">=</span> Map<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
a<span class="token punctuation">.</span>keys
a<span class="token punctuation">.</span>values

<span class="token comment">// 获取Map中的值: </span>
a<span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span>

<span class="token comment">// 访问不存在的key时，会抛出异常。Java.util.NoSuchElementException: key not found: x</span>
a<span class="token punctuation">(</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">)</span>

<span class="token comment">// 使用get方法，返回一个Option对象，要么是Some(键对应的值)，要么是None</span>
a<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span>

<span class="token comment">// 获取键对应的值，如果键不存在返回给定的值(这里是0)</span>
a<span class="token punctuation">.</span>getOrElse<span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

<span class="token comment">// 更新Map中的值(要使用可变的Map)</span>
<span class="token keyword">val</span> b <span class="token operator">=</span> scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>mutable<span class="token punctuation">.</span>Map<span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span> <span class="token operator">-&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span> <span class="token operator">-&gt;</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span> <span class="token operator">-&gt;</span> <span class="token number">3</span><span class="token punctuation">)</span> 
b<span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">2</span>

<span class="token comment">// 增加了一个新元素 </span>
b<span class="token punctuation">(</span><span class="token string">&quot;d&quot;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">4</span>

<span class="token comment">// 用 + 添加新的元素;用 – 删除元素 </span>
b <span class="token operator">+=</span> <span class="token punctuation">(</span><span class="token string">&quot;e&quot;</span> <span class="token operator">-&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;f&quot;</span> <span class="token operator">-&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span>
b <span class="token operator">-=</span> <span class="token string">&quot;a&quot;</span>

<span class="token comment">// 增加元素</span>
<span class="token keyword">val</span> b <span class="token operator">=</span> Map<span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span> <span class="token operator">-&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span> <span class="token operator">-&gt;</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span> <span class="token operator">-&gt;</span> <span class="token number">3</span><span class="token punctuation">)</span> 
<span class="token keyword">val</span> c <span class="token operator">=</span> b <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span> <span class="token operator">-&gt;</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span> <span class="token operator">-&gt;</span> <span class="token number">20</span><span class="token punctuation">)</span>

<span class="token comment">// 通过包含键值对的二元组创建Map集合</span>
<span class="token keyword">val</span> a <span class="token operator">=</span> Map<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// 逐个访问 value</span>
<span class="token keyword">for</span><span class="token punctuation">(</span>v <span class="token keyword">&lt;-</span> a<span class="token punctuation">.</span>values<span class="token punctuation">)</span> println<span class="token punctuation">(</span>v<span class="token punctuation">)</span>

<span class="token comment">// key 和 value 做了交换</span>
<span class="token keyword">val</span> b <span class="token operator">=</span> <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span>v<span class="token punctuation">)</span> <span class="token keyword">&lt;-</span> a<span class="token punctuation">)</span> <span class="token keyword">yield</span> <span class="token punctuation">(</span>v<span class="token punctuation">,</span>k<span class="token punctuation">)</span>

<span class="token comment">// 下面才是具有scala风格的写法，推荐 </span>
a<span class="token punctuation">.</span>map<span class="token punctuation">(</span>x<span class="token keyword">=&gt;</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>_2<span class="token punctuation">,</span> x<span class="token punctuation">.</span>_1<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// 拉链操作创建Map</span>
<span class="token keyword">val</span> a <span class="token operator">=</span> Array<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> b <span class="token operator">=</span> Array<span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//c: Array[(Int, String)]</span>
<span class="token keyword">val</span> c <span class="token operator">=</span> a<span class="token punctuation">.</span>zip<span class="token punctuation">(</span>b<span class="token punctuation">)</span>
<span class="token comment">//c: scala.collection.immutable.Map[Int,String] </span>
<span class="token keyword">val</span> c <span class="token operator">=</span> a<span class="token punctuation">.</span>zip<span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">.</span>toMap
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div><p>测试：</p><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token keyword">object</span> MapDemo <span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 使用两种方式定义Map</span>
    <span class="token keyword">val</span> map1 <span class="token operator">=</span> Map<span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span> <span class="token operator">-&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span> <span class="token operator">-&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token keyword">val</span> map2 <span class="token operator">=</span> Map<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    map1<span class="token punctuation">.</span>keys<span class="token punctuation">.</span>foreach<span class="token punctuation">(</span>println<span class="token punctuation">(</span>_<span class="token punctuation">)</span><span class="token punctuation">)</span>
    map1<span class="token punctuation">.</span>values<span class="token punctuation">.</span>foreach<span class="token punctuation">(</span>println<span class="token punctuation">(</span>_<span class="token punctuation">)</span><span class="token punctuation">)</span>

    println<span class="token punctuation">(</span>map1<span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 2</span>

    <span class="token comment">// 如果访问不存在的 key 值，会抛出异常</span>
    <span class="token comment">// println(map1(&quot;c&quot;)) // key not found: c</span>

    <span class="token comment">// 也可以通过 get 方法获取与 key 对应的 value 的值</span>
    <span class="token comment">// get 方法会返回一个 Option 对象, 要么是 Some (有值), 要么是 None (无值)</span>
    <span class="token keyword">val</span> num<span class="token operator">:</span> Option<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> map1<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span>
    num <span class="token keyword">match</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> None <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;None&quot;</span><span class="token punctuation">)</span>
      <span class="token keyword">case</span> Some<span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 获取 key 所对应的 value 值; 如果 key 不存在，则返回指定的值。</span>
    <span class="token keyword">val</span> num2<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> map1<span class="token punctuation">.</span>getOrElse<span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
    println<span class="token punctuation">(</span>num2<span class="token punctuation">)</span> <span class="token comment">// 1</span>

    <span class="token comment">// 创建一个可变的 Map</span>
    <span class="token keyword">val</span> map3 <span class="token operator">=</span> scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>mutable<span class="token punctuation">.</span>Map<span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span> <span class="token operator">-&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span> <span class="token operator">-&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span>
    println<span class="token punctuation">(</span>map3<span class="token punctuation">)</span> <span class="token comment">// HashMap(a -&gt; 1, b -&gt; 2)</span>
    map3<span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">10</span>
    println<span class="token punctuation">(</span>map3<span class="token punctuation">)</span> <span class="token comment">// HashMap(a -&gt; 10, b -&gt; 2)</span>

    <span class="token comment">// 增加一个元素</span>
    map3<span class="token punctuation">(</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">3</span>
    println<span class="token punctuation">(</span>map3<span class="token punctuation">)</span> <span class="token comment">// HashMap(a -&gt; 10, b -&gt; 2, c -&gt; 3)</span>

    <span class="token comment">// 通过 += 添加元素；通过 -= 删除元素</span>
    map3 <span class="token operator">+=</span> <span class="token punctuation">(</span><span class="token string">&quot;d&quot;</span> <span class="token operator">-&gt;</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;f&quot;</span> <span class="token operator">-&gt;</span> <span class="token number">5</span><span class="token punctuation">)</span>
    println<span class="token punctuation">(</span>map3<span class="token punctuation">)</span> <span class="token comment">// HashMap(a -&gt; 10, b -&gt; 2, c -&gt; 3, d -&gt; 4, f -&gt; 5)</span>
    map3 <span class="token operator">-=</span> <span class="token string">&quot;d&quot;</span>
    println<span class="token punctuation">(</span>map3<span class="token punctuation">)</span> <span class="token comment">// HashMap(a -&gt; 10, b -&gt; 2, c -&gt; 3, f -&gt; 5)</span>

    <span class="token comment">// 将 key,value 的值互换</span>
    <span class="token keyword">val</span> map4<span class="token operator">:</span> mutable<span class="token punctuation">.</span>Map<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">,</span> <span class="token builtin">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">)</span> <span class="token keyword">&lt;-</span> map3<span class="token punctuation">)</span> <span class="token keyword">yield</span> <span class="token punctuation">(</span>v<span class="token punctuation">,</span> k<span class="token punctuation">)</span>
    println<span class="token punctuation">(</span>map4<span class="token punctuation">)</span> <span class="token comment">// HashMap(2 -&gt; b, 3 -&gt; c, 5 -&gt; f, 10 -&gt; a)</span>
    <span class="token comment">// 推荐使用的互换方式 // x._2 =&gt; value, x._1 =&gt; key</span>
    map3<span class="token punctuation">.</span>map<span class="token punctuation">(</span>x <span class="token keyword">=&gt;</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>_2<span class="token punctuation">,</span> x<span class="token punctuation">.</span>_1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>foreach<span class="token punctuation">(</span>println<span class="token punctuation">(</span>_<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment">// 通过拉链操作创建Map</span>
    <span class="token keyword">val</span> a <span class="token operator">=</span> Array<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
    <span class="token keyword">val</span> b <span class="token operator">=</span> Array<span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">val</span> c<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token builtin">Int</span><span class="token punctuation">,</span> <span class="token builtin">String</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">.</span>zip<span class="token punctuation">(</span>b<span class="token punctuation">)</span>
    <span class="token keyword">val</span> map5<span class="token operator">:</span> Map<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">,</span> <span class="token builtin">String</span><span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">.</span>zip<span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">.</span>toMap
    println<span class="token punctuation">(</span>map5<span class="token punctuation">)</span> <span class="token comment">// Map(1 -&gt; a, 2 -&gt; b, 3 -&gt; c)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br></div></div><h3 id="第5节-集合常用算子" tabindex="-1"><a class="header-anchor" href="#第5节-集合常用算子" aria-hidden="true">#</a> 第5节 集合常用算子</h3><h4 id="_5-1-map、foreach-mapvalues" tabindex="-1"><a class="header-anchor" href="#_5-1-map、foreach-mapvalues" aria-hidden="true">#</a> 5.1 map、foreach &amp; mapValues</h4><p>集合对象都有 foreach、map 算子。</p><p>两个算子的共同点在于: 都是用于遍历集合对象，并对每一项执行指定的方法;</p><p>两个算子的差异点在于:</p><ul><li><code>foreach</code> 无返回值(准确说返回 <code>void</code>)，用于遍历集合</li><li><code>map</code> 返回集合对象，用于将一个集合转换成另一个集合</li></ul><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token comment">// 使用 foreach 打印集合元素</span>
<span class="token keyword">val</span> numlist <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span> to <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span>toList 
numlist<span class="token punctuation">.</span>foreach<span class="token punctuation">(</span>elem<span class="token keyword">=&gt;</span>print<span class="token punctuation">(</span>elem<span class="token operator">+</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
numlist<span class="token punctuation">.</span>foreach<span class="token punctuation">(</span>print _<span class="token punctuation">)</span> 
numlist<span class="token punctuation">.</span>foreach<span class="token punctuation">(</span>print<span class="token punctuation">)</span>

<span class="token comment">// 使用 map 对集合进行转换 </span>
numlist<span class="token punctuation">.</span>map<span class="token punctuation">(</span>_ <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span> 
numlist<span class="token punctuation">.</span>map<span class="token punctuation">(</span>_ <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>操作 Map 集合时，<code>mapValues</code> 用于遍历 <code>value</code>，是map操作的一种简化形式;</p><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token comment">// Range(20, 0, -2)用给定的步长值设定一个范围，从开始到结束(不包含)。</span>
<span class="token comment">// Map(20 -&gt; 0, 18 -&gt; 1, 16 -&gt; 2, ..., 4 -&gt; 8, 2 -&gt; 9)</span>
<span class="token keyword">val</span> map <span class="token operator">=</span> Range<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>zipWithIndex<span class="token punctuation">.</span>toMap
<span class="token comment">// 将map集合中的value值+100</span>
map<span class="token punctuation">.</span>map<span class="token punctuation">(</span>elem <span class="token keyword">=&gt;</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>_1<span class="token punctuation">,</span> elem<span class="token punctuation">.</span>_2 <span class="token operator">+</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
map<span class="token punctuation">.</span>map<span class="token punctuation">{</span><span class="token keyword">case</span> <span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token operator">+</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token comment">// mapValues的表达最简洁 </span>
map<span class="token punctuation">.</span>mapValues<span class="token punctuation">(</span>_ <span class="token operator">+</span> <span class="token number">100</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_5-2-flatten-flatmap" tabindex="-1"><a class="header-anchor" href="#_5-2-flatten-flatmap" aria-hidden="true">#</a> 5.2 flatten &amp; flatMap</h4><p><code>flatten</code> 的作用是把嵌套的结构展开，把结果放到一个集合中;</p><p>在 <code>flatMap</code> 中传入一个函数，该函数对每个输入都返回一个集合(而不是一个元素)， 最后把生成的多个集合&quot;拍扁&quot;成为一个集合;</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>scala<span class="token operator">&gt;</span> val lst1 <span class="token operator">=</span> List<span class="token punctuation">(</span>List<span class="token punctuation">(</span><span class="token number">1,2</span><span class="token punctuation">)</span>, List<span class="token punctuation">(</span><span class="token number">3,4</span><span class="token punctuation">))</span>
lst1: List<span class="token punctuation">[</span>List<span class="token punctuation">[</span>Int<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span>List<span class="token punctuation">(</span><span class="token number">1</span>, <span class="token number">2</span><span class="token punctuation">)</span>, List<span class="token punctuation">(</span><span class="token number">3</span>, <span class="token number">4</span><span class="token punctuation">))</span>

scala<span class="token operator">&gt;</span> lst1.flatten
res5: List<span class="token punctuation">[</span>Int<span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">1</span>, <span class="token number">2</span>, <span class="token number">3</span>, <span class="token number">4</span><span class="token punctuation">)</span>

<span class="token comment"># flatten 把一个字符串的集合展开为一个字符集合，因为字符串本身就是字符的集合 </span>
scala<span class="token operator">&gt;</span> val lst4 <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token string">&quot;Java&quot;</span>, <span class="token string">&quot;hadoop&quot;</span><span class="token punctuation">)</span>
lst4: List<span class="token punctuation">[</span>String<span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span>Java, hadoop<span class="token punctuation">)</span>

scala<span class="token operator">&gt;</span> lst4.flatten
res8: List<span class="token punctuation">[</span>Char<span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span>J, a, v, a, h, a, d, o, o, p<span class="token punctuation">)</span>

<span class="token comment"># flatten 有效的处理 Some 和 None 组成的集合。</span>
<span class="token comment"># 它可以展开Some元素形成一个新的集合，同时去掉 None元素</span>
scala<span class="token operator">&gt;</span> val x <span class="token operator">=</span> Array<span class="token punctuation">(</span>Some<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>, None, Some<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>, None<span class="token punctuation">)</span>
x: Array<span class="token punctuation">[</span>Option<span class="token punctuation">[</span>Int<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> Array<span class="token punctuation">(</span>Some<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>, None, Some<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>, None<span class="token punctuation">)</span>

<span class="token comment"># 方法很多，flatten最简单</span>
scala<span class="token operator">&gt;</span> x.flatten
res9: Array<span class="token punctuation">[</span>Int<span class="token punctuation">]</span> <span class="token operator">=</span> Array<span class="token punctuation">(</span><span class="token number">1</span>, <span class="token number">3</span><span class="token punctuation">)</span>

scala<span class="token operator">&gt;</span> x.collect<span class="token punctuation">{</span>case Some<span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> i<span class="token punctuation">}</span>
res10: Array<span class="token punctuation">[</span>Int<span class="token punctuation">]</span> <span class="token operator">=</span> Array<span class="token punctuation">(</span><span class="token number">1</span>, <span class="token number">3</span><span class="token punctuation">)</span>

scala<span class="token operator">&gt;</span> x.filter<span class="token punctuation">(</span><span class="token operator">!</span>_.isEmpty<span class="token punctuation">)</span>.map<span class="token punctuation">(</span>_.get<span class="token punctuation">)</span>
res11: Array<span class="token punctuation">[</span>Int<span class="token punctuation">]</span> <span class="token operator">=</span> Array<span class="token punctuation">(</span><span class="token number">1</span>, <span class="token number">3</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token comment">// 下面两条语句等价</span>
<span class="token keyword">val</span> lst <span class="token operator">=</span> List<span class="token punctuation">(</span>List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span>List<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// 将 lst 中每个元素乘2，最后作为一个集合返回 </span>
<span class="token comment">// 此时 flatMap = flatten + map </span>
<span class="token comment">// List(1,2,5,6,3,4)</span>
lst<span class="token punctuation">.</span>flatten<span class="token punctuation">.</span>map<span class="token punctuation">(</span>_<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">)</span>
lst<span class="token punctuation">.</span>flatMap<span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> x<span class="token punctuation">.</span>map<span class="token punctuation">(</span>_<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
lst<span class="token punctuation">.</span>flatMap<span class="token punctuation">(</span>_<span class="token punctuation">.</span>map<span class="token punctuation">(</span>_<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// 将字符串数组按空格切分，转换为单词数组</span>
<span class="token keyword">val</span> lines <span class="token operator">=</span> Array<span class="token punctuation">(</span><span class="token string">&quot;Apache Spark has an advanced DAG execution engine&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Spark offers over 80 high-level operators&quot;</span><span class="token punctuation">)</span>

<span class="token comment">// 下面两条语句效果等价</span>
<span class="token comment">// map 算子产生的结果:Array(Array(Apache, Spark, has, an, advanced, DAG, execution, engine), Array(Spark, offers, over, 80, high-level, operators))</span>
<span class="token comment">// flatten 算子产生的结果:Array(Apache, Spark, has, an, advanced, DAG, execution, engine, Spark, offers, over, 80, high-level, operators)</span>
lines<span class="token punctuation">.</span>map<span class="token punctuation">(</span>_<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>flatten
<span class="token comment">// 此时 flatMap = map + flatten</span>
lines<span class="token punctuation">.</span>flatMap<span class="token punctuation">(</span>_<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><blockquote><p>备注: <code>flatMap = flatten + map</code> 或 <code>flatMap = map + flatten</code></p></blockquote><h4 id="_5-3-collect" tabindex="-1"><a class="header-anchor" href="#_5-3-collect" aria-hidden="true">#</a> 5.3 collect</h4><p><code>collect</code> 通过执行一个并行计算(偏函数)，得到一个新的数组对象</p><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token keyword">object</span> CollectDemo <span class="token punctuation">{</span> 
  <span class="token comment">//通过下面的偏函数，把chars数组的小写a转换为大写的A </span>
  <span class="token keyword">val</span> fun<span class="token operator">:</span> PartialFunction<span class="token punctuation">[</span><span class="token builtin">Char</span><span class="token punctuation">,</span> <span class="token builtin">Char</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token char">&#39;a&#39;</span> <span class="token keyword">=&gt;</span> <span class="token char">&#39;A&#39;</span>
    <span class="token keyword">case</span> x <span class="token keyword">=&gt;</span> x 
  <span class="token punctuation">}</span>
  
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> chars <span class="token operator">=</span> Array<span class="token punctuation">(</span><span class="token char">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;b&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;c&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">val</span> newchars <span class="token operator">=</span> chars<span class="token punctuation">.</span>collect<span class="token punctuation">(</span>fun<span class="token punctuation">)</span>
    println<span class="token punctuation">(</span><span class="token string">&quot;newchars:&quot;</span> <span class="token operator">+</span> newchars<span class="token punctuation">.</span>mkString<span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="_5-4-reduce" tabindex="-1"><a class="header-anchor" href="#_5-4-reduce" aria-hidden="true">#</a> 5.4 reduce</h4><p><code>reduce</code> 可以对集合当中的元素进行归约操作;</p><p>还有 <code>reduceLeft</code> 和 <code>reduceRight</code>。<code>reduceLeft</code> 从左向右归约，<code>reduceRight</code> 从右向左归约;</p><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token keyword">val</span> lst1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span> to <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span>toList
lst1<span class="token punctuation">.</span>reduce<span class="token punctuation">(</span>_<span class="token operator">+</span>_<span class="token punctuation">)</span>

<span class="token comment">// 为什么这里能出现两个占位符? </span>
lst1<span class="token punctuation">.</span>reduce<span class="token punctuation">(</span>_<span class="token operator">+</span>_<span class="token punctuation">)</span>

<span class="token comment">// 我们说过一个占位符代表一个参数，那么两个占位符就代表两个参数。根据这个思路改写等价的语句 </span>
<span class="token comment">// x类似于buffer，缓存每次操作的数据; y每次操作传递新的集合元素</span>
lst1<span class="token punctuation">.</span>reduce<span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> x <span class="token operator">+</span> y<span class="token punctuation">)</span>

<span class="token comment">// 利用reduce操作，查找 lst1 中的最大值 </span>
lst1<span class="token punctuation">.</span>reduce<span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token operator">&gt;</span>y<span class="token punctuation">)</span> x <span class="token keyword">else</span> y<span class="token punctuation">)</span>

<span class="token comment">// reduceLeft、reduceRight </span>
lst1<span class="token punctuation">.</span>reduceLeft<span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token operator">&gt;</span>y<span class="token punctuation">)</span> x <span class="token keyword">else</span> y<span class="token punctuation">)</span> 
lst1<span class="token punctuation">.</span>reduceRight<span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token operator">&gt;</span>y<span class="token punctuation">)</span> x <span class="token keyword">else</span> y<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="_5-5-sorted-sortwith-sortby" tabindex="-1"><a class="header-anchor" href="#_5-5-sorted-sortwith-sortby" aria-hidden="true">#</a> 5.5 sorted sortwith &amp; sortby</h4><p>Scala中对于集合的排序有三种方法: <code>sorted</code>、<code>sortBy</code>、<code>sortWith</code></p><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token keyword">object</span> SortDemo <span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> list <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span>
    <span class="token comment">//sorted方法对一个集合进行自然排序</span>
    <span class="token comment">//sorted源码:def sorted[B &gt;: A](implicit ord: Ordering[B]): Repr </span>
    <span class="token comment">// 源码中有两点值得注意的地方:</span>
    <span class="token comment">// 1.sorted方法中有个隐式参数ord: Ordering。</span>
    <span class="token comment">// 2.sorted方法真正排序的逻辑是调用的java.util.Arrays.sort</span>
    <span class="token keyword">val</span> numSort<span class="token operator">:</span> List<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> list<span class="token punctuation">.</span>sorted
    println<span class="token punctuation">(</span>numSort<span class="token punctuation">)</span>
    <span class="token comment">//sortBy源码:def sortBy[B](f: A =&gt; B)(implicit ord: Ordering[B]): Repr = sorted(ord on f) </span>
    <span class="token comment">// sortBy最后调用的sorted方法 </span>
    println<span class="token punctuation">(</span>list<span class="token punctuation">.</span>sortBy<span class="token punctuation">(</span>x <span class="token keyword">=&gt;</span> x<span class="token punctuation">)</span><span class="token punctuation">.</span>reverse<span class="token punctuation">)</span>
    <span class="token comment">//sortWith源码:def sortWith(lt: (A, A) =&gt; Boolean): Repr = sorted(Ordering fromLessThan lt)</span>
    print<span class="token punctuation">(</span>list<span class="token punctuation">.</span>sortWith<span class="token punctuation">(</span>_ <span class="token operator">&gt;</span> _<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="第6节-与java集合的转换" tabindex="-1"><a class="header-anchor" href="#第6节-与java集合的转换" aria-hidden="true">#</a> 第6节 与Java集合的转换</h3><p>使用 <code>scala.collection.JavaConverters</code> 与Java集合交互。</p><p>它有一系列的隐式转换，添加了 <code>asJava</code> 和 <code>asScala</code> 的转换方法。</p><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token keyword">import</span> <span class="token namespace">scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span></span>JavaConverters<span class="token punctuation">.</span>_
<span class="token keyword">val</span> list<span class="token operator">:</span> Java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>List<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span>asJava
<span class="token keyword">val</span> buffer<span class="token operator">:</span> scala<span class="token punctuation">.</span>collection<span class="token punctuation">.</span>mutable<span class="token punctuation">.</span>Buffer<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span> list<span class="token punctuation">.</span>asScala
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="第十部分-隐式机制" tabindex="-1"><a class="header-anchor" href="#第十部分-隐式机制" aria-hidden="true">#</a> 第十部分 隐式机制</h2><p>主要内容:</p><ol><li>隐式转换</li><li>隐式转换函数</li><li>隐式参数和隐式值</li></ol><h3 id="第1节-隐式转换" tabindex="-1"><a class="header-anchor" href="#第1节-隐式转换" aria-hidden="true">#</a> 第1节 隐式转换</h3><p>隐式转换和隐式参数是Scala中两个非常强大的功能，利用隐式转换和隐式参数，可以提供类库， 对类库的使用者隐匿掉具体的细节。</p><p>Scala会根据隐式转换函数的签名，在程序中使用到隐式转换函数接收的参数类型定义的对象时， 会自动将其传入隐式转换函数，转换为另外一种类型的对象并返回，这就是&quot;隐式转换&quot;。</p><ul><li>首先得有一个隐式转换函数</li><li>使用到隐式转换函数接收的参数类型定义的对象</li><li>Scala自动传入隐式转换函数，并完成对象的类型转换</li></ul><p>隐式转换需要使用 <code>implicit</code> 关键字。</p><p>使用Scala的隐式转换有一定的限制:</p><ul><li><code>implicit</code> 关键字只能用来修饰方法、变量、参数</li><li>隐式转换的函数只在当前范围内才有效。如果隐式转换不在当前范围内定义，那么必须通过 <code>import</code> 语句将其导入</li></ul><blockquote><p>Spark源码中有大量的隐式转换和隐式参数，因此必须掌握隐式机制。</p></blockquote><h3 id="第2节-隐式转换函数" tabindex="-1"><a class="header-anchor" href="#第2节-隐式转换函数" aria-hidden="true">#</a> 第2节 隐式转换函数</h3><p>Scala的隐式转换最核心的就是定义隐式转换函数，即 <code>implicit conversion function</code>。</p><p>定义的隐式转换函数，只要在编写的程序内引入，就会被Scala自动使用。</p><p>隐式转换函数由Scala自动调用，通常建议将隐式转换函数的名称命名为 <code>one2one</code> 的形式。</p><p>示例1: 下面代码中定义了一个隐式函数</p><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token keyword">class</span> Num<span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">class</span> RichNum<span class="token punctuation">(</span>num<span class="token operator">:</span> Num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">def</span> rich<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    println<span class="token punctuation">(</span><span class="token string">&quot;Hello implicit!&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">object</span> ImplicitDemo <span class="token punctuation">{</span>

  <span class="token comment">// 定义一个隐式转换函数</span>
  <span class="token comment">// 命名要符合 one2one 的格式</span>
  <span class="token keyword">implicit</span> <span class="token keyword">def</span> num2RichNum<span class="token punctuation">(</span>num<span class="token operator">:</span> Num<span class="token punctuation">)</span><span class="token operator">:</span> RichNum <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">new</span> RichNum<span class="token punctuation">(</span>num<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> num <span class="token operator">=</span> <span class="token keyword">new</span> Num
    <span class="token comment">// num 类型的对象没有 rich() 方法</span>
    <span class="token comment">// 但是 Scala 编译器会查找当前范围内是否有隐式转换函数</span>
    <span class="token comment">// 如果有就将其转换成 RichNum 类型，这样就可以访问 rich() 方法了</span>
    num<span class="token punctuation">.</span>rich<span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><blockquote><p>个人理解：所谓隐式转换就类似于 Java 中的自动拆箱装箱</p></blockquote><p>示例2: 导入隐式函数</p><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token keyword">package</span> <span class="token namespace">test<span class="token punctuation">.</span>implicitdemo</span>
<span class="token keyword">object</span> Int2String <span class="token punctuation">{</span>
  <span class="token keyword">implicit</span> <span class="token keyword">def</span> int2String<span class="token punctuation">(</span>num<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">String</span> <span class="token operator">=</span> num<span class="token punctuation">.</span>toString
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>下面代码中调用了 <code>String</code> 类型的 <code>length</code> 方法，Int类型本身没有length方法， 但是在可用范围内定义了可以把 <code>Int</code> 转换为 <code>String</code> 的隐式函数 <code>int2String</code>， 因此函数编译通过并运行出正确的结果。</p><blockquote><p>此示例中隐式函数的定义必须定义在使用之前，否则编译报错。</p></blockquote><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token keyword">import</span> <span class="token namespace">test<span class="token punctuation">.</span>implicitdemo<span class="token punctuation">.</span></span>Int2String<span class="token punctuation">.</span>_
<span class="token keyword">object</span> ImplicitTest <span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    println<span class="token punctuation">(</span><span class="token number">20.l</span>ength<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><div class="highlight-line"> </div><br><br><div class="highlight-line"> </div><br><br></div><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>通过 <code>import test.implicitdemo.Int2String._</code>，将 <code>Int2StringTest</code> 内部的成员 导入到相应的作用域内，否则无法调用隐式函数。</p><p>要实现隐式转换，只要在程序可见的范围内定义隐式转换函数即可，Scala会自动使用隐式转换函数。</p><p>隐式转换函数与普通函数的语法区别就是，要以 <code>implicit</code> 开头，而且最好要<strong>定义函数返回类型</strong>。</p><p>隐式转换案例: 特殊售票窗口(只接受特殊人群买票，比如学生、老人等)，其他人不能在特殊售票窗口买票。</p><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token comment">// var 修饰的主构造函数变量可以修改，拥有 getter 和 setter 方法</span>
<span class="token keyword">class</span> SpecialPerson<span class="token punctuation">(</span><span class="token keyword">var</span> name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> Older<span class="token punctuation">(</span><span class="token keyword">var</span> name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> Student<span class="token punctuation">(</span><span class="token keyword">var</span> name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> Worker<span class="token punctuation">(</span><span class="token keyword">var</span> name<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span>

<span class="token keyword">object</span> ImplicitDemoTwo <span class="token punctuation">{</span>

  <span class="token keyword">def</span> buySpecialTickWindow<span class="token punctuation">(</span>person<span class="token operator">:</span> SpecialPerson<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>person <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      println<span class="token punctuation">(</span>person<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot; got a special tick&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      println<span class="token punctuation">(</span><span class="token string">&quot;No way!&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 定义隐式转换函数</span>
  <span class="token keyword">implicit</span> <span class="token keyword">def</span> any2Special<span class="token punctuation">(</span>any<span class="token operator">:</span> <span class="token builtin">Any</span><span class="token punctuation">)</span><span class="token operator">:</span> SpecialPerson <span class="token operator">=</span> <span class="token punctuation">{</span>
    any <span class="token keyword">match</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> any<span class="token operator">:</span> Older <span class="token keyword">=&gt;</span> <span class="token keyword">new</span> SpecialPerson<span class="token punctuation">(</span>any<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
      <span class="token keyword">case</span> any<span class="token operator">:</span> Student <span class="token keyword">=&gt;</span> <span class="token keyword">new</span> SpecialPerson<span class="token punctuation">(</span>any<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
      <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> student <span class="token operator">=</span> <span class="token keyword">new</span> Student<span class="token punctuation">(</span><span class="token string">&quot;Jack&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">val</span> older <span class="token operator">=</span> <span class="token keyword">new</span> Older<span class="token punctuation">(</span><span class="token string">&quot;Tom&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">val</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> Worker<span class="token punctuation">(</span><span class="token string">&quot;John&quot;</span><span class="token punctuation">)</span>

    buySpecialTickWindow<span class="token punctuation">(</span>student<span class="token punctuation">)</span> <span class="token comment">// Jack got a special tick</span>
    buySpecialTickWindow<span class="token punctuation">(</span>older<span class="token punctuation">)</span> <span class="token comment">// Tom got a special tick</span>
    buySpecialTickWindow<span class="token punctuation">(</span>worker<span class="token punctuation">)</span> <span class="token comment">// No way!</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><h3 id="第3节-隐式参数和隐式值" tabindex="-1"><a class="header-anchor" href="#第3节-隐式参数和隐式值" aria-hidden="true">#</a> 第3节 隐式参数和隐式值</h3><p>在函数定义的时候，支持在最后一组参数中使用 <code>implicit</code>，表明这是一组隐式参数。 在调用该函数的时候，可以不用传递隐式参数，而编译器会自动寻找一个 <code>implicit</code> 标记过的合适的值作为参数。</p><p>Scala编译器会在两个范围内查找:</p><ul><li>当前作用域内可见的 <code>val</code> 或 <code>var</code> 定义隐式变量</li><li>隐式参数类型的伴生对象内的隐式值</li></ul><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token keyword">object</span> Doubly <span class="token punctuation">{</span>
  <span class="token comment">// 在print函数中定义一个隐式参数fmt</span>
  <span class="token keyword">def</span> print<span class="token punctuation">(</span>num<span class="token operator">:</span> <span class="token builtin">Double</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">implicit</span> fmt<span class="token operator">:</span> <span class="token builtin">String</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    println<span class="token punctuation">(</span>fmt format <span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 此时调用print函数需要为第二个隐式参数赋值 </span>
    print<span class="token punctuation">(</span><span class="token number">3.12</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">&quot;%.1f&quot;</span><span class="token punctuation">)</span>
    
    <span class="token comment">// 定义一个隐式变量</span>
    <span class="token keyword">implicit</span> <span class="token keyword">val</span> printFmt<span class="token operator">=</span><span class="token string">&quot;%.3f&quot;</span> 
    <span class="token comment">// 当调用print函数时没有给第二个隐式参数赋值， </span>
    <span class="token comment">// 那么Scala会在当前作用域内寻找可见的val或var定义的隐式变量，一旦找到就会应用 </span>
    print<span class="token punctuation">(</span><span class="token number">3.12</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><blockquote><p>关于隐式机制，自己开发中较少这样写；但是 Spark 源码中有大量的应用，要求理解并能看懂 Spark 源码即可。</p></blockquote><h2 id="第十一部分-扩展部分" tabindex="-1"><a class="header-anchor" href="#第十一部分-扩展部分" aria-hidden="true">#</a> 第十一部分 扩展部分</h2><h3 id="第1节-类型参数" tabindex="-1"><a class="header-anchor" href="#第1节-类型参数" aria-hidden="true">#</a> 第1节 类型参数</h3><p>Scala的类型参数与Java的泛型是一样的，可以在集合、类、函数中定义类型参数，从而保证程序更好的健壮性。</p><h4 id="_1-1-泛型类" tabindex="-1"><a class="header-anchor" href="#_1-1-泛型类" aria-hidden="true">#</a> 1.1 泛型类</h4><p>泛型类，顾名思义，其实就是在类的声明中定义一些泛型类型，然后在类内部的字段或者方法，就可以 使用这些泛型类型。</p><p>使用泛型类，通常是需要对类中的某些成员，比如某些字段和方法中的参数或变量进行统一的类型限制， 这样可以保证程序更好的健壮性和稳定性。</p><p>如果不使用泛型进行统一的类型限制，那么在后期程序运行过程中难免会出现问题，比如传入了不希望 的类型导致程序出问题。</p><p>在使用泛型类的时候，比如创建泛型类的对象，只需将类型参数替换为实际的类型即可。</p><p>Scala自动推断泛型类型特性: 直接给使用泛型类型的字段赋值时，Scala会自动进行类型推断。</p><p>泛型类的定义如下:</p><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token comment">// 定义一个泛型类</span>
<span class="token keyword">class</span> Stack<span class="token punctuation">[</span>T1<span class="token punctuation">,</span> T2<span class="token punctuation">,</span> T3<span class="token punctuation">]</span><span class="token punctuation">(</span>name<span class="token operator">:</span> T1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> age<span class="token operator">:</span> T2 <span class="token operator">=</span> _
  <span class="token keyword">var</span> address<span class="token operator">:</span> T3 <span class="token operator">=</span> _

  <span class="token keyword">def</span> getInfo<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">name</span></span><span class="token string">,</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">age</span></span><span class="token string">,</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">address</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>使用上述的泛型类，只需要使用具体的类型代替类型参数即可。</p><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token keyword">object</span> GenericityDemo <span class="token punctuation">{</span>
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 创建泛型类对象</span>
    <span class="token keyword">val</span> stack <span class="token operator">=</span> <span class="token keyword">new</span> Stack<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">,</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> <span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token string">&quot;john&quot;</span><span class="token punctuation">)</span>
    stack<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">20</span>
    stack<span class="token punctuation">.</span>address <span class="token operator">=</span> <span class="token string">&quot;SF&quot;</span>
    stack<span class="token punctuation">.</span>getInfo<span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="_1-2-泛型函数" tabindex="-1"><a class="header-anchor" href="#_1-2-泛型函数" aria-hidden="true">#</a> 1.2 泛型函数</h4><p>泛型函数，与泛型类类似，可以给某个函数在声明时指定泛型类型，然后在函数体内，多个变量或者返回值之间， 就可以使用泛型类型进行声明，从而对某个特殊的变量，或者多个变量，进行强制性的类型限制。</p><p>与泛型类一样，你可以通过给使用了泛型类型的变量传递值来让 Scala 自动推断泛型的实际类型， 也可以在调用函数时，手动指定泛型类型。</p><p>案例: 卡片售卖机，可以指定卡片的内容，内容可以是 <code>String</code> 类型或 <code>Int</code> 类型</p><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token keyword">object</span> GenericityFunction <span class="token punctuation">{</span>
  <span class="token keyword">def</span> getCard<span class="token punctuation">[</span>T<span class="token punctuation">]</span><span class="token punctuation">(</span>content<span class="token operator">:</span> T<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    content <span class="token keyword">match</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> content<span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token keyword">=&gt;</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;card:</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">content</span></span><span class="token string"> is Int &quot;</span></span>
      <span class="token keyword">case</span> content<span class="token operator">:</span> <span class="token builtin">String</span> <span class="token keyword">=&gt;</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;card:</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">content</span></span><span class="token string"> is String&quot;</span></span>
      <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> <span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;card:</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">content</span></span><span class="token string">&quot;</span></span>
    <span class="token punctuation">}</span> 
  <span class="token punctuation">}</span>
  
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    println<span class="token punctuation">(</span>getCard<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    println<span class="token punctuation">(</span>getCard<span class="token punctuation">(</span><span class="token number">1001</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="_1-3-协变和逆变" tabindex="-1"><a class="header-anchor" href="#_1-3-协变和逆变" aria-hidden="true">#</a> 1.3 协变和逆变</h4><p>Scala的协变和逆变是非常有特色的，完全解决了Java中的泛型的一大缺憾!</p><p>举例来说，Java中，如果有 <code>Professional</code> 是 <code>Master</code> 的子类，那么 <code>Card[Professionnal]</code> 是不是 <code>Card[Master]</code> 的子类? 答案是:不是。因此对于开发程序造成了很多的麻烦。</p><p>而Scala中，只要灵活使用协变和逆变，就可以解决Java泛型的问题。</p><p>协变定义形式如: <code>trait List[+T] {}</code></p><p>当类型S是类型A的子类型时，则 <code>List[S]</code> 也可以认为是 <code>List[A}</code> 的子类型， 即 <code>List[S]</code> 可以泛化为 <code>List[A]</code>，也就是被参数化，类型的泛化方向与参数类型的方向是一致的， 所以称为协变(covariance)。</p><p>逆变定义形式如: <code>trait List[-T] {}</code> 当类型S是类型A的子类型，则 <code>Queue[A]</code> 反过来 可以认为是 <code>Queue[S}</code> 的子类型，也就是被参数化类型的泛化方向与参数类型的方向是相反的， 所以称为逆变(contravariance)。</p><p>小结: 如果A是B的子类，那么在协变中，<code>List[A]</code> 就是 <code>List[B]</code> 的子类; 在逆变中，<code>List[A]</code> 就是 <code>List[B]</code> 的父类。</p><blockquote><p>重要：<code>[+T]</code> 协变表示 <code>T</code> 及其子类；<code>[-T]</code> 逆变便是 <code>T</code> 及其父类。</p></blockquote><p>协变案例: 只有大师以及大师级别以下的名片都可以进入会场</p><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token comment">// 大师</span>
<span class="token keyword">class</span> Master

<span class="token comment">// 专家 (子)</span>
<span class="token keyword">class</span> Professor <span class="token keyword">extends</span> Master

<span class="token comment">// 讲师</span>
<span class="token keyword">class</span> Teacher

<span class="token comment">// 定义协变</span>
<span class="token keyword">class</span> Card<span class="token punctuation">[</span><span class="token operator">+</span>T<span class="token punctuation">]</span>

<span class="token keyword">object</span> ConversionDemo <span class="token punctuation">{</span>

  <span class="token keyword">def</span> enterMeet<span class="token punctuation">(</span>card<span class="token operator">:</span> Card<span class="token punctuation">[</span>Master<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token comment">// 只有 Card[Master] 及其子类，才能进入</span>
    println<span class="token punctuation">(</span><span class="token string">&quot;Welcome!&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> master <span class="token operator">=</span> <span class="token keyword">new</span> Card<span class="token punctuation">[</span>Master<span class="token punctuation">]</span>
    <span class="token keyword">val</span> pro <span class="token operator">=</span> <span class="token keyword">new</span> Card<span class="token punctuation">[</span>Professor<span class="token punctuation">]</span>
    <span class="token keyword">val</span> teach <span class="token operator">=</span> <span class="token keyword">new</span> Card<span class="token punctuation">[</span>Teacher<span class="token punctuation">]</span>

    enterMeet<span class="token punctuation">(</span>master<span class="token punctuation">)</span>
    enterMeet<span class="token punctuation">(</span>pro<span class="token punctuation">)</span>
    <span class="token comment">// enterMeet(teach) //此处就会报错 </span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h3 id="第2节-akka" tabindex="-1"><a class="header-anchor" href="#第2节-akka" aria-hidden="true">#</a> 第2节 Akka</h3><p>Akka是Java虚拟机平台上构建高并发、分布式和容错应用的<strong>工具包</strong>和运行时。</p><p>Akka用Scala语言编写，同时提供了Scala和Java的开发接口。</p><p>Akka处理并发的方法基于Actor模型，Actor之间通信的唯一机制就是消息传递。</p><h4 id="actor" tabindex="-1"><a class="header-anchor" href="#actor" aria-hidden="true">#</a> Actor</h4><p>Scala的Actor类似于Java中的多线程编程。</p><p>但是不同的是，Scala的Actor提供的模型与多线程有所不同。Scala的Actor尽可能地避免锁和共享状态， 从而避免了多线程并发时出现资源争用的情况，进而提升多线程编程的性能。</p><p>Actor可以看作是一个个独立的实体，Actor之间可以通过交换消息的方式进行通信，每个Actor都有自己的 收件箱(Mailbox)。</p><p>一个Actor收到其他Actor的信息后，根据需要作出各种相应。消息的类型可以是任意的，消息的内容也可以是任意的。</p><p><img src="/doc/assets/README-1648089543848.f7793d0e.png" alt="Actor模型"></p><h4 id="actorsystem" tabindex="-1"><a class="header-anchor" href="#actorsystem" aria-hidden="true">#</a> ActorSystem</h4><p>在Akka中，<code>ActorSystem</code> 是一个重量级的结构。</p><p>它需要分配多个线程，所以在实际应用中，<code>ActorSystem</code> 通常是一个单例对象，我们可以使用这个 <code>ActorSystem</code>创建很多Actor。</p><p>Akka案例: 创建一个maven项目，在项目的pom文件中增加如下依赖:</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoding</span><span class="token punctuation">&gt;</span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoding</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scala.version</span><span class="token punctuation">&gt;</span></span>2.12.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scala.version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scala.compat.version</span><span class="token punctuation">&gt;</span></span>2.11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scala.compat.version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>akka.version</span><span class="token punctuation">&gt;</span></span>2.4.17<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>akka.version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 添加akka的actor依赖 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.scala-lang<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>scala-actors<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.11.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- https://mvnrepository.com/artifact/com.typesafe.akka/akka-actor --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.typesafe.akka<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>akka-actor_2.11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.3.16<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 添加akka的actor依赖 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.typesafe.akka<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>akka-actor_${scala.compat.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${akka.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 多进程之间的Actor通信 --&gt;</span>
    <span class="token comment">&lt;!-- https://mvnrepository.com/artifact/com.typesafe.akka/akka-remote --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.typesafe.akka<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>akka-remote_${scala.compat.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${akka.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token keyword">import</span> <span class="token namespace">akka<span class="token punctuation">.</span>actor<span class="token punctuation">.</span></span><span class="token punctuation">{</span>Actor<span class="token punctuation">,</span> ActorSystem<span class="token punctuation">,</span> Props<span class="token punctuation">}</span>
<span class="token keyword">import</span> <span class="token namespace">scala<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>StdIn

<span class="token keyword">class</span> HelloActor <span class="token keyword">extends</span> Actor <span class="token punctuation">{</span>
  <span class="token comment">// 接收消息并处理</span>
  <span class="token keyword">override</span> <span class="token keyword">def</span> receive<span class="token operator">:</span> Receive <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&quot;吃了吗&quot;</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;吃过了&quot;</span><span class="token punctuation">)</span> 
    <span class="token keyword">case</span> <span class="token string">&quot;吃的啥&quot;</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;北京卤煮&quot;</span><span class="token punctuation">)</span> 
    <span class="token keyword">case</span> <span class="token string">&quot;拜拜&quot;</span> <span class="token keyword">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">//关闭自己 </span>
      context<span class="token punctuation">.</span>stop<span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">)</span> 
      <span class="token comment">// 关闭ActorSystem </span>
      context<span class="token punctuation">.</span>system<span class="token punctuation">.</span>terminate<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">object</span> HelloActor <span class="token punctuation">{</span>
  <span class="token comment">//创建线程池对象MyFactor，myFactory为线程池的名称</span>
  <span class="token keyword">private</span> <span class="token keyword">val</span> MyFactory <span class="token operator">=</span> ActorSystem<span class="token punctuation">(</span><span class="token string">&quot;myFactory&quot;</span><span class="token punctuation">)</span>
  
  <span class="token comment">// 通过MyFactory.actorOf方法来创建一个actor;</span>
  <span class="token comment">// 第一个参数传递自定义的HelloActor类，第二个参数是给actor起个名字</span>
  <span class="token keyword">private</span> <span class="token keyword">val</span> helloActorRef <span class="token operator">=</span> MyFactory<span class="token punctuation">.</span>actorOf<span class="token punctuation">(</span>Props<span class="token punctuation">[</span>HelloActor<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;helloActor&quot;</span><span class="token punctuation">)</span>
  
  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> flag <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      print<span class="token punctuation">(</span><span class="token string">&quot;请输入想发送的消息:&quot;</span><span class="token punctuation">)</span>
      <span class="token keyword">val</span> consoleLine<span class="token operator">:</span> <span class="token builtin">String</span> <span class="token operator">=</span> StdIn<span class="token punctuation">.</span>readLine<span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token comment">// 通过!来发送消息</span>
      helloActorRef <span class="token operator">!</span> consoleLine
      <span class="token keyword">if</span> <span class="token punctuation">(</span>consoleLine<span class="token punctuation">.</span>equals<span class="token punctuation">(</span><span class="token string">&quot;拜拜&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        flag <span class="token operator">=</span> <span class="token boolean">false</span>
        println<span class="token punctuation">(</span><span class="token string">&quot;程序即将结束!&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 休眠100毫秒</span>
      Thread<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><blockquote><p>下面的案例 ARM 架构的 macOS 启动会报错</p></blockquote><div class="language-scala ext-scala line-numbers-mode"><pre class="language-scala"><code><span class="token keyword">class</span> HelloActor <span class="token keyword">extends</span> Actor <span class="token punctuation">{</span>

  <span class="token comment">// 接收消息并进行处理</span>
  <span class="token keyword">override</span> <span class="token keyword">def</span> receive<span class="token operator">:</span> Receive <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&quot;ate?&quot;</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;ate&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token string">&quot;what?&quot;</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string">&quot;cake&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token string">&quot;bye&quot;</span> <span class="token keyword">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 关闭自己</span>
      context<span class="token punctuation">.</span>stop<span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">)</span>
      <span class="token comment">// 关闭 ActorSystem</span>
      context<span class="token punctuation">.</span>system<span class="token punctuation">.</span>terminate<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">object</span> HelloActor <span class="token punctuation">{</span>

  <span class="token comment">// 通过 ActorSystem 创建线程池对象 myFactory</span>
  <span class="token keyword">private</span> <span class="token keyword">val</span> myFactory <span class="token operator">=</span> ActorSystem<span class="token punctuation">(</span><span class="token string">&quot;myFactory&quot;</span><span class="token punctuation">)</span>
  <span class="token comment">// 通过 myFactory.actorOf 创建一个 Actor</span>
  <span class="token keyword">private</span> <span class="token keyword">val</span> helloActorRef <span class="token operator">=</span> myFactory<span class="token punctuation">.</span>actorOf<span class="token punctuation">(</span>Props<span class="token punctuation">[</span>HelloActor<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;helloActor&quot;</span><span class="token punctuation">)</span>

  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> flag <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      print<span class="token punctuation">(</span><span class="token string">&quot;Input message: &quot;</span><span class="token punctuation">)</span>
      <span class="token keyword">val</span> consoleLine <span class="token operator">=</span> StdIn<span class="token punctuation">.</span>readLine<span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token comment">// ! 的作用就是发送消息</span>
      helloActorRef <span class="token operator">!</span> consoleLine
      <span class="token keyword">if</span> <span class="token punctuation">(</span>consoleLine<span class="token punctuation">.</span>equals<span class="token punctuation">(</span><span class="token string">&quot;bye&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        flag <span class="token operator">=</span> <span class="token boolean">false</span>
        println<span class="token punctuation">(</span><span class="token string">&quot;Program terminating ...&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 让程序休眠 100 ms</span>
      Thread<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/faustine8/doc/edit/main/docs/bigdata/scala/03tools/README.md" rel="noopener noreferrer" target="_blank" aria-label="在 GitHub 上编辑"><!--[--><!--]--> 在 GitHub 上编辑 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">更新时间: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: faustine923@icloud.com">mujunlin</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/doc/assets/app.40df414d.js" defer></script>
  </body>
</html>
