import{_ as p,r as e,o,a as c,b as n,d as l,F as u,c as s,e as a}from"./app.40df414d.js";var r="/doc/assets/SpringMVC-1619705000827.57da7edb.png",i="/doc/assets/SpringMVC-1619874407813.7323499b.png";const k={},m=s(`<h1 id="spring-mvc" tabindex="-1"><a class="header-anchor" href="#spring-mvc" aria-hidden="true">#</a> Spring MVC</h1><blockquote><p>Spring MVC \u662F Spring \u7ED9\u6211\u4EEC\u63D0\u4F9B\u7684\u4E00\u4E2A\u7528\u4E8E\u7B80\u5316 Web \u5F00\u53D1\u7684\u6846\u67B6\u3002</p></blockquote><h2 id="\u7B2C\u4E00\u90E8\u5206-spring-mvc-\u57FA\u7840" tabindex="-1"><a class="header-anchor" href="#\u7B2C\u4E00\u90E8\u5206-spring-mvc-\u57FA\u7840" aria-hidden="true">#</a> \u7B2C\u4E00\u90E8\u5206 Spring MVC \u57FA\u7840</h2><h3 id="\u7B2C-1-\u8282-spring-mvc-\u7B80\u4ECB" tabindex="-1"><a class="header-anchor" href="#\u7B2C-1-\u8282-spring-mvc-\u7B80\u4ECB" aria-hidden="true">#</a> \u7B2C 1 \u8282 Spring MVC \u7B80\u4ECB</h3><h4 id="_1-1-mvc-\u4F53\u7CFB\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#_1-1-mvc-\u4F53\u7CFB\u7ED3\u6784" aria-hidden="true">#</a> 1.1 MVC \u4F53\u7CFB\u7ED3\u6784</h4><p><strong>\u4E09\u5C42\u67B6\u6784</strong></p><p>\u5728 JavaEE \u5F00\u53D1\u4E2D\uFF0C\u51E0\u4E4E\u5168\u90FD\u662F\u57FA\u4E8E B/S \u67B6\u6784\u7684\u5F00\u53D1\u3002\u90A3\u4E48\u5728 B/S \u67B6\u6784\u4E2D\uFF0C\u7CFB\u7EDF\u6807\u51C6\u7684\u4E09\u5C42\u67B6\u6784\u5305\u62EC: \u8868\u73B0\u5C42\u3001\u4E1A\u52A1\u5C42\u3001\u6301\u4E45\u5C42\u3002\u4E09\u5C42\u67B6\u6784\u5728\u6211\u4EEC\u7684\u5B9E\u9645\u5F00\u53D1\u4E2D\u4F7F\u7528\u7684\u975E\u5E38\u591A\uFF0C\u6240\u4EE5\u6211\u4EEC\u7684\u6848\u4F8B\u4E5F\u90FD\u662F\u57FA\u4E8E\u4E09\u5C42\u67B6\u6784\u8BBE\u8BA1\u7684\u3002</p><p>\u4E09\u5C42\u67B6\u6784\u4E2D\uFF0C\u6BCF\u4E00\u5C42\u5404\u53F8\u5176\u804C\uFF0C\u63A5\u4E0B\u6765\u6211\u4EEC\u5C31\u8BF4\u8BF4\u6BCF\u5C42\u90FD\u8D1F\u8D23\u54EA\u4E9B\u65B9\u9762:</p><ul><li>\u8868\u73B0\u5C42\uFF1A\u5305\u62EC\u5C55\u793A\u5C42\u548C\u63A7\u5236\u5C42:\u63A7\u5236\u5C42\u8D1F\u8D23\u63A5\u6536\u8BF7\u6C42\uFF0C\u5C55\u793A\u5C42\u8D1F\u8D23\u7ED3\u679C\u7684\u5C55\u793A\u3002\u8868\u73B0\u5C42\u4F9D\u8D56\u4E1A\u52A1\u5C42\uFF0C\u63A5\u6536\u5230\u5BA2\u6237\u7AEF\u8BF7\u6C42\u4E00\u822C\u4F1A\u8C03\u7528\u4E1A\u52A1\u5C42\u8FDB\u884C\u4E1A\u52A1\u5904\u7406\uFF0C\u5E76\u5C06\u5904\u7406\u7ED3\u679C\u54CD\u5E94\u7ED9\u5BA2\u6237\u7AEF\u3002</li><li>\u4E1A\u52A1\u5C42\uFF1A\u8D1F\u8D23\u4E1A\u52A1\u903B\u8F91\u5904\u7406\uFF0C\u548C\u6211\u4EEC\u5F00\u53D1\u9879\u76EE\u7684\u9700\u6C42\u606F\u606F\u76F8\u5173\u3002web \u5C42\u4F9D\u8D56\u4E1A\u52A1\u5C42\uFF0C\u4F46\u662F\u4E1A\u52A1\u5C42\u4E0D\u4F9D\u8D56 web \u5C42\u3002\u4E1A\u52A1\u5C42\u5728\u4E1A\u52A1\u5904\u7406\u65F6\u53EF\u80FD\u4F1A\u4F9D\u8D56\u6301\u4E45\u5C42\uFF0C\u5982\u679C\u8981\u5BF9\u6570\u636E\u6301\u4E45\u5316\u9700\u8981\u4FDD\u8BC1\u4E8B\u52A1\u4E00\u81F4\u6027\u3002</li><li>\u6301\u4E45\u5C42\uFF1A\u8D1F\u8D23\u6570\u636E\u6301\u4E45\u5316\uFF0C\u5305\u62EC\u6570\u636E\u5C42(\u5373\u6570\u636E\u5E93)\u548C\u6570\u636E\u8BBF\u95EE\u5C42\uFF0C\u6570\u636E\u5E93\u662F\u5BF9\u6570\u636E\u8FDB\u884C\u6301\u4E45\u5316\u7684\u8F7D\u4F53\uFF0C\u6570\u636E\u8BBF\u95EE\u5C42\u662F\u4E1A\u52A1\u5C42\u548C\u6570\u636E\u5C42\u4EA4\u4E92\u7684\u63A5\u53E3\uFF0C\u4E1A\u52A1\u5C42\u9700\u8981\u901A\u8FC7\u6570\u636E\u8BBF\u95EE\u5C42\u5C06\u6570\u636E\u6301\u4E45\u5316\u5230\u6570\u636E\u5E93\u4E2D\u3002\u901A\u4FD7\u7684\u8BB2\uFF0C\u6301\u4E45\u5C42\u5C31\u662F\u548C\u6570\u636E\u5E93\u4EA4\u4E92\uFF0C\u5BF9\u6570\u636E\u5E93\u8868\u8FDB\u884C\u589E\u5220\u6539\u67E5\u7684\u3002</li></ul><p><strong>MVC\u8BBE\u8BA1\u6A21\u5F0F</strong></p><p>MVC \u5168\u540D\u662F Model View Controller\uFF0C\u662F\u6A21\u578B(model)-\u89C6\u56FE(view)-\u63A7\u5236\u5668(controller) \u7684\u7F29\u5199\uFF0C \u662F\u4E00\u79CD\u7528\u4E8E\u8BBE\u8BA1\u521B\u5EFA Web \u5E94\u7528\u7A0B\u5E8F\u8868\u73B0\u5C42\u7684\u6A21\u5F0F\u3002</p><p>MVC \u4E2D\u6BCF\u4E2A\u90E8\u5206\u5404\u53F8\u5176\u804C:</p><ul><li>Model(\u6A21\u578B):\u6A21\u578B\u5305\u542B\u4E1A\u52A1\u6A21\u578B\u548C\u6570\u636E\u6A21\u578B\uFF0C\u6570\u636E\u6A21\u578B\u7528\u4E8E\u5C01\u88C5\u6570\u636E\uFF0C\u4E1A\u52A1\u6A21\u578B\u7528\u4E8E\u5904\u7406\u4E1A\u52A1\u3002</li><li>View(\u89C6\u56FE): \u901A\u5E38\u6307\u7684\u5C31\u662F\u6211\u4EEC\u7684 jsp \u6216\u8005 html\u3002\u4F5C\u7528\u4E00\u822C\u5C31\u662F\u5C55\u793A\u6570\u636E\u7684\u3002\u901A\u5E38\u89C6\u56FE\u662F\u4F9D\u636E\u6A21\u578B\u6570\u636E\u521B\u5EFA\u7684\u3002</li><li>Controller(\u63A7\u5236\u5668): \u662F\u5E94\u7528\u7A0B\u5E8F\u4E2D\u5904\u7406\u7528\u6237\u4EA4\u4E92\u7684\u90E8\u5206\u3002\u4F5C\u7528\u4E00\u822C\u5C31\u662F\u5904\u7406\u7A0B\u5E8F\u903B\u8F91\u7684\u3002</li></ul><p>MVC\u63D0\u5021:\u6BCF\u4E00\u5C42\u53EA\u7F16\u5199\u81EA\u5DF1\u7684\u4E1C\u2EC4\uFF0C\u4E0D\u7F16\u5199\u4EFB\u4F55\u5176\u4ED6\u7684\u4EE3\u7801;\u5206\u5C42\u662F\u4E3A\u4E86\u89E3\u8026\uFF0C\u89E3\u8026\u662F\u4E3A\u4E86\u7EF4\u62A4\u65B9\u4FBF\u548C\u5206\u5DE5\u534F\u4F5C\u3002</p><p>Spring MVC \u662F\u5E94\u7528\u4E8E\u8868\u73B0\u5C42\u7684\u6846\u67B6\u3002</p><h4 id="_1-2-spring-mvc" tabindex="-1"><a class="header-anchor" href="#_1-2-spring-mvc" aria-hidden="true">#</a> 1.2 Spring MVC</h4><p>SpringMVC \u5168\u540D\u53EB Spring Web MVC\uFF0C\u662F\u4E00\u79CD\u57FA\u4E8E Java \u7684\u5B9E\u73B0 MVC \u8BBE\u8BA1\u6A21\u578B\u7684\u8BF7\u6C42\u9A71\u52A8\u7C7B\u578B\u7684\u8F7B\u91CF\u7EA7 Web \u6846\u67B6\uFF0C\u5C5E\u4E8E SpringFrameWork \u7684\u540E\u7EED\u4EA7\u54C1\u3002</p><p>SpringMVC \u5DF2\u7ECF\u6210\u4E3A\u76EE\u524D\u6700\u4E3B\u6D41\u7684 MVC \u6846\u67B6 \u4E4B\u4E00\uFF0C\u5E76\u4E14\u968F\u7740 Spring3.0 \u7684\u53D1\u5E03\uFF0C\u5168\u9762\u8D85\u8D8A Struts2\uFF0C \u6210\u4E3A\u6700\u4F18\u79C0\u7684 MVC \u6846\u67B6\u3002</p><p>\u5B83\u901A\u8FC7\u4E00\u5957\u6CE8\u89E3\uFF0C\u8BA9\u4E00\u4E2A\u7B80\u5355\u7684 Java \u7C7B\u6210\u4E3A\u5904\u7406\u8BF7\u6C42\u7684\u63A7\u5236\u5668\uFF0C\u800C\u65E0\u987B\u5B9E\u73B0\u4EFB\u4F55\u63A5\u53E3\u3002\u540C\u65F6\u5B83\u8FD8\u652F\u6301 RESTful \u7F16\u7A0B\u2EDB\u683C\u7684\u8BF7\u6C42\u3002</p><blockquote><p>Spring MVC\u548C Struts2 \u4E00\u6837\uFF0C\u90FD\u662F\u4E3A\u4E86\u89E3\u51B3\u8868\u73B0\u5C42\u95EE\u9898\u7684web\u6846\u67B6\uFF0C\u5B83\u4EEC\u90FD\u662F\u57FA\u4E8E MVC \u8BBE\u8BA1\u6A21\u5F0F\u7684\u3002\u800C\u8FD9\u4E9B\u8868\u73B0\u5C42\u6846\u67B6\u7684\u4E3B\u8981\u804C\u8D23\u5C31\u662F\u5904\u7406\u524D\u7AEFHTTP\u8BF7\u6C42\u3002 Spring MVC \u672C\u8D28\u53EF\u4EE5\u8BA4\u4E3A\u662F\u5BF9servlet\u7684\u5C01\u88C5\uFF0C\u7B80\u5316\u4E86\u6211\u4EEC servlet \u7684\u5F00\u53D1\u3002 \u4F5C\u7528\uFF1A\u63A5\u6536\u8BF7\u6C42 + \u8FD4\u56DE\u54CD\u5E94/\u8DF3\u8F6C\u9875\u9762</p></blockquote><p><strong>\u539F\u751F Servlet \u5F00\u53D1\u4E0E Spring MVC \u6BD4\u8F83</strong></p><p>\u539F\u751F Servlet \uFF1A\u6BCF\u4E00\u4E2A\u4E1A\u52A1\u90FD\u662F\u4E00\u4E2A servlet</p><p>Spring MVC \uFF1A\u5168\u5C40\u53EA\u6709\u4E00\u4E2A servlet (<code>DispatcherServlet</code>)\u63A5\u6536\u6240\u6709\u8BF7\u6C42</p><h3 id="\u7B2C-2-\u8282-spring-web-mvc-\u5DE5\u4F5C\u6D41\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u7B2C-2-\u8282-spring-web-mvc-\u5DE5\u4F5C\u6D41\u7A0B" aria-hidden="true">#</a> \u7B2C 2 \u8282 Spring Web MVC \u5DE5\u4F5C\u6D41\u7A0B</h3><p><strong>\u7B80\u5355\u56DE\u987E</strong></p><p>web.xml</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">web-app</span> <span class="token name">PUBLIC</span>
        <span class="token string">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span>
        <span class="token string">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> <span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>display-name</span><span class="token punctuation">&gt;</span></span>Archetype Created Web Application<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>display-name</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>springmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">&gt;</span></span>org.springframework.web.servlet.DispatcherServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>contextConfigLocation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>classpath:springmvc.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>springmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>springmvc.xml</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>mvc</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/mvc<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context.xsd
       http://www.springframework.org/schema/mvc
       http://www.springframework.org/schema/mvc/spring-mvc.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mujunlin.controller<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token comment">&lt;!--  \u89C6\u56FE\u89E3\u6790\u5668  --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.web.servlet.view.InternalResourceViewResolver<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prefix<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/WEB-INF/jsp/<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>suffix<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.jsp<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--  \u81EA\u52A8\u6CE8\u518C\u6700\u5408\u9002\u7684\u5904\u7406\u5668\u6620\u5C04\u5668\u3001\u5904\u7406\u5668\u9002\u914D\u5668  --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>annotation-driven</span><span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h4 id="_2-1-spring-mvc-\u8BF7\u6C42\u5904\u7406\u6D41\u7A0B" tabindex="-1"><a class="header-anchor" href="#_2-1-spring-mvc-\u8BF7\u6C42\u5904\u7406\u6D41\u7A0B" aria-hidden="true">#</a> 2.1 Spring MVC \u8BF7\u6C42\u5904\u7406\u6D41\u7A0B</h4><p><strong>\u6D41\u7A0B\u8BF4\u660E</strong></p><ul><li>\u7B2C\u4E00\u6B65: \u7528\u6237\u53D1\u9001\u8BF7\u6C42\u81F3\u524D\u7AEF\u63A7\u5236\u5668 <code>DispatcherServlet</code></li><li>\u7B2C\u4E8C\u6B65: <code>DispatcherServlet</code> \u6536\u5230\u8BF7\u6C42\u8C03\u7528 <code>HandlerMapping</code> \u5904\u7406\u5668\u6620\u5C04\u5668</li><li>\u7B2C\u4E09\u6B65: \u5904\u7406\u5668\u6620\u5C04\u5668\u6839\u636E\u8BF7\u6C42 Url \u627E\u5230\u5177\u4F53\u7684 Handler(\u540E\u7AEF\u63A7\u5236\u5668)\uFF0C\u751F\u6210\u5904\u7406\u5668\u5BF9\u8C61\u53CA\u5904\u7406\u5668\u62E6\u622A\u5668(\u5982\u679C\u6709\u5219\u751F\u6210)\u4E00\u5E76\u8FD4\u56DE <code>DispatcherServlet</code></li><li>\u7B2C\u56DB\u6B65: <code>DispatcherServlet</code> \u8C03\u7528 <code>HandlerAdapter</code> \u5904\u7406\u5668\u9002\u914D\u5668\u53BB\u8C03\u7528 <code>Handler</code></li><li>\u7B2C\u4E94\u6B65: \u5904\u7406\u5668\u9002\u914D\u5668\u6267\u884C <code>Handler</code></li><li>\u7B2C\u516D\u6B65: <code>Handler</code> \u6267\u884C\u5B8C\u6210\u7ED9\u5904\u7406\u5668\u9002\u914D\u5668\u8FD4\u56DE <code>ModelAndView</code></li><li>\u7B2C\u4E03\u6B65: \u5904\u7406\u5668\u9002\u914D\u5668\u5411\u524D\u7AEF\u63A7\u5236\u5668\u8FD4\u56DE <code>ModelAndView</code>\uFF0C<code>ModelAndView</code> \u662FSpringMVC \u6846\u67B6\u7684\u4E00\u4E2A\u5E95\u5C42\u5BF9\u8C61\uFF0C\u5305\u62EC Model \u548C View</li><li>\u7B2C\u516B\u6B65: \u524D\u7AEF\u63A7\u5236\u5668\u8BF7\u6C42\u89C6\u56FE\u89E3\u6790\u5668\u53BB\u8FDB\u884C\u89C6\u56FE\u89E3\u6790\uFF0C\u6839\u636E\u903B\u8F91\u89C6\u56FE\u540D\u6765\u89E3\u6790\u771F\u6B63\u7684\u89C6\u56FE\u3002</li><li>\u7B2C\u4E5D\u6B65: \u89C6\u56FE\u89E3\u6790\u5668\u5411\u524D\u7AEF\u63A7\u5236\u5668\u8FD4\u56DE <code>View</code></li><li>\u7B2C\u5341\u6B65: \u524D\u7AEF\u63A7\u5236\u5668\u8FDB\u884C\u89C6\u56FE\u6E32\u67D3\uFF0C\u5C31\u662F\u5C06\u6A21\u578B\u6570\u636E(\u5728 <code>ModelAndView</code> \u5BF9\u8C61\u4E2D)\u586B\u5145\u5230 request \u57DF</li><li>\u7B2C\u5341\u4E00\u6B65: \u524D\u7AEF\u63A7\u5236\u5668\u5411\u7528\u6237\u54CD\u5E94\u7ED3\u679C</li></ul><h4 id="_2-2-spring-mvc-\u4E5D\u5927\u7EC4\u4EF6" tabindex="-1"><a class="header-anchor" href="#_2-2-spring-mvc-\u4E5D\u5927\u7EC4\u4EF6" aria-hidden="true">#</a> 2.2 Spring MVC \u4E5D\u5927\u7EC4\u4EF6</h4><ul><li>HandlerMapping(\u5904\u7406\u5668\u6620\u5C04\u5668)</li></ul><p>HandlerMapping \u662F\u7528\u6765\u67E5\u627E Handler (\u4E5F\u5C31\u662F\u5904\u7406\u5668)\u7684\uFF0C\u5177\u4F53\u7684\u8868\u73B0\u5F62\u5F0F\u53EF\u4EE5\u662F\u7C7B\uFF0C\u4E5F\u53EF\u4EE5\u662F \u65B9\u6CD5\u3002 \u6BD4\u5982\uFF0C\u6807\u6CE8\u4E86 <code>@RequestMapping</code> \u7684\u6BCF\u4E2A\u65B9\u6CD5\u90FD\u53EF\u4EE5\u770B\u6210\u662F\u4E00\u4E2A Handler\u3002Handler \u8D1F\u8D23\u5177\u4F53\u5B9E\u9645\u7684\u8BF7\u6C42\u5904\u7406\uFF0C\u5728\u8BF7\u6C42\u5230\u8FBE\u540E\uFF0CHandlerMapping \u7684\u4F5C\u7528\u4FBF\u662F\u627E\u5230\u8BF7\u6C42\u76F8\u5E94\u7684\u5904\u7406\u5668 Handler \u548C Interceptor.</p><ul><li>HandlerAdapter(\u5904\u7406\u5668\u9002\u914D\u5668)</li></ul><p>HandlerAdapter \u662F\u4E00\u4E2A\u9002\u914D\u5668\u3002\u56E0\u4E3A Spring MVC \u4E2D Handler \u53EF\u4EE5\u662F\u4EFB\u610F\u5F62\u5F0F\u7684\uFF0C\u53EA\u8981\u80FD\u5904\u7406\u8BF7\u6C42\u5373\u53EF\u3002 \u4F46\u662F\u628A\u8BF7\u6C42\u4EA4\u7ED9 Servlet \u7684\u65F6\u5019\uFF0C\u7531\u4E8E Servlet \u7684\u65B9\u6CD5\u7ED3\u6784\u90FD\u662F <code>doService(HttpServletRequest req,HttpServletResponse resp)</code> \u5F62\u5F0F\u7684\uFF0C \u8981\u8BA9\u56FA\u5B9A\u7684 Servlet \u5904\u7406\u65B9\u6CD5\u8C03\u7528 Handler \u6765\u8FDB\u884C\u5904\u7406\uFF0C\u4FBF\u662F HandlerAdapter \u7684\u804C\u8D23\u3002</p><ul><li>HandlerExceptionResolver</li></ul><p>HandlerExceptionResolver \u7528\u4E8E\u5904\u7406 Handler \u4EA7\u751F\u7684\u5F02\u5E38\u60C5\u51B5\u3002\u5B83\u7684\u4F5C\u7528\u662F\u6839\u636E\u5F02\u5E38\u8BBE\u7F6E <code>ModelAndView</code>\uFF0C\u4E4B\u540E\u4EA4\u7ED9\u6E32\u67D3\u65B9\u6CD5\u8FDB\u884C\u6E32\u67D3\uFF0C\u6E32\u67D3\u65B9\u6CD5\u4F1A\u5C06 ModelAndView \u6E32\u67D3\u6210\u2EDA\u9762\u3002</p><ul><li>ViewResolver</li></ul><p>ViewResolver\u5373\u89C6\u56FE\u89E3\u6790\u5668\uFF0C\u7528\u4E8E\u5C06String\u7C7B\u578B\u7684\u89C6\u56FE\u540D\u548CLocale\u89E3\u6790\u4E3AView\u7C7B\u578B\u7684\u89C6\u56FE\uFF0C\u53EA\u6709\u4E00 \u4E2AresolveViewName()\u65B9\u6CD5\u3002 \u4ECE\u65B9\u6CD5\u7684\u5B9A\u4E49\u53EF\u4EE5\u770B\u51FA\uFF0CController\u5C42\u8FD4\u56DE\u7684String\u7C7B\u578B\u89C6\u56FE\u540D viewName \u6700\u7EC8\u4F1A\u5728\u8FD9\u91CC\u88AB\u89E3\u6790\u6210\u4E3AView\u3002View\u662F\u7528\u6765\u6E32\u67D3\u2EDA\u9762\u7684\uFF0C\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5B83\u4F1A\u5C06\u7A0B\u5E8F\u8FD4\u56DE\u7684\u53C2\u6570\u548C\u6570\u636E\u586B\u5165\u6A21\u677F\u4E2D\uFF0C\u751F\u6210html\u6587\u4EF6\u3002 ViewResolver \u5728\u8FD9\u4E2A\u8FC7\u7A0B\u4E3B\u8981\u5B8C\u6210\u4E24\u4EF6\u4E8B\u60C5: ViewResolver \u627E\u5230\u6E32\u67D3\u6240\u7528\u7684\u6A21\u677F(\u7B2C\u4E00\u4EF6\u5927\u4E8B)\u548C\u6240\u7528\u7684\u6280\u672F(\u7B2C\u4E8C\u4EF6\u5927\u4E8B\uFF0C\u5176\u5B9E\u4E5F\u5C31\u662F\u627E\u5230\u89C6\u56FE\u7684\u7C7B\u578B\uFF0C\u5982JSP)\u5E76\u586B\u5165\u53C2\u6570\u3002 \u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0CSpring MVC\u4F1A\u81EA\u52A8\u4E3A\u6211\u4EEC\u914D\u7F6E\u4E00\u4E2A <code>InternalResourceViewResolver</code>, \u662F\u9488\u5BF9 JSP \u7C7B\u578B\u89C6\u56FE\u7684\u3002</p><ul><li>RequestToViewNameTranslator</li></ul><p>RequestToViewNameTranslator \u7EC4\u4EF6\u7684\u4F5C\u7528\u662F\u4ECE\u8BF7\u6C42\u4E2D\u83B7\u53D6 ViewName. \u56E0\u4E3A ViewResolver \u6839\u636E ViewName \u67E5\u627E View\uFF0C\u4F46\u6709\u7684 Handler \u5904\u7406\u5B8C\u6210\u4E4B\u540E,\u6CA1\u6709\u8BBE\u7F6E View\uFF0C\u4E5F\u6CA1\u6709\u8BBE\u7F6E ViewName\uFF0C \u4FBF\u8981\u901A\u8FC7\u8FD9\u4E2A\u7EC4\u4EF6\u4ECE\u8BF7\u6C42\u4E2D\u67E5\u627E ViewName\u3002</p><ul><li>LocaleResolver</li></ul><p>ViewResolver \u7EC4\u4EF6\u7684 resolveViewName \u65B9\u6CD5\u9700\u8981\u4E24\u4E2A\u53C2\u6570\uFF0C\u4E00\u4E2A\u662F\u89C6\u56FE\u540D\uFF0C\u4E00\u4E2A\u662F Locale\u3002 LocaleResolver \u7528\u4E8E\u4ECE\u8BF7\u6C42\u4E2D\u89E3\u6790\u51FA Locale\uFF0C \u6BD4\u5982\u4E2D\u56FD Locale \u662F zh-CN\uFF0C\u7528\u6765\u8868\u793A\u4E00\u4E2A\u533A\u57DF\u3002\u8FD9 \u4E2A\u7EC4\u4EF6\u4E5F\u662F i18n \u7684\u57FA\u7840\u3002</p><ul><li>ThemeResolver</li></ul><p>ThemeResolver \u7EC4\u4EF6\u662F\u7528\u6765\u89E3\u6790\u4E3B\u9898\u7684\u3002\u4E3B\u9898\u662F\u6837\u5F0F\u3001\u56FE\u7247\u53CA\u5B83\u4EEC\u6240\u5F62\u6210\u7684\u663E\u793A\u6548\u679C\u7684\u96C6\u5408\u3002 Spring MVC \u4E2D\u4E00\u5957\u4E3B\u9898\u5BF9\u5E94\u4E00\u4E2A properties\u6587\u4EF6\uFF0C\u91CC\u9762\u5B58\u653E\u7740\u4E0E\u5F53\u524D\u4E3B\u9898\u76F8\u5173\u7684\u6240\u6709\u8D44\u6E90\uFF0C\u5982\u56FE \u7247\u3001CSS\u6837\u5F0F\u7B49\u3002 \u521B\u5EFA\u4E3B\u9898\u975E\u5E38\u7B80\u5355\uFF0C\u53EA\u9700\u51C6\u5907\u597D\u8D44\u6E90\uFF0C\u7136\u540E\u65B0\u5EFA\u4E00\u4E2A\u201C\u4E3B\u9898\u540D.properties\u201D\u5E76\u5C06\u8D44\u6E90\u8BBE\u7F6E\u8FDB\u53BB\uFF0C\u653E\u5728classpath\u4E0B\uFF0C\u4E4B\u540E\u4FBF\u53EF\u4EE5\u5728\u2EDA\u9762\u4E2D\u4F7F\u7528\u4E86\u3002 SpringMVC \u4E2D\u4E0E\u4E3B\u9898\u76F8\u5173\u7684\u7C7B\u6709 ThemeResolver\u3001ThemeSource\u548CTheme\u3002ThemeResolver\u8D1F\u8D23\u4ECE\u8BF7\u6C42\u4E2D\u89E3\u6790\u51FA\u4E3B\u9898\u540D\uFF0C ThemeSource\u6839\u636E\u4E3B\u9898\u540D\u627E\u5230\u5177\u4F53\u7684\u4E3B\u9898\uFF0C\u5176\u62BD\u8C61\u4E5F\u5C31\u662FTheme\uFF0C\u53EF\u4EE5\u901A\u8FC7Theme\u6765\u83B7\u53D6\u4E3B\u9898\u548C\u5177\u4F53\u7684\u8D44\u6E90\u3002</p><ul><li>MultipartResolver</li></ul><p>MultipartResolver \u7528\u4E8E\u4E0A\u4F20\u8BF7\u6C42\uFF0C\u901A\u8FC7\u5C06\u666E\u901A\u7684\u8BF7\u6C42\u5305\u88C5\u6210 <code>MultipartHttpServletRequest</code> \u6765\u5B9E\u73B0\u3002 MultipartHttpServletRequest \u53EF\u4EE5\u901A\u8FC7 getFile() \u65B9\u6CD5\u76F4\u63A5\u83B7\u5F97\u6587\u4EF6\u3002\u5982\u679C\u4E0A\u4F20\u591A\u4E2A\u6587\u4EF6\uFF0C\u8FD8\u53EF\u4EE5\u8C03\u7528 getFileMap() \u65B9\u6CD5\u5F97\u5230Map&lt;FileName\uFF0CFile&gt;\u8FD9\u6837\u7684\u7ED3\u6784\uFF0CMultipartResolver \u7684\u4F5C\u7528\u5C31\u662F\u5C01\u88C5\u666E\u901A\u7684\u8BF7\u6C42\uFF0C\u4F7F\u5176\u62E5\u6709\u6587\u4EF6\u4E0A\u4F20\u7684\u529F\u80FD\u3002</p><ul><li>FlashMapManager</li></ul><p>FlashMap \u7528\u4E8E\u91CD\u5B9A\u5411\u65F6\u7684\u53C2\u6570\u4F20\u9012\uFF0C\u6BD4\u5982\u5728\u5904\u7406\u7528\u6237\u8BA2\u5355\u65F6\u5019\uFF0C\u4E3A\u4E86\u907F\u514D\u91CD\u590D\u63D0\u4EA4\uFF0C\u53EF\u4EE5\u5904\u7406\u5B8C post\u8BF7\u6C42\u4E4B\u540E\u91CD\u5B9A\u5411\u5230\u4E00\u4E2Aget\u8BF7\u6C42\uFF0C\u8FD9\u4E2Aget\u8BF7\u6C42\u53EF\u4EE5\u7528\u6765\u663E\u793A\u8BA2\u5355\u8BE6\u60C5\u4E4B\u7C7B\u7684\u4FE1\u606F\u3002 \u8FD9\u6837\u505A\u867D\u7136 \u53EF\u4EE5\u89C4\u907F\u7528\u6237\u91CD\u65B0\u63D0\u4EA4\u8BA2\u5355\u7684\u95EE\u9898\uFF0C\u4F46\u662F\u5728\u8FD9\u4E2A\u2EDA\u9762\u4E0A\u8981\u663E\u793A\u8BA2\u5355\u7684\u4FE1\u606F\uFF0C\u8FD9\u4E9B\u6570\u636E\u4ECE\u54EA\u91CC\u6765\u83B7\u5F97\u5462? \u56E0\u4E3A\u91CD\u5B9A\u5411\u65F6\u4E48\u6709\u4F20\u9012\u53C2\u6570\u8FD9\u4E00\u529F\u80FD\u7684\uFF0C\u5982\u679C\u4E0D\u60F3\u628A\u53C2\u6570\u5199\u8FDBURL(\u4E0D\u63A8\u8350)\uFF0C\u90A3\u4E48\u5C31\u53EF\u4EE5\u901A \u8FC7FlashMap\u6765\u4F20\u9012\u3002 \u53EA\u9700\u8981\u5728\u91CD\u5B9A\u5411\u4E4B\u524D\u5C06\u8981\u4F20\u9012\u7684\u6570\u636E\u5199\u5165\u8BF7\u6C42(\u53EF\u4EE5\u901A\u8FC7 ServletRequestAttributes.getRequest()\u65B9\u6CD5\u83B7\u5F97)\u7684\u5C5E\u6027 OUTPUT_FLASH_MAP_ATTRIBUTE \u4E2D\uFF0C\u8FD9\u6837\u5728\u91CD\u5B9A\u5411\u4E4B\u540E\u7684Handler\u4E2DSpring\u5C31\u4F1A\u81EA\u52A8\u5C06\u5176\u8BBE\u7F6E\u5230Model\u4E2D\uFF0C \u5728\u663E\u793A\u8BA2\u5355\u4FE1\u606F\u7684\u2EDA\u9762\u4E0A\u5C31\u53EF\u4EE5\u76F4\u63A5\u4ECEModel\u4E2D\u83B7\u53D6\u6570\u636E\u3002FlashMapManager \u5C31\u662F\u7528\u6765\u7BA1\u7406 FlashMap \u7684\u3002</p><hr><p><strong>Spring MVC \u7684 url-pattern \u914D\u7F6E\u53CA\u539F\u7406\u5256\u6790</strong></p><p>url-pattern \u7684\u4F5C\u7528\uFF1A \u62E6\u622A\u5339\u914D\u89C4\u5219\u7684 URL \u8BF7\u6C42\uFF0C\u8FDB\u5165 Spring MVC \u6846\u67B6\u5904\u7406\u3002</p><p>\u914D\u7F6E\u65B9\u5F0F\uFF1A</p><ol><li>\u5E26\u540E\u7F00\u3002\u5982\uFF1A *.action, *.do\u3002\u6B64\u79CD\u65B9\u5F0F\u6BD4\u8F83\u7CBE\u786E\u3001\u65B9\u4FBF\uFF0C\u4F7F\u7528\u6BD4\u4F8B\u8F83\u5927\u3002</li><li>/ \u3002 \u4E0D\u4F1A\u62E6\u622A <code>.jsp</code>\u3002 \u4F46\u662F\u4F1A\u62E6\u622A .html \u7B49\u9759\u6001\u8D44\u6E90\u3002</li><li>/* \u3002 \u62E6\u622A\u6240\u6709\uFF0C\u5305\u62EC <code>.jsp</code>\u3002</li></ol><blockquote><p>\u62E6\u622A <code>.jsp</code> \u662F\u4EC0\u4E48\u610F\u601D\uFF1F</p><p>handler \u5904\u7406\u5B8C\u4E1A\u52A1\u8BF7\u6C42\u540E\uFF0C\u9700\u8981\u9875\u9762\u8DF3\u8F6C\uFF1B\u6B64\u65F6\u7684\u9875\u9762\u8DF3\u8F6C\u4E5F\u4F1A\u88AB Spring MVC \u6240\u62E6\u622A\uFF0C\u5F53\u6210\u662F\u4E00\u4E2A\u9700\u8981\u5904\u7406\u7684\u8BF7\u6C42\uFF0C\u53BB\u627E\u76F8\u5E94\u7684 handler\u3002 \u5B9E\u9645\u4E0A\u6B64\u65F6\u7684\u8BF7\u6C42\u4E0D\u5E94\u8BE5\u7531 Spring MVC \u5904\u7406\uFF0C\u5E94\u8BE5\u8BA9 Web \u5BB9\u5668\u6765\u5904\u7406\u9875\u9762\u8DF3\u8F6C\u7684\u8BF7\u6C42\u3002</p></blockquote><blockquote><p>\u4E3A\u4EC0\u4E48\u914D\u7F6E\u4E3A <code>/</code> \u65F6\uFF0C\u4F1A\u62E6\u622A\u9759\u6001\u8D44\u6E90\u5462\uFF1F</p><p>\u56E0\u4E3A Tomcat \u5BB9\u5668\u4E2D\u6709\u4E00\u4E2A <code>web.xml</code>\uFF0C\u9879\u76EE\u4E2D\u4E5F\u6709\u4E00\u4E2A <code>web.xml</code>, \u800C\u4ED6\u4EEC\u662F\u7236\u5B50\u5173\u7CFB\u3002<br> \u5728\u7236 xml \u4E2D\u5B58\u5728\u4E00\u4E2A DefaultServlet, \u4ED6\u7684\u4F5C\u7528\u662F\u5904\u7406\u9759\u6001\u8D44\u6E90\uFF0C\u4ED6\u7684 url-pattern \u914D\u7F6E\u7684\u662F <code>/</code>;<br> \u6B64\u65F6\u81EA\u5DF1\u7684 xml \u4E2D\u4E5F\u914D\u7F6E\u4E3A <code>/</code>, \u4F1A\u8986\u76D6\u7236 xml \u7684\u914D\u7F6E\u3002</p><p>\u56E0\u4E3A\u7236 xml \u4E2D\u6709\u4E13\u95E8\u7528\u4E8E\u5904\u7406 .jsp \u8BF7\u6C42\u7684 JspServlet\uFF0C\u6240\u4EE5\u4E0D\u4F1A\u62E6\u622A .jsp\u3002</p></blockquote><hr><p><strong>\u5982\u4F55\u89E3\u51B3 <code>url-pattern</code> \u914D\u7F6E\u4E3A <code>/</code> \u65F6\u62E6\u622A\u9759\u6001\u8D44\u6E90?</strong></p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--  \u65B9\u6848\u4E00  --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>default-servlet-handler</span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u539F\u7406\uFF1A \u6DFB\u52A0\u6B64\u6807\u7B7E\u540E\uFF0C\u4F1A\u5728 Spring MVC \u4E0A\u4E0B\u6587\u4E2D\u5B9A\u4E00\u4E2A DefaultServletHttpRequestHandler \u5BF9\u8C61\u3002\u8FD9\u4E2A\u5BF9\u8C61\u4F1A\u5BF9\u8FDB\u5165 DispatcherServlet \u7684\u8BF7\u6C42\u8FDB\u884C\u8FC7\u6EE4\u3002<br> \u5982\u679C\u53D1\u73B0\u662F\u4E00\u4E2A\u9759\u6001\u8D44\u6E90\u8BF7\u6C42\uFF0C\u5219\u4F1A\u628A\u8BF7\u6C42\u8F6C\u7531 Web \u5E94\u7528\u670D\u52A1\u5668(\u5982 Tomcat)\u7684\u9ED8\u8BA4 DefaultServlet \u6765\u5904\u7406\u3002 \u5982\u679C\u4E0D\u662F\u9759\u6001\u8D44\u6E90\u8BF7\u6C42\uFF0C\u5219\u7EE7\u7EED\u7531 Spring MVC \u6846\u67B6\u8FDB\u884C\u5904\u7406\u3002</p><blockquote><p>\u6B64\u79CD\u65B9\u6848\u5B58\u5728\u4E0D\u8DB3\uFF1A\u53EA\u80FD\u5904\u7406\u9759\u6001\u8D44\u6E90\u6587\u4EF6\u4F4D\u4E8E webapp \u76EE\u5F55\u4E0B\u7684\u60C5\u51B5\uFF0C\u4E0D\u80FD\u5904\u7406\u9759\u6001\u8D44\u6E90\u4F4D\u4E8E WEB-INF \u4E0B\u7684\u60C5\u51B5\u3002</p></blockquote><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--  \u65B9\u6848\u4E8C  --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>resources</span> <span class="token attr-name">mapping</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/resources/**<span class="token punctuation">&quot;</span></span> <span class="token attr-name">location</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>classpath:/<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Spring MVC \u6846\u67B6\u81EA\u5DF1\u5904\u7406\u9759\u6001\u8D44\u6E90\u3002</p><ul><li>mapping : \u7EA6\u5B9A\u7684\u9759\u6001\u8D44\u6E90 URL \u89C4\u5219</li><li>location: \u6307\u5B9A\u9759\u6001\u8D44\u6E90\u6587\u4EF6\u7684\u5B58\u653E\u4F4D\u7F6E</li></ul><hr><p>Spring MVC \u5728\u65B9\u6CD5\u4E0A\u6DFB\u52A0\u578B\u53C2 Map\u3001Model \u548C ModelMap\uFF0C\u5E76\u5411\u8FD9\u4E9B\u53C2\u6570\u4E2D\u4FDD\u5B58\u6570\u636E(\u653E\u5165\u8BF7\u6C42\u57DF\u4E2D)\uFF0C\u90FD\u53EF\u4EE5\u5728\u9875\u9762\u83B7\u53D6\u5230\u3002</p><p>\u90A3\u4E48\u4ED6\u4EEC\u4E4B\u95F4\u662F\u4EC0\u4E48\u5173\u7CFB\u5462\uFF1F</p><p>\u901A\u8FC7\u6253\u5370\u53C2\u6570\u53EF\u77E5\uFF1A\u8FD0\u884C\u65F6\u7684\u5177\u4F53\u7C7B\u578B\u90FD\u662F BindingAwareModelMap, \u76F8\u5F53\u4E8E\u7ED9 BindingAwareModelMap \u4E2D\u4FDD\u5B58\u7684\u6570\u636E\u6700\u7EC8\u90FD\u4F1A\u653E\u5230\u8BF7\u6C42\u57DF\u4E2D\u3002</p><p>\u4ED6\u4EEC\u7684\u5173\u7CFB\uFF1A</p><ul><li><code>org.springframework.ui.ModelMap</code> \u7C7B\u5B9E\u73B0\u4E86 <code>java.util.Map</code> \u63A5\u53E3\uFF1B</li><li><code>org.springframework.validation.support.BindingAwareModelMap</code> \u7EE7\u627F\u4E86 <code>org.springframework.ui.ExtendedModelMap</code>\uFF1B</li><li><code>org.springframework.ui.ExtendedModelMap</code> \u7EE7\u627F\u4E86 <code>org.springframework.ui.ModelMap</code> \u7C7B\uFF0C\u540C\u65F6\u5B9E\u73B0\u4E86 <code>org.springframework.ui.Model</code> \u63A5\u53E3\uFF1B</li></ul><hr><h3 id="\u7B2C-3-\u8282-\u8BF7\u6C42\u53C2\u6570\u7ED1\u5B9A" tabindex="-1"><a class="header-anchor" href="#\u7B2C-3-\u8282-\u8BF7\u6C42\u53C2\u6570\u7ED1\u5B9A" aria-hidden="true">#</a> \u7B2C 3 \u8282 \u8BF7\u6C42\u53C2\u6570\u7ED1\u5B9A</h3><blockquote><p>SpringMVC\u5982\u4F55\u63A5\u6536\u8BF7\u6C42\u53C2\u6570\u3002</p></blockquote><h4 id="_3-1-\u53C2\u6570\u7ED1\u5B9A\u7B80\u4ECB" tabindex="-1"><a class="header-anchor" href="#_3-1-\u53C2\u6570\u7ED1\u5B9A\u7B80\u4ECB" aria-hidden="true">#</a> 3.1 \u53C2\u6570\u7ED1\u5B9A\u7B80\u4ECB</h4><p><strong>\u539F\u751F Servlet \u63A5\u6536\u53C2\u6570</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">String</span> ageStr <span class="token operator">=</span> requst<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Integer</span> age <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>ageStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>\u4E3A\u4EC0\u4E48\u8981\u5148\u83B7\u53D6\u5230\u5B57\u7B26\u4E32\u7C7B\u578B\u5462\uFF1F \u56E0\u4E3A\u6D4F\u89C8\u5668\u5411\u540E\u53F0\u53D1\u9001\u8BF7\u6C42\u4F7F\u7528\u7684\u662F HTTP \u534F\u8BAE\uFF0C\u4F20\u8F93\u7684\u5C31\u662F\u6587\u672C\u3002</p></blockquote><p><strong>Spring MVC \u63A5\u6536\u53C2\u6570</strong></p><p>Spring MVC \u672C\u8D28\u4E0A\u5C31\u662F\u5BF9 Servlet \u8FDB\u884C\u4E86\u5C01\u88C5\uFF0C\u7B80\u5316\u4E86 Servlet \u7684\u64CD\u4F5C\u3002\u5728\u63A5\u6536\u6574\u578B\u53C2\u6570\u7684\u65F6\u5019\uFF0C\u76F4\u63A5\u5728Handler\u65B9\u6CD5\u4E2D\u58F0\u660E\u5F62\u53C2\u5373\u53EF\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;xxx&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>\u53C2\u6570\u7ED1\u5B9A:\u53D6\u51FA\u53C2\u6570\u503C\u7ED1\u5B9A\u5230handler\u65B9\u6CD5\u7684\u5F62\u53C2\u4E0A</p></blockquote><h4 id="_3-2-\u5E38\u89C1\u53C2\u6570\u7C7B\u578B\u5C01\u88C5" tabindex="-1"><a class="header-anchor" href="#_3-2-\u5E38\u89C1\u53C2\u6570\u7C7B\u578B\u5C01\u88C5" aria-hidden="true">#</a> 3.2 \u5E38\u89C1\u53C2\u6570\u7C7B\u578B\u5C01\u88C5</h4><ul><li>\u9ED8\u8BA4\u652F\u6301 Servlet API \u4F5C\u4E3A\u65B9\u6CD5\u53C2\u6570</li></ul><p>\u5F53\u9700\u8981\u4F7F\u7528 <code>HttpServletRequest</code>\u3001<code>HttpServletResponse</code>\u3001<code>HttpSession</code> \u7B49\u539F\u751Fservlet\u5BF9\u8C61\u65F6\uFF0C\u76F4\u63A5\u5728handler\u65B9\u6CD5\u4E2D\u5F62\u53C2\u58F0\u660E\u4F7F\u7528\u5373\u53EF\u3002</p><ul><li>\u7B80\u5355\u7C7B\u578B\u53C2\u6570</li></ul><blockquote><p>\u7B80\u5355\u6570\u636E\u7C7B\u578B:\u516B\u79CD\u57FA\u672C\u6570\u636E\u7C7B\u578B\u53CA\u5176\u5305\u88C5\u7C7B\u578B</p></blockquote><p>\u53C2\u6570\u7C7B\u578B\u63A8\u8350\u4F7F\u7528\u5305\u88C5\u6570\u636E\u7C7B\u578B\uFF0C\u56E0\u4E3A\u57FA\u7840\u6570\u636E\u7C7B\u578B\u4E0D\u53EF\u4EE5\u4E3Anull</p><p>\u5BF9\u4E8E\u5E03\u5C14\u7C7B\u578B\u7684\u53C2\u6570\uFF0C\u8BF7\u6C42\u7684\u53C2\u6570\u503C\u4E3Atrue\u6216false, \u6216\u80051\u62160</p><blockquote><p>\u7ED1\u5B9A\u7B80\u5355\u6570\u636E\u7C7B\u578B\u53C2\u6570\uFF0C\u53EA\u9700\u8981\u76F4\u63A5\u58F0\u660E\u5F62\u53C2\u5373\u53EF</p><p>\u5F62\u53C2\u53C2\u6570\u540D\u548C\u4F20\u9012\u7684\u53C2\u6570\u540D\u8981\u4FDD\u6301\u4E00\u81F4\uFF0C\u5F53\u5F62\u53C2\u53C2\u6570\u540D\u548C\u4F20\u9012\u53C2\u6570\u540D\u4E0D\u4E00\u81F4\u65F6\u53EF\u4EE5\u4F7F\u7528 <code>@RequestParam</code> \u6CE8\u89E3\u8FDB\u884C\u624B\u52A8\u6620\u5C04</p></blockquote><ul><li>Pojo\u7C7B\u578B\u53C2\u6570</li></ul><p>\u63A5\u6536 POJO \u7C7B\u578B\u53C2\u6570\uFF0C\u76F4\u63A5\u5F62\u53C2\u58F0\u660E\u5373\u53EF\uFF0C\u7C7B\u578B\u5C31\u662F POJO \u7684\u7C7B\u578B. \u5F62\u53C2\u540D\u65E0\u6240\u8C13, \u4F46\u662F\u8981\u6C42\u4F20\u9012\u7684\u53C2\u6570\u540D\u5FC5\u987B\u548C POJO \u7684\u5C5E\u6027\u540D\u4FDD\u6301\u4E00\u81F4</p><ul><li>POJO \u5305\u88C5\u5BF9\u8C61\u53C2\u6570</li></ul><blockquote><p>POJO \u5305\u88C5\u5BF9\u8C61: \u5BF9\u8C61\u7684\u5C5E\u6027\u5C5E\u6027\u4E5F\u662F\u5BF9\u8C61</p></blockquote><p>\u4E0D\u7BA1\u662F\u5426\u5305\u88C5 POJO\uFF0C\u5B83\u9996\u5148\u662F\u4E00\u4E2A POJO\uFF0C\u90A3\u4E48\u5C31\u53EF\u4EE5\u6309\u7167\u4E0A\u8FF0pojo\u7684\u8981\u6C42\u6765:</p><ol><li>\u7ED1\u5B9A\u65F6\u5019\u76F4\u63A5\u5F62\u53C2\u58F0\u660E\u5373\u53EF</li><li>\u4F20\u53C2\u53C2\u6570\u540D\u548C POJO \u5C5E\u6027\u4FDD\u6301\u4E00\u81F4\uFF0C\u5982\u679C\u4E0D\u80FD\u591F\u5B9A\u4F4D\u6570\u636E\u9879\uFF0C\u90A3\u4E48\u901A\u8FC7 <code>\u5C5E\u6027\u540D + &quot;.&quot;</code> \u7684\u65B9\u5F0F(\u5982:<code>user.name</code>)\u8FDB\u4E00\u6B65\u9501\u5B9A\u6570\u636E</li></ol><ul><li>\u65E5\u671F\u7C7B\u578B\u53C2\u6570(\u9700\u8981\u914D\u7F6E\u81EA\u5B9A\u4E49\u7C7B\u578B\u8F6C\u6362\u5668)</li></ul><p>\u81EA\u5B9A\u4E49\u7C7B\u578B\u8F6C\u6362\u5668</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DateConverter</span> <span class="token keyword">implements</span> <span class="token class-name">Converter</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Date</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Date</span> <span class="token function">convert</span><span class="token punctuation">(</span><span class="token class-name">String</span> source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SimpleDateFormat</span> dateFormat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">&quot;yyyy/MM/dd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> dateFormat<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ParseException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>\u6CE8\u518C\u81EA\u5B9A\u4E49\u7C7B\u578B\u8F6C\u6362\u5668</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--  \u6CE8\u518C\u81EA\u5B9A\u4E49\u7C7B\u578B\u8F6C\u6362\u5668  --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>conversionServiceBean<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.format.support.FormattingConversionServiceFactoryBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>converters<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mujunlin.converter.DateConverter<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--  \u5173\u8054\u81EA\u5B9A\u4E49\u7C7B\u578B\u8F6C\u6362\u5668  --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>annotation-driven</span> <span class="token attr-name">conversion-service</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>conversionServiceBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="\u7B2C-4-\u8282-\u5BF9-restful-\u2EDB\u683C\u8BF7\u6C42\u652F\u6301" tabindex="-1"><a class="header-anchor" href="#\u7B2C-4-\u8282-\u5BF9-restful-\u2EDB\u683C\u8BF7\u6C42\u652F\u6301" aria-hidden="true">#</a> \u7B2C 4 \u8282 \u5BF9 Restful \u2EDB\u683C\u8BF7\u6C42\u652F\u6301</h3><h4 id="_4-1-rest-\u7B80\u4ECB" tabindex="-1"><a class="header-anchor" href="#_4-1-rest-\u7B80\u4ECB" aria-hidden="true">#</a> 4.1 REST \u7B80\u4ECB</h4><p><strong>RESTful \u793A\u4F8B</strong></p><p>REST \u662F\u4E00\u4E2A url \u8BF7\u6C42\u7684\u2EDB\u683C\uFF0C\u57FA\u4E8E\u8FD9\u79CD\u2EDB\u683C\u8BBE\u8BA1\u8BF7\u6C42\u7684 url</p><ul><li><p>\u6CA1\u6709 REST \u65F6\uFF0C\u539F\u6709\u7684url\u8BBE\u8BA1<br><code>http://localhost:8080/user/queryUserById.action?id=3</code><br> url\u4E2D\u5B9A\u4E49\u4E86\u52A8\u4F5C(\u64CD\u4F5C)\uFF0C\u53C2\u6570\u5177\u4F53\u9501\u5B9A\u5230\u64CD\u4F5C\u7684\u662F\u8C01</p></li><li><p>\u6709\u4E86 REST \u2EDB\u683C\u4E4B\u540E<br> REST \u8BA4\u4E3A\u4E92\u8054\u7F51\u4E2D\u7684\u6240\u6709\u4E1C\u2EC4\u90FD\u662F\u8D44\u6E90\uFF0C\u65E2\u7136\u662F\u8D44\u6E90\u5C31\u4F1A\u6709\u4E00\u4E2A\u552F\u4E00\u7684uri\u6807\u8BC6\u5B83 <code>http://localhost:8080/user/3</code><br> \u4EE3\u8868\u7684\u662Fid\u4E3A3\u7684\u90A3\u4E2A\u7528\u6237\u8BB0\u5F55(\u8D44\u6E90)</p></li></ul><p>\u9501\u5B9A\u8D44\u6E90\u4E4B\u540E\u5982\u4F55\u64CD\u4F5C\u5B83\u5462?</p><p>\u5E38\u89C4\u64CD\u4F5C\u5C31\u662F\u589E\u5220\u6539\u67E5 \u6839\u636E\u8BF7\u6C42\u65B9\u5F0F\u4E0D\u540C\uFF0C\u4EE3\u8868\u8981\u505A\u4E0D\u540C\u7684\u64CD\u4F5C</p><blockquote><p>REST \u2EDB\u683C\u5E26\u6765\u7684\u76F4\u89C2\u4F53\u73B0\u5C31\u662F: \u4F20\u9012\u53C2\u6570\u65B9\u5F0F\u7684\u53D8\u5316\uFF0C\u53C2\u6570\u53EF\u4EE5\u5B58\u5728\u4E8E URL \u4E2D\u4E86. <em>\u6838\u5FC3\u533A\u522B</em></p></blockquote><hr><p>Restful \u662F\u4E00\u79CD web \u8F6F\u4EF6\u67B6\u6784\u2EDB\u683C\uFF0C\u5B83\u4E0D\u662F\u6807\u51C6\u4E5F\u4E0D\u662F\u534F\u8BAE\uFF0C\u5B83\u5021\u5BFC\u7684\u662F\u4E00\u4E2A\u8D44\u6E90\u5B9A\u4F4D\u53CA\u8D44\u6E90\u64CD\u4F5C\u7684\u2EDB\u683C\u3002</p><p>REST(\u82F1\u6587:Representational State Transfer\uFF0C\u7B80\u79F0 REST)\u63CF\u8FF0\u4E86\u4E00\u4E2A\u67B6\u6784\u6837\u5F0F\u7684\u7F51\u7EDC\u7CFB\u7EDF\uFF0C\u6BD4\u5982 web \u5E94\u7528\u7A0B\u5E8F\u3002 \u5B83\u672C\u8EAB\u5E76\u6CA1\u6709\u4EC0\u4E48\u5B9E\u7528\u6027\uFF0C\u5176\u6838\u5FC3\u4EF7\u503C\u5728\u4E8E\u5982\u4F55\u8BBE\u8BA1\u51FA\u7B26\u5408 REST \u2EDB\u683C\u7684\u7F51\u7EDC\u63A5\u53E3\u3002</p><blockquote><p>\u8D44\u6E90\u8868\u73B0\u5C42\u72B6\u6001\u8F6C\u79FB</p><p>\u8D44\u6E90(Resources):\u7F51\u7EDC\u4E0A\u7684\u4E00\u4E2A\u5B9E\u4F53\uFF0C\u6216\u8005\u8BF4\u662F\u7F51\u7EDC\u4E0A\u7684\u4E00\u4E2A\u5177\u4F53\u4FE1\u606F\u3002</p><p>\u8868\u73B0\u5C42(Representation):\u628A\u8D44\u6E90\u5177\u4F53\u5448\u73B0\u51FA\u6765\u7684\u5F62\u5F0F\uFF0C\u53EB\u505A\u5B83\u7684\u8868\u73B0\u5C42 (Representation)\u3002 \u6BD4\u5982\uFF0C\u6587\u672C\u53EF\u4EE5\u7528 txt \u683C\u5F0F\u8868\u73B0\uFF0C\u4E5F\u53EF\u4EE5\u7528 HTML \u683C\u5F0F\u3001XML \u683C\u5F0F\u3001JSON \u683C\u5F0F\u8868\u73B0\uFF0C\u751A\u81F3\u53EF\u4EE5\u91C7\u7528\u4E8C\u8FDB\u5236\u683C\u5F0F\u3002</p><p>\u72B6\u6001\u8F6C\u5316(State Transfer):\u6BCF\u53D1\u51FA\u4E00\u4E2A\u8BF7\u6C42\uFF0C\u5C31\u4EE3\u8868\u4E86\u5BA2\u6237\u7AEF\u548C\u670D\u52A1\u5668\u7684\u4E00\u6B21\u4EA4\u4E92\u8FC7\u7A0B\u3002</p></blockquote><p>HTTP \u534F\u8BAE\uFF0C\u662F\u4E00\u4E2A\u65E0\u72B6\u6001\u534F\u8BAE\uFF0C\u5373\u6240\u6709\u7684\u72B6\u6001\u90FD\u4FDD\u5B58\u5728\u670D\u52A1\u5668\u7AEF\u3002\u56E0\u6B64\uFF0C\u5982\u679C\u5BA2\u6237\u7AEF\u60F3\u8981\u64CD\u4F5C\u670D\u52A1\u5668\uFF0C\u5FC5\u987B\u901A\u8FC7\u67D0\u79CD\u624B\u6BB5\uFF0C\u8BA9\u670D\u52A1\u5668\u7AEF\u53D1\u751F\u201C\u72B6\u6001\u8F6C\u5316\u201D(State Transfer)\u3002 \u800C\u8FD9\u79CD\u8F6C\u5316\u662F\u5EFA\u7ACB\u5728\u8868\u73B0\u5C42\u4E4B\u4E0A\u7684\uFF0C\u6240\u4EE5\u5C31\u662F \u201C\u8868\u73B0\u5C42\u72B6\u6001\u8F6C\u5316\u201D\u3002\u5177\u4F53\u8BF4\uFF0C\u5C31\u662F HTTP \u534F\u8BAE\u91CC\u9762\uFF0C\u56DB\u4E2A\u8868\u793A\u64CD\u4F5C\u65B9\u5F0F\u7684\u52A8\u8BCD: GET \u3001POST \u3001PUT \u3001DELETE\u3002 \u5B83\u4EEC\u5206\u522B\u5BF9\u5E94\u56DB\u79CD\u57FA\u672C\u64CD\u4F5C: GET \u7528\u6765\u83B7\u53D6\u8D44\u6E90\uFF0CPOST \u7528\u6765\u65B0\u5EFA\u8D44 \u6E90\uFF0CPUT \u7528\u6765\u66F4\u65B0\u8D44\u6E90\uFF0CDELETE \u7528\u6765\u5220\u9664\u8D44\u6E90\u3002</p><blockquote><p>URL:\u8D44\u6E90\u5B9A\u4F4D\u7B26\uFF0C\u901A\u8FC7URL\u5730\u5740\u53BB\u5B9A\u4F4D\u4E92\u8054\u7F51\u4E2D\u7684\u8D44\u6E90(\u62BD\u8C61\u7684\u6982\u5FF5\uFF0C\u6BD4\u5982\u56FE\u7247\u3001\u89C6\u9891\u3001app\u670D\u52A1 \u7B49)\u3002</p><p>RESTful \u2EDB\u683C URL: \u4E92\u8054\u7F51\u6240\u6709\u7684\u4E8B\u7269\u90FD\u662F\u8D44\u6E90\uFF0C\u8981\u6C42URL\u4E2D\u53EA\u6709\u8868\u793A\u8D44\u6E90\u7684\u540D\u79F0\uFF0C\u6CA1\u6709\u52A8\u8BCD\u3002<br> RESTful \u2EDB\u683C\u8D44\u6E90\u64CD\u4F5C: \u4F7F\u7528HTTP\u8BF7\u6C42\u4E2D\u7684method\u65B9\u6CD5put\u3001delete\u3001post\u3001get\u6765\u64CD\u4F5C\u8D44\u6E90\u3002\u5206\u522B\u5BF9\u5E94\u6DFB\u52A0\u3001\u5220\u9664\u3001\u4FEE\u6539\u3001\u67E5\u8BE2\u3002\u4E0D\u8FC7\u4E00\u822C\u4F7F\u7528\u65F6\u8FD8\u662F post \u548C get\u3002put \u548C delete\u51E0\u4E4E\u4E0D\u4F7F\u7528\u3002<br> RESTful \u2EDB\u683C\u8D44\u6E90\u8868\u8FF0: \u53EF\u4EE5\u6839\u636E\u9700\u6C42\u5BF9URL\u5B9A\u4F4D\u7684\u8D44\u6E90\u8FD4\u56DE\u4E0D\u540C\u7684\u8868\u8FF0(\u4E5F\u5C31\u662F\u8FD4\u56DE\u6570\u636E\u7C7B\u578B\uFF0C\u6BD4\u5982 XML\u3001JSON\u7B49\u6570\u636E\u683C\u5F0F)\u3002</p></blockquote><h4 id="_4-2-spring-mvc-\u5BF9-restful-\u7684\u652F\u6301" tabindex="-1"><a class="header-anchor" href="#_4-2-spring-mvc-\u5BF9-restful-\u7684\u652F\u6301" aria-hidden="true">#</a> 4.2 Spring MVC \u5BF9 RESTful \u7684\u652F\u6301</h4><ol><li><p>Spring MVC \u652F\u6301 RESTful \u2EDB\u683C\u8BF7\u6C42\uFF0C\u5177\u4F53\u8BB2\u7684\u5C31\u662F\u4F7F\u7528 @PathVariable \u6CE8\u89E3\u83B7\u53D6 RESTful \u2EDB\u683C\u7684\u8BF7\u6C42\u4E2D\u7684\u53C2\u6570</p></li><li><p>GET \u65B9\u6CD5\u548C DELETE \u65B9\u6CD5\u7684 URL \u4E00\u6837, \u53EF\u4EE5\u901A\u8FC7 <code>@RequestMapping()</code> \u6CE8\u89E3\u7684 <code>method</code> \u5C5E\u6027\u6307\u5B9A\u4E0D\u540C\u7684\u8BF7\u6C42\u65B9\u5F0F</p></li><li><p>\u7531\u4E8E form \u8868\u5355\u7684 method \u5C5E\u6027\u4EC5\u6709 post \u548C get, \u5982\u679C\u9700\u8981\u4F7F\u7528 put \u6216 delete, \u5219\u9700\u8981:</p></li></ol><ul><li>\u5728\u8868\u5355\u4E2D\u6DFB\u52A0\u9690\u85CF\u57DF, \u5E76\u4F7F\u7528 name \u4E3A _method, value \u4E3A\u8BF7\u6C42\u65B9\u5F0F\u7684\u5143\u7D20\u6307\u660E\u8BF7\u6C42\u65B9\u5F0F</li></ul><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>_method<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>put<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>\u5176\u4E2D, name \u662F\u56FA\u5B9A\u7684, \u4F7F\u7528 <code>_method</code></p></blockquote><ul><li>\u914D\u7F6E\u8BF7\u6C42\u65B9\u5F0F\u8FC7\u6EE4\u5668(\u5C06\u7279\u5B9A\u7684post\u8BF7\u6C42\u8F6C\u6362\u4E3Aput\u548Cdelete\u8BF7\u6C42)</li></ul><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>hiddenHttpMethodFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-class</span><span class="token punctuation">&gt;</span></span>org.springframework.web.filter.HiddenHttpMethodFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-class</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>hiddenHttpMethodFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="\u7B2C-5-\u8282-ajax-json\u4EA4\u4E92" tabindex="-1"><a class="header-anchor" href="#\u7B2C-5-\u8282-ajax-json\u4EA4\u4E92" aria-hidden="true">#</a> \u7B2C 5 \u8282 Ajax Json\u4EA4\u4E92</h3><blockquote><p>\u4EA4\u4E92:\u4E24\u4E2A\u65B9\u5411</p><p>1)\u524D\u7AEF\u5230\u540E\u53F0: \u524D\u7AEFajax\u53D1\u9001json\u683C\u5F0F\u5B57\u7B26\u4E32\uFF0C\u540E\u53F0\u76F4\u63A5\u63A5\u6536\u4E3Apojo\u53C2\u6570\uFF0C\u4F7F\u7528\u6CE8\u89E3 <code>@RequestBody</code></p><p>2)\u540E\u53F0\u5230\u524D\u7AEF: \u540E\u53F0\u76F4\u63A5\u8FD4\u56DEpojo\u5BF9\u8C61\uFF0C\u524D\u7AEF\u76F4\u63A5\u63A5\u6536\u4E3Ajson\u5BF9\u8C61\u6216\u8005\u5B57\u7B26\u4E32\uFF0C\u4F7F\u7528\u6CE8\u89E3 <code>@ResponseBody</code></p></blockquote><h4 id="_5-1-json" tabindex="-1"><a class="header-anchor" href="#_5-1-json" aria-hidden="true">#</a> 5.1 JSON</h4><p>Json\u662F\u4E00\u79CD\u4E0E\u8BED\u8A00\u65E0\u5173\u7684\u6570\u636E\u4EA4\u4E92\u683C\u5F0F\uFF0C\u5C31\u662F\u4E00\u79CD\u5B57\u7B26\u4E32\uFF0C\u53EA\u662F\u7528\u7279\u6B8A\u7B26\u53F7{}\u5185\u8868\u793A\u5BF9\u8C61\u3001[]\u5185\u8868\u793A\u6570\u7EC4\u3001&quot;&quot;\u5185\u662F\u5C5E\u6027\u6216\u503C\u3001:\u8868\u793A\u540E\u8005\u662F\u524D\u8005\u7684\u503C</p><p>{&quot;name&quot;: &quot;Michael&quot;}\u53EF\u4EE5\u7406\u89E3\u4E3A\u662F\u4E00\u4E2A\u5305\u542Bname\u4E3AMichael\u7684\u5BF9\u8C61 <code>[{&quot;name&quot;: &quot;Michael&quot;},{&quot;name&quot;: &quot;Jerry&quot;}]</code> \u5C31\u8868\u793A\u5305\u542B\u4E24\u4E2A\u5BF9\u8C61\u7684\u6570\u7EC4</p><h4 id="_5-2-requestbody-\u6CE8\u89E3" tabindex="-1"><a class="header-anchor" href="#_5-2-requestbody-\u6CE8\u89E3" aria-hidden="true">#</a> 5.2 @RequestBody \u6CE8\u89E3</h4><p><code>@RequestBody</code> \u6CE8\u89E3\u7684 Controller \u65B9\u6CD5, \u9700\u8981\u4F7F\u7528 <code>POST</code> \u7684\u8BF7\u6C42\u63D0\u4EA4\u65B9\u5F0F. \u56E0\u4E3A\u53EA\u6709 POST \u8BF7\u6C42\u624D\u6709\u8BF7\u6C42\u4F53</p><h4 id="_5-3-responsebody-\u6CE8\u89E3" tabindex="-1"><a class="header-anchor" href="#_5-3-responsebody-\u6CE8\u89E3" aria-hidden="true">#</a> 5.3 @ResponseBody \u6CE8\u89E3</h4><p><code>@ResponseBody</code> \u6CE8\u89E3\u7684\u4F5C\u7528\u662F\u5C06 controller \u7684\u65B9\u6CD5\u8FD4\u56DE\u7684\u5BF9\u8C61\u901A\u8FC7\u9002\u5F53\u7684\u8F6C\u6362\u5668\u8F6C\u6362\u4E3A\u6307\u5B9A\u7684\u683C\u5F0F\u4E4B\u540E\uFF0C\u5199\u5165\u5230response\u5BF9\u8C61\u7684body\u533A\uFF0C\u901A\u5E38\u7528\u6765\u8FD4\u56DEJSON\u6570\u636E\u6216\u8005\u662FXML\u6570\u636E\u3002</p><blockquote><p>\u6CE8\u610F: \u5728\u4F7F\u7528\u6B64\u6CE8\u89E3\u4E4B\u540E\u4E0D\u4F1A\u518D\u8D70\u89C6\u56FE\u5904\u7406\u5668\uFF0C\u800C\u662F\u76F4\u63A5\u5C06\u6570\u636E\u5199\u5165\u5230\u8F93\u5165\u6D41\u4E2D\uFF0C\u4ED6\u7684\u6548\u679C\u7B49\u540C\u4E8E\u901A\u8FC7 response \u5BF9\u8C61\u8F93\u51FA\u6307\u5B9A\u683C\u5F0F\u7684\u6570\u636E\u3002</p></blockquote><h2 id="\u7B2C\u4E8C\u90E8\u5206-spring-mvc-\u9AD8\u7EA7" tabindex="-1"><a class="header-anchor" href="#\u7B2C\u4E8C\u90E8\u5206-spring-mvc-\u9AD8\u7EA7" aria-hidden="true">#</a> \u7B2C\u4E8C\u90E8\u5206 Spring MVC \u9AD8\u7EA7</h2><h3 id="\u7B2C-1-\u8282-\u62E6\u622A\u5668-interceptor-\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#\u7B2C-1-\u8282-\u62E6\u622A\u5668-interceptor-\u4F7F\u7528" aria-hidden="true">#</a> \u7B2C 1 \u8282 \u62E6\u622A\u5668(Interceptor)\u4F7F\u7528</h3><h4 id="_1-1-\u76D1\u542C\u5668\u3001\u8FC7\u6EE4\u5668\u548C\u62E6\u622A\u5668\u5BF9\u6BD4" tabindex="-1"><a class="header-anchor" href="#_1-1-\u76D1\u542C\u5668\u3001\u8FC7\u6EE4\u5668\u548C\u62E6\u622A\u5668\u5BF9\u6BD4" aria-hidden="true">#</a> 1.1 \u76D1\u542C\u5668\u3001\u8FC7\u6EE4\u5668\u548C\u62E6\u622A\u5668\u5BF9\u6BD4</h4><ul><li><p>Servlet:\u5904\u7406Request\u8BF7\u6C42\u548CResponse\u54CD\u5E94</p></li><li><p>\u8FC7\u6EE4\u5668(Filter):\u5BF9Request\u8BF7\u6C42\u8D77\u5230\u8FC7\u6EE4\u7684\u4F5C\u7528\uFF0C\u4F5C\u7528\u5728Servlet\u4E4B\u524D\uFF0C\u5982\u679C\u914D\u7F6E\u4E3A <code>/*</code> \u53EF\u4EE5\u5BF9\u6240\u6709\u7684\u8D44\u6E90\u8BBF\u95EE(servlet\u3001js/css\u9759\u6001\u8D44\u6E90\u7B49)\u8FDB\u884C\u8FC7\u6EE4\u5904\u7406</p></li><li><p>\u76D1\u542C\u5668(Listener):\u5B9E\u73B0\u4E86javax.servlet.ServletContextListener \u63A5\u53E3\u7684\u670D\u52A1\u5668\u7AEF\u7EC4\u4EF6\uFF0C\u5B83\u968F <code>Web</code> \u5E94\u7528\u7684\u542F\u52A8\u800C\u542F\u52A8\uFF0C\u53EA\u521D\u59CB\u5316\u4E00\u6B21\uFF0C\u7136\u540E\u4F1A\u4E00\u76F4\u8FD0\u884C\u76D1\u89C6\uFF0C\u968FWeb\u5E94\u7528\u7684\u505C\u6B62\u800C\u9500\u6BC1</p></li></ul><blockquote><p>\u4F5C\u7528\u4E00:\u505A\u4E00\u4E9B\u521D\u59CB\u5316\u5DE5\u4F5C\uFF0Cweb\u5E94\u7528\u4E2Dspring\u5BB9\u5668\u542F\u52A8ContextLoaderListener</p><p>\u4F5C\u7528\u4E8C:\u76D1\u542Cweb\u4E2D\u7684\u7279\u5B9A\u4E8B\u4EF6\uFF0C\u6BD4\u5982 <code>HttpSession</code>, <code>ServletRequest</code> \u7684\u521B\u5EFA\u548C\u9500\u6BC1;\u53D8\u91CF\u7684\u521B\u5EFA\u3001\u9500\u6BC1\u548C\u4FEE\u6539\u7B49\u3002\u53EF\u4EE5\u5728\u67D0\u4E9B\u52A8\u4F5C\u524D\u540E\u589E\u52A0\u5904\u7406\uFF0C\u5B9E\u73B0\u76D1\u63A7\uFF0C\u6BD4\u5982\u7EDF\u8BA1\u5728\u7EBF\u4EBA\u6570\uFF0C\u5229\u7528 HttpSessionListener\u7B49\u3002</p></blockquote><ul><li>\u62E6\u622A\u5668(Interceptor):\u662FSpringMVC\u3001Struts\u7B49\u8868\u73B0\u5C42\u6846\u67B6\u81EA\u5DF1\u7684\uFF0C\u4E0D\u4F1A\u62E6\u622A jsp/html/css/image\u7684\u8BBF\u95EE\u7B49\uFF0C\u53EA\u4F1A\u62E6\u622A\u8BBF\u95EE\u7684\u63A7\u5236\u5668\u65B9\u6CD5(Handler)\u3002</li></ul><blockquote><p>\u4ECE\u914D\u7F6E\u7684\u2EC6\u5EA6\u4E5F\u80FD\u591F\u603B\u7ED3\u53D1\u73B0: servlet\u3001filter\u3001listener\u662F\u914D\u7F6E\u5728web.xml\u4E2D\u7684\uFF0C \u800Cinterceptor\u662F \u914D\u7F6E\u5728\u8868\u73B0\u5C42\u6846\u67B6\u81EA\u5DF1\u7684\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684</p></blockquote><blockquote><p>\u62E6\u622A\u5668\u7684\u62E6\u622A\u65F6\u673A</p><p>\u5728Handler\u4E1A\u52A1\u903B\u8F91\u6267\u884C\u4E4B\u524D\u62E6\u622A\u4E00\u6B21</p><p>\u5728Handler\u903B\u8F91\u6267\u884C\u5B8C\u6BD5\u4F46\u672A\u8DF3\u8F6C\u2EDA\u9762\u4E4B\u524D\u62E6\u622A\u4E00\u6B21</p><p>\u5728\u8DF3\u8F6C\u2EDA\u9762\u4E4B\u540E\u62E6\u622A\u4E00\u6B21</p></blockquote><h4 id="_1-2-\u81EA\u5B9A\u4E49\u62E6\u622A\u5668" tabindex="-1"><a class="header-anchor" href="#_1-2-\u81EA\u5B9A\u4E49\u62E6\u622A\u5668" aria-hidden="true">#</a> 1.2 \u81EA\u5B9A\u4E49\u62E6\u622A\u5668</h4><p>\u81EA\u5B9A\u4E49\u62E6\u622A\u5668\u5341\u5206\u7B80\u5355, \u53EA\u9700\u8981\u5B9E\u73B0 <code>org.springframework.web.servlet.HandlerInterceptor</code> \u63A5\u53E3\u5373\u53EF</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyInterceptor01</span> <span class="token keyword">implements</span> <span class="token class-name">HandlerInterceptor</span> <span class="token punctuation">{</span>

    <span class="token comment">// \u8BE5\u65B9\u6CD5\u4F1A\u5728 handler \u65B9\u6CD5\u4E1A\u52A1\u903B\u8F91\u6267\u884C\u524D\u6267\u884C</span>
    <span class="token comment">// \u8FD4\u56DE\u503C boolean \u4EE3\u8868\u662F\u5426\u653E\u884C: true \u4EE3\u8868\u653E\u884C, false \u4EE3\u8868\u7EC8\u6B62</span>
    <span class="token comment">// \u6700\u5E38\u89C1\u7684\u5E94\u7528: \u5728\u6B64\u5904\u5B8C\u6210\u6743\u9650\u6821\u9A8C\u5DE5\u4F5C</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">preHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">HandlerInterceptor</span><span class="token punctuation">.</span><span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">preHandle</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// \u8BE5\u65B9\u6CD5\u4F1A\u5728 handler \u65B9\u6CD5\u4E1A\u52A1\u903B\u8F91\u6267\u884C\u4E4B\u540E,\u5C1A\u672A\u8DF3\u8F6C\u9875\u9762\u65F6\u6267\u884C</span>
    <span class="token comment">// \u5C01\u88C5\u4E86\u89C6\u56FE\u548C\u6570\u636E,\u5C1A\u672A\u8DF3\u8F6C\u9875\u9762. \u53EF\u4EE5\u5728\u6B64\u5904\u9488\u5BF9\u8FD4\u56DE\u7684\u6570\u636E\u548C\u89C6\u56FE\u4FE1\u606F\u8FDB\u884C\u4FEE\u6539. [\u5E94\u7528\u8F83\u5C11]</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">postHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">,</span> <span class="token class-name">ModelAndView</span> modelAndView<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">HandlerInterceptor</span><span class="token punctuation">.</span><span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">postHandle</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> modelAndView<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// \u9875\u9762\u5DF2\u7ECF\u8DF3\u8F6C\u6E32\u67D3\u5B8C\u6BD5\u4E4B\u540E\u6267\u884C</span>
    <span class="token comment">// \u53EF\u4EE5\u5728\u6B64\u5904\u6355\u83B7\u51FA\u73B0\u7684\u5F02\u5E38</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterCompletion</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">,</span> <span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">HandlerInterceptor</span><span class="token punctuation">.</span><span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">afterCompletion</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>\u901A\u8FC7 Spring \u914D\u7F6E\u6587\u4EF6\u6CE8\u518C\u62E6\u622A\u5668</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>interceptors</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mujunlin.intereceptor.MyInterceptor01<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>interceptors</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u6B64\u79CD\u62E6\u622A\u5668\u914D\u7F6E\u65B9\u5F0F, \u4F1A\u62E6\u622A\u6240\u6709\u8BF7\u6C42; \u5982\u679C\u9700\u8981\u6307\u5B9A\u62E6\u622A\u89C4\u5219, \u9700\u8981\u91C7\u7528\u5982\u4E0B\u914D\u7F6E\u65B9\u5F0F:</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>interceptors</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>interceptor</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>mapping</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/**<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>exclude-mapping</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/demo/**<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mujunlin.interceptor.MyInterceptor01<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>interceptor</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>interceptors</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_1-3-\u62E6\u622A\u5668\u7684\u6267\u884C\u6D41\u7A0B" tabindex="-1"><a class="header-anchor" href="#_1-3-\u62E6\u622A\u5668\u7684\u6267\u884C\u6D41\u7A0B" aria-hidden="true">#</a> 1.3 \u62E6\u622A\u5668\u7684\u6267\u884C\u6D41\u7A0B</h4><p>\u5728\u8FD0\u884C\u7A0B\u5E8F\u65F6\uFF0C\u62E6\u622A\u5668\u7684\u6267\u884C\u662F\u6709\u4E00\u5B9A\u987A\u5E8F\u7684\uFF0C\u8BE5\u987A\u5E8F\u4E0E\u914D\u7F6E\u6587\u4EF6\u4E2D\u6240\u5B9A\u4E49\u7684\u62E6\u622A\u5668\u7684\u987A\u5E8F\u76F8\u5173\u3002 \u5355\u4E2A \u62E6\u622A\u5668\uFF0C\u5728\u7A0B\u5E8F\u4E2D\u7684\u6267\u884C\u6D41\u7A0B\u5982\u4E0B\u6240\u793A:</p><ol><li><p>\u7A0B\u5E8F\u5148\u6267\u884C <code>preHandle()</code> \u65B9\u6CD5\uFF0C\u5982\u679C\u8BE5\u65B9\u6CD5\u7684\u8FD4\u56DE\u503C\u4E3Atrue\uFF0C\u5219\u7A0B\u5E8F\u4F1A\u7EE7\u7EED\u5411\u4E0B\u6267\u884C\u5904\u7406\u5668\u4E2D\u7684\u65B9\u6CD5\uFF0C\u5426\u5219\u5C06\u4E0D\u518D\u5411\u4E0B\u6267\u884C\u3002</p></li><li><p>\u5728\u4E1A\u52A1\u5904\u7406\u5668(\u5373\u63A7\u5236\u5668Controller\u7C7B)\u5904\u7406\u5B8C\u8BF7\u6C42\u540E\uFF0C\u4F1A\u6267\u884C <code>postHandle()</code> \u65B9\u6CD5\uFF0C\u7136\u540E\u4F1A\u901A\u8FC7 <code>DispatcherServlet</code> \u5411\u5BA2\u6237\u7AEF\u8FD4\u56DE\u54CD\u5E94\u3002</p></li><li><p>\u5728 <code>DispatcherServlet</code> \u5904\u7406\u5B8C\u8BF7\u6C42\u540E\uFF0C\u624D\u4F1A\u6267\u884C <code>afterCompletion()</code> \u65B9\u6CD5\u3002</p></li></ol><h4 id="_1-4-\u591A\u4E2A\u62E6\u622A\u5668\u7684\u6267\u884C\u6D41\u7A0B" tabindex="-1"><a class="header-anchor" href="#_1-4-\u591A\u4E2A\u62E6\u622A\u5668\u7684\u6267\u884C\u6D41\u7A0B" aria-hidden="true">#</a> 1.4 \u591A\u4E2A\u62E6\u622A\u5668\u7684\u6267\u884C\u6D41\u7A0B</h4><p>\u591A\u4E2A\u62E6\u622A\u5668(\u5047\u8BBE\u6709\u4E24\u4E2A\u62E6\u622A\u5668Interceptor1\u548CInterceptor2\uFF0C\u5E76\u4E14\u5728\u914D\u7F6E\u6587\u4EF6\u4E2D\uFF0C Interceptor1\u62E6\u622A\u5668\u914D\u7F6E\u5728\u524D)\uFF0C\u5728\u7A0B\u5E8F\u4E2D\u7684\u6267\u884C\u6D41\u7A0B:</p><p>\u5F53\u6709\u591A\u4E2A\u62E6\u622A\u5668\u540C\u65F6\u5DE5\u4F5C\u65F6\uFF0C\u5B83\u4EEC\u7684 <code>preHandle()</code> \u65B9\u6CD5\u4F1A\u6309\u7167\u914D\u7F6E\u6587\u4EF6\u4E2D\u62E6\u622A\u5668\u7684\u914D\u7F6E<em>\u987A\u5E8F\u6267\u884C</em>\uFF0C \u800C\u5B83\u4EEC\u7684 <code>postHandle()</code> \u65B9\u6CD5\u548C <code>afterCompletion()</code> \u65B9\u6CD5\u5219\u4F1A\u6309\u7167\u914D\u7F6E\u987A\u5E8F\u7684<em>\u53CD\u5E8F\u6267\u884C</em></p><p><img src="`+r+`" alt="\u62E6\u622A\u5668\u6267\u884C\u987A\u5E8F"></p><h3 id="\u7B2C-2-\u8282-\u5904\u7406-multipart-\u5F62\u5F0F\u7684\u6570\u636E" tabindex="-1"><a class="header-anchor" href="#\u7B2C-2-\u8282-\u5904\u7406-multipart-\u5F62\u5F0F\u7684\u6570\u636E" aria-hidden="true">#</a> \u7B2C 2 \u8282 \u5904\u7406 multipart \u5F62\u5F0F\u7684\u6570\u636E</h3><blockquote><p>\u6587\u4EF6\u4E0A\u4F20\u5904\u7406</p></blockquote><p>\u539F\u751F Servlet \u652F\u6301\u4E0A\u4F20\u6587\u4EF6\u5904\u7406, Spring MVC \u662F\u5BF9\u539F\u751F Servlet \u7684\u5C01\u88C5, \u81EA\u7136\u4E5F\u652F\u6301, \u800C\u4E14\u4F7F\u7528\u66F4\u52A0\u65B9\u4FBF</p><p>\u5F15\u5165\u6240\u9700\u4F9D\u8D56</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>commons-fileupload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>commons-fileupload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.3.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u914D\u7F6E\u6587\u4EF6\u4E0A\u4F20\u89E3\u6790\u5668</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>multipartResolver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.web.multipart.commons.CommonsMultipartResolver<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--    \u8BBE\u7F6E\u6587\u4EF6\u4E0A\u4F20\u5927\u5C0F\u4E0A\u9650,\u5355\u4F4D:\u5B57\u8282; -1 \u4EE3\u8868\u6CA1\u6709\u9650\u5236, \u4E5F\u662F\u9ED8\u8BA4\u7684    --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxUploadSize<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>102400<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>\u914D\u7F6E\u65F6\u9700\u8981\u6CE8\u610F: bean \u7684 id \u662F\u56FA\u5B9A\u7684 <code>multipartResolver</code></p></blockquote><p>Handler \u5904\u7406\u65B9\u6CD5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/upload&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">upload</span><span class="token punctuation">(</span><span class="token class-name">MultipartFile</span> uploadFile<span class="token punctuation">,</span> <span class="token class-name">HttpSession</span> session<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u5904\u7406\u4E0A\u4F20\u6587\u4EF6</span>
    <span class="token comment">// \u91CD\u547D\u540D: xx.jpb -&gt; uuid.jpg</span>
    <span class="token class-name">String</span> originalFilename <span class="token operator">=</span> uploadFile<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> extName <span class="token operator">=</span> originalFilename<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>originalFilename<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> newFileName <span class="token operator">=</span> UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;.&quot;</span> <span class="token operator">+</span> extName<span class="token punctuation">;</span>
    <span class="token comment">// \u5B58\u50A8\u6587\u4EF6\u5230\u6307\u5B9A\u6587\u4EF6\u5939</span>
    <span class="token class-name">String</span> realPath <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">&quot;/uploads&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> datePath <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">&quot;yyyy-MM-dd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">File</span> folder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>realPath <span class="token operator">+</span> datePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>folder<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        folder<span class="token punctuation">.</span><span class="token function">mkdir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    uploadFile<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>folder<span class="token punctuation">,</span> newFileName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// TODO \u66F4\u65B0\u6570\u636E\u5E93\u6587\u4EF6\u8DEF\u5F84\u5B57\u6BB5</span>
    <span class="token keyword">return</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="\u7B2C-3-\u8282-spring-mvc-\u7684\u5F02\u5E38\u5904\u7406\u673A\u5236" tabindex="-1"><a class="header-anchor" href="#\u7B2C-3-\u8282-spring-mvc-\u7684\u5F02\u5E38\u5904\u7406\u673A\u5236" aria-hidden="true">#</a> \u7B2C 3 \u8282 Spring MVC \u7684\u5F02\u5E38\u5904\u7406\u673A\u5236</h3><p>\u5F02\u5E38\u5904\u7406\u5668</p><p>\u5728 Controller \u4E2D\u6DFB\u52A0\u5F02\u5E38\u5904\u7406\u5668</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">ArithmeticException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handleException</span><span class="token punctuation">(</span><span class="token class-name">ArithmeticException</span> exception<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>exception<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>\u6B64\u79CD\u65B9\u6CD5\u53EF\u4EE5\u5904\u7406 Controller \u4E2D\u51FA\u73B0\u7684\u5F02\u5E38, \u4F46\u4E5F\u4EC5\u9650\u4E8E\u6B64 Controller \u7C7B; \u5982\u679C\u9700\u8981\u5168\u5C40\u7684\u5F02\u5E38\u5904\u7406\u5668 :</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@ControllerAdvice</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GlobalExceptionResolver</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">ArithmeticException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ModelAndView</span> <span class="token function">handleException</span><span class="token punctuation">(</span><span class="token class-name">ArithmeticException</span> exception<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ModelAndView</span> modelAndView <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        modelAndView<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> exception<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        modelAndView<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> modelAndView<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><p><code>@ControllerAdvice</code> \u53EF\u4EE5\u6355\u83B7\u6240\u6709 Controller \u5BF9\u8C61 handler \u65B9\u6CD5\u629B\u51FA\u7684\u5F02\u5E38</p></blockquote><h3 id="\u7B2C-4-\u8282-\u57FA\u4E8Eflash\u5C5E\u6027\u7684\u8DE8\u91CD\u5B9A\u5411\u8BF7\u6C42\u6570\u636E\u4F20\u9012" tabindex="-1"><a class="header-anchor" href="#\u7B2C-4-\u8282-\u57FA\u4E8Eflash\u5C5E\u6027\u7684\u8DE8\u91CD\u5B9A\u5411\u8BF7\u6C42\u6570\u636E\u4F20\u9012" aria-hidden="true">#</a> \u7B2C 4 \u8282 \u57FA\u4E8EFlash\u5C5E\u6027\u7684\u8DE8\u91CD\u5B9A\u5411\u8BF7\u6C42\u6570\u636E\u4F20\u9012</h3><p>\u91CD\u5B9A\u5411\u65F6\u8BF7\u6C42\u53C2\u6570\u4F1A\u4E22\u5931\uFF0C\u6211\u4EEC\u5F80\u5F80\u9700\u8981\u91CD\u65B0\u643A\u5E26\u8BF7\u6C42\u53C2\u6570\uFF0C\u6211\u4EEC\u53EF\u4EE5\u8FDB\u884C\u624B\u52A8\u53C2\u6570\u62FC\u63A5:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">handleRedirect</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;redirect:handle01?name&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u4F46\u662F\u4E0A\u8FF0\u62FC\u63A5\u53C2\u6570\u7684\u65B9\u6CD5\u5C5E\u4E8E GET \u8BF7\u6C42\uFF0C\u643A\u5E26\u53C2\u6570\u2ED3\u5EA6\u6709\u9650\u5236\uFF0C\u53C2\u6570\u5B89\u5168\u6027\u4E5F\u4E0D\u9AD8.</p><p>\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528 Spring MVC \u63D0\u4F9B\u7684flash\u5C5E\u6027\u673A\u5236\uFF0C\u5411\u4E0A\u4E0B\u6587\u4E2D\u6DFB\u52A0flash\u5C5E\u6027\uFF0C\u6846\u67B6\u4F1A\u5728 session \u4E2D\u8BB0\u5F55\u8BE5\u5C5E\u6027\u503C\uFF0C\u5F53\u8DF3\u8F6C\u5230\u2EDA\u9762\u4E4B\u540E\u6846\u67B6\u4F1A\u81EA\u52A8\u5220\u9664 flash \u5C5E\u6027\uFF0C\u4E0D\u9700\u8981\u6211\u4EEC\u624B\u52A8\u5220\u9664</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">handleRedirect</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">RedirectAttributes</span> redirectAttributes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u8BBE\u7F6E\u4E86\u4E00\u4E2A flash \u7C7B\u578B\u7684\u5C5E\u6027, \u8BE5\u5C5E\u6027\u4F1A\u88AB\u6682\u5B58\u5230 session \u4E2D, \u5728\u8DF3\u8F6C\u9875\u9762\u540E\u8BE5\u5C5E\u6027\u81EA\u52A8\u4E0B\u56DE</span>
    redirectAttributes<span class="token punctuation">.</span><span class="token function">addFlashAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">&quot;redirect:handle01&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>\u901A\u8FC7\u8FD9\u79CD\u65B9\u5F0F\u8FDB\u884C\u91CD\u5B9A\u5411\u53C2\u6570\u4F20\u9012\uFF0C\u53C2\u6570\u2ED3\u5EA6\u548C\u5B89\u5168\u6027\u90FD\u5F97\u5230\u4E86\u4FDD\u969C</p><h2 id="\u7B2C\u4E09\u90E8\u5206-\u7B80\u5355\u81EA\u5B9A\u4E49-mvc-\u6846\u67B6" tabindex="-1"><a class="header-anchor" href="#\u7B2C\u4E09\u90E8\u5206-\u7B80\u5355\u81EA\u5B9A\u4E49-mvc-\u6846\u67B6" aria-hidden="true">#</a> \u7B2C\u4E09\u90E8\u5206 \u7B80\u5355\u81EA\u5B9A\u4E49 MVC \u6846\u67B6</h2><p><strong>Spring MVC \u6267\u884C\u5927\u81F4\u539F\u7406</strong></p><ul><li><p>\u524D\u6BB5\u63A7\u5236\u5668 DispatcherServlet -&gt; \u52A0\u8F7D\u6267\u884C\u7684\u914D\u7F6E\u6587\u4EF6: springmvc.xml</p></li><li><p>\u5305\u626B\u63CF, \u626B\u63CF\u6CE8\u89E3: @Controller, @Service, @RequestMapping, @Autowired</p></li><li><p>IoC \u5BB9\u5668\u8FDB\u884C\u76F8\u5E94\u7684 Bean \u521D\u59CB\u5316\u53CA\u4F9D\u8D56\u6CE8\u5165</p></li><li><p>Spring MVC \u76F8\u5173\u7EC4\u4EF6\u521D\u59CB\u5316(\u5EFA\u7ACB URL \u4E0E method \u4E4B\u95F4\u7684\u6620\u5C04\u5173\u7CFB -- HandlerMapping \u5904\u7406\u5668\u6620\u5C04\u5668)</p></li><li><p>\u7B49\u5F85\u8BF7\u6C42\u8FDB\u5165, \u5904\u7406\u8BF7\u6C42</p></li></ul><h2 id="\u7B2C\u56DB\u90E8\u5206-spring-mvc-\u6E90\u7801\u5256\u6790" tabindex="-1"><a class="header-anchor" href="#\u7B2C\u56DB\u90E8\u5206-spring-mvc-\u6E90\u7801\u5256\u6790" aria-hidden="true">#</a> \u7B2C\u56DB\u90E8\u5206 Spring MVC \u6E90\u7801\u5256\u6790</h2><h3 id="\u7B2C-1-\u8282-\u524D\u7AEF\u63A7\u5236\u5668-dispatcherservlet-\u7EE7\u627F\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#\u7B2C-1-\u8282-\u524D\u7AEF\u63A7\u5236\u5668-dispatcherservlet-\u7EE7\u627F\u7ED3\u6784" aria-hidden="true">#</a> \u7B2C 1 \u8282 \u524D\u7AEF\u63A7\u5236\u5668 DispatcherServlet \u7EE7\u627F\u7ED3\u6784</h3><p><img src="`+i+`" alt="DispatcherServlet\u7EE7\u627F\u7ED3\u6784.png"></p><p>\u8BF7\u6C42\u6765\u4E34\u540E, \u88AB doGet/doPost \u5904\u7406; \u4F9D\u6B21\u8FDB\u5165\u4E0B\u5C42, \u76F4\u5230 <code>FrameworkServlet</code> \u5F53\u4E2D\u91CD\u5199 Servlet \u7684\u8FD9\u4E24\u4E2A\u65B9\u6CD5.</p><p>\u8FDB\u5165 <code>FrameworkServlet</code> \u7684 <code>doGet/doPost</code> \u65B9\u6CD5\u5F53\u4E2D, \u53D1\u73B0\u8FD9\u4E24\u4E2A\u65B9\u6CD5\u90FD\u8C03\u7528\u4E86\u540C\u7C7B\u7684 <code>processRequest</code> \u65B9\u6CD5\u5F53\u4E2D:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">processRequest</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span>
		<span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>

	<span class="token keyword">long</span> startTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">Throwable</span> failureCause <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

	<span class="token comment">// \u83B7\u53D6\u4E0A\u4E00\u4E2A\u8BF7\u6C42\u4FDD\u5B58\u7684 LocaleContext</span>
	<span class="token class-name">LocaleContext</span> previousLocaleContext <span class="token operator">=</span> <span class="token class-name">LocaleContextHolder</span><span class="token punctuation">.</span><span class="token function">getLocaleContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// \u5EFA\u7ACB\u65B0\u7684 LocaleContext</span>
	<span class="token class-name">LocaleContext</span> localeContext <span class="token operator">=</span> <span class="token function">buildLocaleContext</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// \u83B7\u53D6\u4E0A\u4E00\u4E2A\u8BF7\u6C42\u4FDD\u5B58\u7684 RequestAttributes</span>
	<span class="token class-name">RequestAttributes</span> previousAttributes <span class="token operator">=</span> <span class="token class-name">RequestContextHolder</span><span class="token punctuation">.</span><span class="token function">getRequestAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// \u5EFA\u7ACB\u65B0\u7684 RequestAttributes</span>
	<span class="token class-name">ServletRequestAttributes</span> requestAttributes <span class="token operator">=</span> <span class="token function">buildRequestAttributes</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> previousAttributes<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token class-name">WebAsyncManager</span> asyncManager <span class="token operator">=</span> <span class="token class-name">WebAsyncUtils</span><span class="token punctuation">.</span><span class="token function">getAsyncManager</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
	asyncManager<span class="token punctuation">.</span><span class="token function">registerCallableInterceptor</span><span class="token punctuation">(</span><span class="token class-name">FrameworkServlet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">RequestBindingInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// \u5C06\u65B0\u7684 RequestAttributes \u7ED1\u5B9A\u5230 LocalThread \u5F53\u4E2D</span>
	<span class="token function">initContextHolders</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> localeContext<span class="token punctuation">,</span> requestAttributes<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">try</span> <span class="token punctuation">{</span>
		<span class="token comment">// \u5E72\u6D3B\u513F\u5566!</span>
		<span class="token function">doService</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// ... \u4E00\u5806 catch \u65B9\u6CD5</span>
	<span class="token keyword">finally</span> <span class="token punctuation">{</span>
	    <span class="token comment">// \u5904\u7406\u5B8C\u8BF7\u6C42, \u6E05\u7406\u8D44\u6E90\u76F8\u5173 ...</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>\u53D1\u73B0\u4E86\u771F\u6B63\u5E72\u6D3B\u7684 <code>doService</code> \u65B9\u6CD5, \u8FDB\u5165\u5176\u4E2D. \u8FD9\u662F\u4E00\u4E2A\u540C\u7C7B\u7684\u62BD\u8C61\u65B9\u6CD5, \u6211\u4EEC\u7EE7\u7EED\u8FDB\u5165\u5176\u771F\u6B63\u7684\u5B9E\u73B0 <code>DispatcherServlet#doService</code> \u65B9\u6CD5\u5F53\u4E2D.</p><p>\u8FDB\u5165\u540E\u6211\u4EEC\u53D1\u73B0, \u5176\u5B9E\u8FD9\u4E2A\u65B9\u6CD5\u5185\u90E8\u4E3B\u8981\u505A\u4E86\u53C2\u6570\u5904\u7406, \u7136\u540E\u8C03\u7528\u4E86\u540C\u7C7B\u7684\u6838\u5FC3\u65B9\u6CD5 <code>DispatcherServlet#doDispatch</code> :</p><h3 id="\u7B2C-2-\u8282-\u91CD\u8981\u65F6\u673A\u70B9\u5206\u6790" tabindex="-1"><a class="header-anchor" href="#\u7B2C-2-\u8282-\u91CD\u8981\u65F6\u673A\u70B9\u5206\u6790" aria-hidden="true">#</a> \u7B2C 2 \u8282 \u91CD\u8981\u65F6\u673A\u70B9\u5206\u6790</h3><ul><li>Handler\u65B9\u6CD5\u7684\u6267\u884C\u65F6\u673A</li></ul><p><code>DispatcherServlet#doDispatch</code> \u65B9\u6CD5\u4E2D:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Actually invoke the handler.</span>
mv <span class="token operator">=</span> ha<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">,</span> mappedHandler<span class="token punctuation">.</span><span class="token function">getHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>\u2EDA\u9762\u6E32\u67D3\u65F6\u673A</li></ul><p><code>DispatcherServlet#doDispatch</code> \u65B9\u6CD5\u4E2D:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token function">processDispatchResult</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">,</span> mappedHandler<span class="token punctuation">,</span> mv<span class="token punctuation">,</span> dispatchException<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u4E24\u4E2A\u91CD\u8981\u7684\u6267\u884C\u65F6\u673A\u90FD\u5728 <code>DispatcherServlet#doDispatch</code> \u65B9\u6CD5\u5F53\u4E2D, \u6211\u4EEC\u8FDB\u5165\u6B64\u65B9\u6CD5\u4E00\u63A2\u7A76\u7ADF:</p><p><strong>Spring MVC \u5904\u7406\u8BF7\u6C42\u7684\u6D41\u7A0B\u5206\u6790</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doDispatch</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
	<span class="token class-name">HttpServletRequest</span> processedRequest <span class="token operator">=</span> request<span class="token punctuation">;</span>
	<span class="token comment">// \u6267\u884C\u5668\u94FE: \u5305\u542B\u4E86\u62E6\u622A\u5668, handler \u7B49</span>
	<span class="token class-name">HandlerExecutionChain</span> mappedHandler <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token comment">// \u53EF\u4EE5\u7B80\u5355\u7406\u89E3\u4E3A\u662F\u5426\u662F\u6587\u4EF6\u4E0A\u4F20\u8BF7\u6C42</span>
	<span class="token keyword">boolean</span> multipartRequestParsed <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

	<span class="token class-name">WebAsyncManager</span> asyncManager <span class="token operator">=</span> <span class="token class-name">WebAsyncUtils</span><span class="token punctuation">.</span><span class="token function">getAsyncManager</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">try</span> <span class="token punctuation">{</span>
		<span class="token class-name">ModelAndView</span> mv <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token class-name">Exception</span> dispatchException <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			<span class="token comment">// 1. \u68C0\u67E5\u662F\u5426\u6587\u4EF6\u4E0A\u4F20\u8BF7\u6C42</span>
			processedRequest <span class="token operator">=</span> <span class="token function">checkMultipart</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
			multipartRequestParsed <span class="token operator">=</span> <span class="token punctuation">(</span>processedRequest <span class="token operator">!=</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Determine handler for the current request.</span>
			<span class="token comment">// 2.\u83B7\u53D6\u80FD\u591F\u5904\u7406\u5F53\u524D\u8BF7\u6C42\u7684 handler</span>
			mappedHandler <span class="token operator">=</span> <span class="token function">getHandler</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>mappedHandler <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// \u5982\u679C handler \u4E3A\u7A7A, \u5219\u8FD4\u56DE 404</span>
				<span class="token function">noHandlerFound</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Determine handler adapter for the current request.</span>
			<span class="token comment">// 3.\u786E\u5B9A\u5904\u7406\u8BF7\u6C42\u7684 HandlerAdapter (handler \u7684\u5B9A\u4E49\u5F62\u5F0F\u4E0D\u4E00, \u5982\u53EF\u4EE5\u5B9E\u73B0\u63A5\u53E3, \u4E5F\u53EF\u4EE5\u4F7F\u7528\u6CE8\u89E3; handler \u7684\u53C2\u6570\u7C7B\u578B\u4E5F\u4E0D\u5C3D\u76F8\u540C)</span>
			<span class="token class-name">HandlerAdapter</span> ha <span class="token operator">=</span> <span class="token function">getHandlerAdapter</span><span class="token punctuation">(</span>mappedHandler<span class="token punctuation">.</span><span class="token function">getHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Process last-modified header, if supported by the handler.</span>
			<span class="token comment">// \u5904\u7406 last-modified \u8BF7\u6C42\u5934</span>
			<span class="token class-name">String</span> method <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">boolean</span> isGet <span class="token operator">=</span> <span class="token string">&quot;GET&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>isGet <span class="token operator">||</span> <span class="token string">&quot;HEAD&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">long</span> lastModified <span class="token operator">=</span> ha<span class="token punctuation">.</span><span class="token function">getLastModified</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> mappedHandler<span class="token punctuation">.</span><span class="token function">getHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ServletWebRequest</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">checkNotModified</span><span class="token punctuation">(</span>lastModified<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> isGet<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// \u62E6\u622A\u5668\u7684\u7B2C\u4E00\u4E2A\u62E6\u622A\u65F6\u673A[1]</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>mappedHandler<span class="token punctuation">.</span><span class="token function">applyPreHandle</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// Actually invoke the handler.</span>
			<span class="token comment">// 4.\u771F\u6B63\u8C03\u7528 handler, \u8FD4\u56DE ModelAndView</span>
			mv <span class="token operator">=</span> ha<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">,</span> mappedHandler<span class="token punctuation">.</span><span class="token function">getHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>asyncManager<span class="token punctuation">.</span><span class="token function">isConcurrentHandlingStarted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// \u7ED3\u679C\u89C6\u56FE\u5BF9\u8C61\u5904\u7406: \u5982\u679C\u6CA1\u6709\u8BBE\u7F6E\u89C6\u56FE\u540D, \u5219\u8FD4\u56DE\u9ED8\u8BA4\u7684\u89C6\u56FE\u540D</span>
			<span class="token comment">// \u9ED8\u8BA4\u89C6\u56FE\u540D\u4E3A\u8BF7\u6C42\u8DEF\u5F84</span>
			<span class="token function">applyDefaultViewName</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> mv<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// \u62E6\u622A\u5668\u7684\u7B2C\u4E8C\u4E2A\u62E6\u622A\u65F6\u673A[2]</span>
			mappedHandler<span class="token punctuation">.</span><span class="token function">applyPostHandle</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">,</span> mv<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			dispatchException <span class="token operator">=</span> ex<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// As of 4.3, we&#39;re processing Errors thrown from handler methods as well,</span>
			<span class="token comment">// making them available for @ExceptionHandler methods and other scenarios.</span>
			dispatchException <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NestedServletException</span><span class="token punctuation">(</span><span class="token string">&quot;Handler dispatch failed&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// \u8DF3\u8F6C\u89C6\u56FE\u9875\u9762, \u6E32\u67D3\u89C6\u56FE</span>
		<span class="token function">processDispatchResult</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">,</span> mappedHandler<span class="token punctuation">,</span> mv<span class="token punctuation">,</span> dispatchException<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// \u62E6\u622A\u5668\u7684\u7B2C\u4E09\u4E2A\u62E6\u622A\u65F6\u673A, \u6700\u7EC8\u4F1A\u8C03\u7528[3]</span>
		<span class="token function">triggerAfterCompletion</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">,</span> mappedHandler<span class="token punctuation">,</span> ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// \u62E6\u622A\u5668\u7684\u7B2C\u4E09\u4E2A\u62E6\u622A\u65F6\u673A, \u6700\u7EC8\u4F1A\u8C03\u7528[3]</span>
		<span class="token function">triggerAfterCompletion</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">,</span> mappedHandler<span class="token punctuation">,</span>
				<span class="token keyword">new</span> <span class="token class-name">NestedServletException</span><span class="token punctuation">(</span><span class="token string">&quot;Handler processing failed&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">finally</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>asyncManager<span class="token punctuation">.</span><span class="token function">isConcurrentHandlingStarted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// Instead of postHandle and afterCompletion</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>mappedHandler <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				mappedHandler<span class="token punctuation">.</span><span class="token function">applyAfterConcurrentHandlingStarted</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token comment">// Clean up any resources used by a multipart request.</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>multipartRequestParsed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">cleanupMultipart</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br></div></div><p>\u7EB5\u89C2\u4EE3\u7801, \u6700\u4E3B\u8981\u7684\u6D41\u7A0B\u5982\u4E0B:</p><ol><li><p>\u8C03\u7528 <code>getHandler()</code> \u83B7\u53D6\u5230\u80FD\u591F\u5904\u7406\u5F53\u524D\u8BF7\u6C42\u7684\u6267\u884C\u94FE <code>HandlerExecutionChain</code>(Handler+\u62E6\u622A\u5668)</p></li><li><p>\u8C03\u7528 <code>getHandlerAdapter()</code> \u83B7\u53D6\u80FD\u591F\u6267\u884C\u4E0A\u4E00\u6B65\u4E2D\u7684 <code>Handler</code> \u7684\u9002\u914D\u5668</p></li><li><p>\u9002\u914D\u5668\u8C03\u7528 <code>Handler</code> \u6267\u884C <code>ha.handle</code> (\u603B\u4F1A\u8FD4\u56DE\u4E00\u4E2AModelAndView\u5BF9\u8C61)</p></li><li><p>\u8C03\u7528 <code>processDispatchResult()</code> \u65B9\u6CD5\u5B8C\u6210\u89C6\u56FE\u6E32\u67D3\u8DF3\u8F6C</p></li></ol><h3 id="\u7B2C-3-\u8282-\u6838\u5FC3\u6B65\u9AA4\u5256\u6790" tabindex="-1"><a class="header-anchor" href="#\u7B2C-3-\u8282-\u6838\u5FC3\u6B65\u9AA4\u5256\u6790" aria-hidden="true">#</a> \u7B2C 3 \u8282 \u6838\u5FC3\u6B65\u9AA4\u5256\u6790</h3><h4 id="_3-1-gethandler-\u7EC6\u8282" tabindex="-1"><a class="header-anchor" href="#_3-1-gethandler-\u7EC6\u8282" aria-hidden="true">#</a> 3.1 getHandler \u7EC6\u8282</h4><p>\u904D\u5386\u4E24\u4E2AHandlerMapping\uFF0C\u8BD5\u56FE\u83B7\u53D6\u80FD\u591F\u5904\u7406\u5F53\u524D\u8BF7\u6C42\u7684\u6267\u884C\u94FE</p><blockquote><p>\u4E24\u4E2A HandlerMapping:</p><p>\u4E00\u4E2A\u662F: BeanNameUrlHandlerMapping, \u8FD9\u662F\u65E9\u671F\u7248\u672C\u4E2D, \u4F7F\u7528 xml \u7684\u65B9\u5F0F\u914D\u7F6E Bean \u548C Controller \u7684</p><p>\u4E00\u4E2A\u662F: RequestMappingHandlerMapping, \u8FD9\u4E2A\u662F\u5B58\u50A8\u7684\u4F7F\u7528 <code>@RequestMapping</code> \u6CE8\u89E3\u7684 Handler</p></blockquote><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Nullable</span>
<span class="token keyword">protected</span> <span class="token class-name">HandlerExecutionChain</span> <span class="token function">getHandler</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>handlerMappings <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">HandlerMapping</span> mapping <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handlerMappings<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">HandlerExecutionChain</span> handler <span class="token operator">=</span> mapping<span class="token punctuation">.</span><span class="token function">getHandler</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>handler <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> handler<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="_3-2-gethandleradapter-\u7EC6\u8282" tabindex="-1"><a class="header-anchor" href="#_3-2-gethandleradapter-\u7EC6\u8282" aria-hidden="true">#</a> 3.2 getHandlerAdapter \u7EC6\u8282</h4><p>\u904D\u5386\u5404\u4E2AHandlerAdapter\uFF0C\u770B\u54EA\u4E2AAdapter\u652F\u6301\u5904\u7406\u5F53\u524DHandler</p><blockquote><p>HttpRequestHandlerAdapter: \u5B9E\u73B0 org.springframework.web.HttpRequestHandler \u63A5\u53E3</p><p>SimpleControllerHandlerAdapter: \u5B9E\u73B0 org.springframework.web.servlet.mvc.Controller \u63A5\u53E3</p><p>AbstractHandlerMethodAdapter: \u5B9E\u73B0 org.springframework.web.method.HandlerMethod \u63A5\u53E3 (\u8FD9\u4E2A\u63A5\u53E3\u5728 RequestMappingHandlerMapping \u4E2D\u6709\u5C01\u88C5)</p></blockquote><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token class-name">HandlerAdapter</span> <span class="token function">getHandlerAdapter</span><span class="token punctuation">(</span><span class="token class-name">Object</span> handler<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>handlerAdapters <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">HandlerAdapter</span> adapter <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handlerAdapters<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>adapter<span class="token punctuation">.</span><span class="token function">supports</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> adapter<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ServletException</span><span class="token punctuation">(</span><span class="token string">&quot;No adapter for handler [&quot;</span> <span class="token operator">+</span> handler <span class="token operator">+</span>
			<span class="token string">&quot;]: The DispatcherServlet configuration needs to include a HandlerAdapter that supports this handler&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>\u524D\u9762\u7684 handler \u548C handlerAdapter \u7684\u83B7\u53D6, \u90FD\u662F\u4ECE\u96C6\u5408\u4E2D\u76F4\u63A5\u83B7\u53D6\u548C\u5F53\u524D\u8BF7\u6C42\u5339\u914D\u7684\u7C7B\u578B. \u90A3\u4E48, \u96C6\u5408\u662F\u4EC0\u4E48\u65F6\u5019\u5F62\u6210\u7684\u5462?</p><p>\u6211\u89C9\u5F97\u662F\u5728\u7EC4\u4EF6\u521D\u59CB\u5316\u7684\u65F6\u5019</p><h4 id="_3-3-\u4E5D\u5927\u7EC4\u4EF6\u521D\u59CB\u5316\u7EC6\u8282" tabindex="-1"><a class="header-anchor" href="#_3-3-\u4E5D\u5927\u7EC4\u4EF6\u521D\u59CB\u5316\u7EC6\u8282" aria-hidden="true">#</a> 3.3 \u4E5D\u5927\u7EC4\u4EF6\u521D\u59CB\u5316\u7EC6\u8282</h4><p><strong>\u4E5D\u5927\u7EC4\u4EF6</strong></p><p>\u5728 <code>DispatcherServlet</code> \u4E2D\u5B9A\u4E49\u4E86\u4E5D\u4E2A\u5C5E\u6027, \u6BCF\u4E2A\u5C5E\u6027\u5206\u522B\u5BF9\u5E94\u4E00\u4E2A\u7EC4\u4EF6\u7C7B\u578B</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/** MultipartResolver used by this servlet. */</span>
<span class="token doc-comment comment">/** \u591A\u90E8\u4EF6\u89E3\u6790\u5668(\u6587\u4EF6\u4E0A\u4F20) */</span>
<span class="token annotation punctuation">@Nullable</span>
<span class="token keyword">private</span> <span class="token class-name">MultipartResolver</span> multipartResolver<span class="token punctuation">;</span>
<span class="token doc-comment comment">/** LocaleResolver used by this servlet. */</span>
<span class="token doc-comment comment">/** \u533A\u57DF\u5316\u89E3\u6790\u5668(\u56FD\u9645\u5316) */</span>
<span class="token annotation punctuation">@Nullable</span>
<span class="token keyword">private</span> <span class="token class-name">LocaleResolver</span> localeResolver<span class="token punctuation">;</span>
<span class="token doc-comment comment">/** ThemeResolver used by this servlet. */</span>
<span class="token doc-comment comment">/** \u4E3B\u9898\u89E3\u6790\u5668 */</span>
<span class="token annotation punctuation">@Nullable</span>
<span class="token keyword">private</span> <span class="token class-name">ThemeResolver</span> themeResolver<span class="token punctuation">;</span>
<span class="token doc-comment comment">/** List of HandlerMappings used by this servlet. */</span>
<span class="token doc-comment comment">/** \u5904\u7406\u5668\u6620\u5C04\u5668 */</span>
<span class="token annotation punctuation">@Nullable</span>
<span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">HandlerMapping</span><span class="token punctuation">&gt;</span></span> handlerMappings<span class="token punctuation">;</span>
<span class="token doc-comment comment">/** List of HandlerAdapters used by this servlet. */</span>
<span class="token doc-comment comment">/** \u5904\u7406\u5668\u9002\u914D\u5668 */</span>
<span class="token annotation punctuation">@Nullable</span>
<span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">HandlerAdapter</span><span class="token punctuation">&gt;</span></span> handlerAdapters<span class="token punctuation">;</span>
<span class="token doc-comment comment">/** List of HandlerExceptionResolvers used by this servlet. */</span>
<span class="token doc-comment comment">/** \u5F02\u5E38\u89E3\u6790\u5668 */</span>
<span class="token annotation punctuation">@Nullable</span>
<span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">HandlerExceptionResolver</span><span class="token punctuation">&gt;</span></span> handlerExceptionResolvers<span class="token punctuation">;</span>
<span class="token doc-comment comment">/** RequestToViewNameTranslator used by this servlet. */</span>
<span class="token doc-comment comment">/** \u9ED8\u8BA4\u89C6\u56FE\u540D\u8F6C\u6362\u5668(\u9ED8\u8BA4\u4F7F\u7528\u8BF7\u6C42\u8DEF\u5F84\u4F5C\u4E3A\u89C6\u56FE\u540D) */</span>
<span class="token annotation punctuation">@Nullable</span>
<span class="token keyword">private</span> <span class="token class-name">RequestToViewNameTranslator</span> viewNameTranslator<span class="token punctuation">;</span>
<span class="token doc-comment comment">/** FlashMapManager used by this servlet. */</span>
<span class="token doc-comment comment">/** \u7BA1\u7406 flash \u5C5E\u6027\u7EC4\u4EF6 */</span>
<span class="token annotation punctuation">@Nullable</span>
<span class="token keyword">private</span> <span class="token class-name">FlashMapManager</span> flashMapManager<span class="token punctuation">;</span>
<span class="token doc-comment comment">/** List of ViewResolvers used by this servlet. */</span>
<span class="token doc-comment comment">/** \u89C6\u56FE\u89E3\u6790\u5668 */</span>
<span class="token annotation punctuation">@Nullable</span>
<span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ViewResolver</span><span class="token punctuation">&gt;</span></span> viewResolvers<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><blockquote><p>\u4E5D\u5927\u7EC4\u4EF6\u90FD\u662F\u5B9A\u4E49\u4E86\u63A5\u53E3\uFF0C\u63A5\u53E3\u5176\u5B9E\u5C31\u662F\u5B9A\u4E49\u4E86\u8BE5\u7EC4\u4EF6\u7684\u89C4\u8303\uFF0C(\u9762\u5411\u63A5\u53E3\u5F00\u53D1\u7684\u597D\u5904)</p><p>\u6BD4\u5982ViewResolver\u3001HandlerAdapter \u7B49\u90FD\u662F\u63A5\u53E3</p></blockquote><p><strong>\u521D\u59CB\u5316\u7EC6\u8282</strong></p><p>Spring \u5BB9\u5668\u542F\u52A8\u65F6, \u5728\u6838\u5FC3\u65B9\u6CD5 <code>org.springframework.context.support.AbstractApplicationContext#refresh</code> \u4E2D\u8C03\u7528\u4E86 <code>onRefresh()</code> \u65B9\u6CD5, \u8BE5\u65B9\u6CD5\u7531\u5B50\u7C7B\u5B9E\u73B0.</p><p>DispatcherServlet \u505A\u4E86\u5B9E\u73B0(\u521D\u59CB\u5316\u4E5D\u5927\u7EC4\u4EF6)</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onRefresh</span><span class="token punctuation">(</span><span class="token class-name">ApplicationContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">initStrategies</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u521D\u59CB\u5316\u7B56\u7565</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">initStrategies</span><span class="token punctuation">(</span><span class="token class-name">ApplicationContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">initMultipartResolver</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">initLocaleResolver</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">initThemeResolver</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">initHandlerMappings</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">initHandlerAdapters</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">initHandlerExceptionResolvers</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">initRequestToViewNameTranslator</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">initViewResolvers</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">initFlashMapManager</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>\u5728\u6B64\u6211\u4EEC\u6838\u5FC3\u5173\u6CE8 <code>initHandlerMappings</code> \u65B9\u6CD5</p><p><strong>initHandlerMappings</strong></p>`,224),b=a("\u8FD9\u90E8\u5206\u5185\u5BB9\u53EF\u4EE5\u53C2\u8003: "),d={href:"https://https://blog.csdn.net/qq_38410730/article/details/79507465",target:"_blank",rel:"noopener noreferrer"},g=a("https://https://blog.csdn.net/qq_38410730/article/details/79507465"),v=s(`<div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">initHandlerMappings</span><span class="token punctuation">(</span><span class="token class-name">ApplicationContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>handlerMappings <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token comment">// \u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0CSpring MVC\u4F1A\u52A0\u8F7D\u5728\u5F53\u524D\u7CFB\u7EDF\u4E2D\u6240\u6709\u5B9E\u73B0\u4E86HandlerMapping\u63A5\u53E3\u7684bean\uFF0C\u518D\u8FDB\u884C\u6309\u4F18\u5148\u7EA7\u6392\u5E8F\u3002</span>
	<span class="token comment">// \u5982\u679C\u53EA\u671F\u671BSpring MVC\u53EA\u52A0\u8F7D\u6307\u5B9A\u7684HandlerMapping\uFF0C\u53EF\u4EE5\u4FEE\u6539 web.xml \u4E2D\u7684DispatcherServlet\u7684\u521D\u59CB\u5316\u53C2\u6570\uFF0C\u5C06detectAllHandlerMappings\u7684\u503C\u8BBE\u7F6E\u4E3Afalse\u3002</span>
	<span class="token comment">// \u8FD9\u6837\uFF0CSpring MVC\u5C31\u53EA\u4F1A\u67E5\u627E\u540D\u4E3A\u201ChandlerMapping\u201D\u7684bean\uFF0C\u5E76\u4F5C\u4E3A\u5F53\u524D\u7CFB\u7EDF\u7684\u552F\u4E00\u7684HandlerMapping\u3002</span>
	<span class="token comment">// \u6240\u4EE5\u5728DispatcherServlet\u7684initHandlerMappings()\u65B9\u6CD5\u4E2D\uFF0C\u4F18\u5148\u5224\u65ADdetectAllHandlerMappings\u7684\u503C\uFF0C\u518D\u8FDB\u884C\u4E0B\u9762\u5185\u5BB9\u3002</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>detectAllHandlerMappings<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Find all HandlerMappings in the ApplicationContext, including ancestor contexts.</span>
		<span class="token comment">// \u5728\u5BB9\u5668\u4E2D\u6839\u636E\u7C7B\u578B\u67E5\u627E\u6240\u6709\u7684 HandlerMapping</span>
		<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">HandlerMapping</span><span class="token punctuation">&gt;</span></span> matchingBeans <span class="token operator">=</span>
				<span class="token class-name">BeanFactoryUtils</span><span class="token punctuation">.</span><span class="token function">beansOfTypeIncludingAncestors</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token class-name">HandlerMapping</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>matchingBeans<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>handlerMappings <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>matchingBeans<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// We keep HandlerMappings in sorted order.</span>
			<span class="token class-name">AnnotationAwareOrderComparator</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>handlerMappings<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token punctuation">{</span>
		<span class="token comment">// \u5728 IoC \u4E2D\u6309\u7167\u56FA\u5B9A\u540D\u79F0\u53BB\u67E5\u627E</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			<span class="token class-name">HandlerMapping</span> hm <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span>HANDLER_MAPPING_BEAN_NAME<span class="token punctuation">,</span> <span class="token class-name">HandlerMapping</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>handlerMappings <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singletonList</span><span class="token punctuation">(</span>hm<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NoSuchBeanDefinitionException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// Ignore, we&#39;ll add a default HandlerMapping later.</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// Ensure we have at least one HandlerMapping, by registering</span>
	<span class="token comment">// a default HandlerMapping if no other mappings are found.</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>handlerMappings <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// \u6700\u540E\u4ECD\u7136\u4E3A\u7A7A\u7684\u8BDD, \u5C31\u6309\u7167\u9ED8\u8BA4\u7B56\u7565\u751F\u6210</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>handlerMappings <span class="token operator">=</span> <span class="token function">getDefaultStrategies</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token class-name">HandlerMapping</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isTraceEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			logger<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">&quot;No HandlerMappings declared for servlet &#39;&quot;</span> <span class="token operator">+</span> <span class="token function">getServletName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span>
					<span class="token string">&quot;&#39;: using default strategies from DispatcherServlet.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">HandlerMapping</span> mapping <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handlerMappings<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>mapping<span class="token punctuation">.</span><span class="token function">usesPathPatterns</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>parseRequestPath <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><p>\u57FA\u672C\u6D41\u7A0B\u5C31\u662F:</p><p>\u5982\u679C\u6CA1\u6709\u6307\u5B9A\u6309\u540D\u79F0\u67E5\u627E\u5B9E\u4F8B\u5C31\u6309\u7167\u7C7B\u578B\u53BB\u5BB9\u5668\u4E2D\u67E5\u627E\u5B9E\u4F8B; \u5982\u679C\u6307\u5B9A\u4E86\u6309\u7167\u540D\u79F0\u67E5\u627E\u5219\u6309\u7167\u540D\u79F0\u53BB\u5BB9\u5668\u4E2D\u67E5\u627E.</p><p>\u5982\u679C\u6CA1\u6709\u627E\u5230, \u5219\u6309\u7167\u9ED8\u8BA4\u7684\u7B56\u7565\u5546\u57CE\u5B9E\u4F8B. \u6211\u4EEC\u8FDB\u5165\u9ED8\u8BA4\u7684\u7B56\u7565\u5F53\u4E2D:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">getDefaultStrategies</span><span class="token punctuation">(</span><span class="token class-name">ApplicationContext</span> context<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> strategyInterface<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// \u5982\u679C\u9ED8\u8BA4\u7B56\u7565\u7684 Properties \u4E3A\u7A7A\u5219\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>defaultStrategies <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			<span class="token comment">// Load default strategy implementations from properties file.</span>
			<span class="token comment">// This is currently strictly internal and not meant to be customized</span>
			<span class="token comment">// by application developers.</span>
			<span class="token comment">// \u6CE8: DEFAULT_STRATEGIES_PATH = DispatcherServlet.properties</span>
			<span class="token class-name">ClassPathResource</span> resource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathResource</span><span class="token punctuation">(</span>DEFAULT_STRATEGIES_PATH<span class="token punctuation">,</span> <span class="token class-name">DispatcherServlet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			defaultStrategies <span class="token operator">=</span> <span class="token class-name">PropertiesLoaderUtils</span><span class="token punctuation">.</span><span class="token function">loadProperties</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span><span class="token string">&quot;Could not load &#39;&quot;</span> <span class="token operator">+</span> DEFAULT_STRATEGIES_PATH <span class="token operator">+</span> <span class="token string">&quot;&#39;: &quot;</span> <span class="token operator">+</span> ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token class-name">String</span> key <span class="token operator">=</span> strategyInterface<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">String</span> value <span class="token operator">=</span> defaultStrategies<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> classNames <span class="token operator">=</span> <span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">commaDelimitedListToStringArray</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> strategies <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>classNames<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> className <span class="token operator">:</span> classNames<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		    <span class="token comment">// \u5B9E\u4F8B\u5316 Bean \u5E76\u6DFB\u52A0\u5230\u5BB9\u5668\u4E2D\u548C strategies \u4E2D ...</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> strategies<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">emptyList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>\u5C06\u9ED8\u8BA4\u7B56\u7565\u7684\u914D\u7F6E\u4FE1\u606F\u653E\u5728\u4E86\u540D\u4E3A <code>DispatcherServlet.properties</code> \u7684\u6587\u4EF6\u5F53\u4E2D:</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">org.springframework.web.servlet.LocaleResolver</span><span class="token punctuation">=</span><span class="token value attr-value">org.springframework.web.servlet.i18n.AcceptHeaderLocaleResolver</span>

<span class="token key attr-name">org.springframework.web.servlet.ThemeResolver</span><span class="token punctuation">=</span><span class="token value attr-value">org.springframework.web.servlet.theme.FixedThemeResolver</span>

<span class="token key attr-name">org.springframework.web.servlet.HandlerMapping</span><span class="token punctuation">=</span><span class="token value attr-value">org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping,\\
	org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping,\\
	org.springframework.web.servlet.function.support.RouterFunctionMapping</span>

<span class="token key attr-name">org.springframework.web.servlet.HandlerAdapter</span><span class="token punctuation">=</span><span class="token value attr-value">org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter,\\
	org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter,\\
	org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter,\\
	org.springframework.web.servlet.function.support.HandlerFunctionAdapter</span>


<span class="token key attr-name">org.springframework.web.servlet.HandlerExceptionResolver</span><span class="token punctuation">=</span><span class="token value attr-value">org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver,\\
	org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver,\\
	org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver</span>

<span class="token key attr-name">org.springframework.web.servlet.RequestToViewNameTranslator</span><span class="token punctuation">=</span><span class="token value attr-value">org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator</span>

<span class="token key attr-name">org.springframework.web.servlet.ViewResolver</span><span class="token punctuation">=</span><span class="token value attr-value">org.springframework.web.servlet.view.InternalResourceViewResolver</span>

<span class="token key attr-name">org.springframework.web.servlet.FlashMapManager</span><span class="token punctuation">=</span><span class="token value attr-value">org.springframework.web.servlet.support.SessionFlashMapManager</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>\u5728\u6B64\u5904\u914D\u7F6E\u4E86\u516B\u5927\u7EC4\u4EF6\u7684\u9ED8\u8BA4\u5B9E\u73B0. \u5176\u4ED6\u516B\u5927\u7EC4\u4EF6\u7684\u521D\u59CB\u5316\u903B\u8F91\u4E5F\u662F\u4E0E\u6B64\u7C7B\u4F3C: \u5148\u901A\u8FC7\u7C7B\u578B\u6216\u56FA\u5B9A\u540D\u79F0\u4ECE\u5BB9\u5668\u4E2D\u67E5\u627E, \u627E\u4E0D\u5230\u4E86\u518D\u4F7F\u7528\u9ED8\u8BA4\u7B56\u7565\u751F\u6210.</p><blockquote><p>\u4E3A\u4EC0\u4E48\u662F\u516B\u5927\u7EC4\u4EF6? \u8FD8\u6709\u4E00\u4E2A\u7EC4\u4EF6\u5462?</p><p>\u8FD8\u6709\u4E00\u4E2A\u7EC4\u4EF6\u6BD4\u8F83\u7279\u6B8A: MultipartResolver</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">initMultipartResolver</span><span class="token punctuation">(</span><span class="token class-name">ApplicationContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">try</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>multipartResolver <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span>MULTIPART_RESOLVER_BEAN_NAME<span class="token punctuation">,</span> <span class="token class-name">MultipartResolver</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isTraceEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			logger<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">&quot;Detected &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>multipartResolver<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isDebugEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;Detected &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>multipartResolver<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NoSuchBeanDefinitionException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Default is no multipart resolver.</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>multipartResolver <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isTraceEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			logger<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">&quot;No MultipartResolver &#39;&quot;</span> <span class="token operator">+</span> MULTIPART_RESOLVER_BEAN_NAME <span class="token operator">+</span> <span class="token string">&quot;&#39; declared&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>\u8FD9\u4E2A\u7EC4\u4EF6\u6BD4\u8F83\u7279\u6B8A, \u4ED6\u5E76\u4E0D\u6839\u636E\u7C7B\u578B\u67E5\u627E, \u800C\u662F\u76F4\u63A5\u6839\u636E BeanId \u67E5\u627E; \u627E\u4E0D\u5230\u4E86\u4E5F\u4E0D\u4F7F\u7528\u9ED8\u8BA4\u7B56\u7565\u751F\u6210,\u800C\u662F\u76F4\u63A5\u629B\u51FA\u5F02\u5E38.</p><p>\u8FD9\u4E5F\u662F\u4E3A\u4EC0\u4E48\u914D\u7F6E\u6587\u4EF6\u4E0A\u4F20\u89E3\u6790\u5668\u7684\u65F6\u5019\u8981\u4F7F\u7528\u56FA\u5B9A\u7684 BeanId \u7684\u539F\u56E0</p></blockquote><h4 id="_3-4-handle-\u65B9\u6CD5\u7EC6\u8282" tabindex="-1"><a class="header-anchor" href="#_3-4-handle-\u65B9\u6CD5\u7EC6\u8282" aria-hidden="true">#</a> 3.4 handle \u65B9\u6CD5\u7EC6\u8282</h4><p>handle \u65B9\u6CD5\u662F\u771F\u6B63\u5904\u7406\u8BF7\u6C42\u7684\u65B9\u6CD5:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 4.\u771F\u6B63\u8C03\u7528 handler, \u8FD4\u56DE ModelAndView</span>
mv <span class="token operator">=</span> ha<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">,</span> mappedHandler<span class="token punctuation">.</span><span class="token function">getHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u8FDB\u5165\u65B9\u6CD5 <code>AbstractHandlerMethodAdapter#handle</code> \u5F53\u4E2D:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token annotation punctuation">@Nullable</span>
<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">ModelAndView</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">)</span>
		<span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">handleInternal</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">HandlerMethod</span><span class="token punctuation">)</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>\u7EE7\u7EED\u8FDB\u5165\u5176\u5185\u90E8\u65B9\u6CD5 <code>RequestMappingHandlerAdapter#handleInternal</code> :</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token class-name">ModelAndView</span> <span class="token function">handleInternal</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span>
		<span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">HandlerMethod</span> handlerMethod<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
	<span class="token class-name">ModelAndView</span> mav<span class="token punctuation">;</span>
	<span class="token function">checkRequest</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// Execute invokeHandlerMethod in synchronized block if required.</span>
	<span class="token comment">// \u5F53\u524D\u662F\u5426\u9700\u8981\u652F\u6301\u5728\u540C\u4E00\u4E2A session \u4E2D\u53EA\u80FD\u7EBF\u6027\u7684\u5904\u7406\u8BF7\u6C42</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>synchronizeOnSession<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// \u83B7\u53D6\u5F53\u524D\u8BF7\u6C42 session</span>
		<span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>session <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// \u4E3A\u5F53\u524D session \u751F\u6210\u4E00\u4E2A\u552F\u4E00\u7684\u53EF\u4EE5\u7528\u4E8E\u9501\u5B9A\u7684 key</span>
			<span class="token class-name">Object</span> mutex <span class="token operator">=</span> <span class="token class-name">WebUtils</span><span class="token punctuation">.</span><span class="token function">getSessionMutex</span><span class="token punctuation">(</span>session<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">synchronized</span> <span class="token punctuation">(</span>mutex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// \u5BF9 HandlerMethod \u8FDB\u884C\u53C2\u6570\u7B49\u7684\u9002\u914D, \u5E76\u8C03\u7528\u76EE\u6807\u65B9\u6CD5</span>
				mav <span class="token operator">=</span> <span class="token function">invokeHandlerMethod</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> handlerMethod<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token comment">// No HttpSession available -&gt; no mutex necessary</span>
			<span class="token comment">// \u5982\u679C\u5F53\u524D\u4E0D\u5B58\u5728 session, \u5219\u76F4\u63A5\u5BF9 HandlerMethod \u8FDB\u884C\u9002\u914D</span>
			mav <span class="token operator">=</span> <span class="token function">invokeHandlerMethod</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> handlerMethod<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token punctuation">{</span>
		<span class="token comment">// No synchronization on session demanded at all...</span>
		<span class="token comment">// \u5982\u5F53\u524D\u4E0D\u9700\u8981\u5BF9 session \u8FDB\u884C\u540C\u6B65\u5904\u7406, \u5219\u76F4\u63A5\u5BF9 HandlerMethod \u8FDB\u884C\u9002\u914D</span>
		mav <span class="token operator">=</span> <span class="token function">invokeHandlerMethod</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> handlerMethod<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>response<span class="token punctuation">.</span><span class="token function">containsHeader</span><span class="token punctuation">(</span>HEADER_CACHE_CONTROL<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">getSessionAttributesHandler</span><span class="token punctuation">(</span>handlerMethod<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hasSessionAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">applyCacheSeconds</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cacheSecondsForSessionAttributeHandlers<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token function">prepareResponse</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> mav<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><p>\u4E0D\u8BBA session \u662F\u5426\u9700\u8981\u540C\u6B65\u5904\u7406\u7684\u652F\u6301, \u6700\u7EC8\u90FD\u4F1A\u8FDB\u5165\u5230 <code>RequestMappingHandlerAdapter#invokeHandlerMethod</code> \u5F53\u4E2D:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Nullable</span>
<span class="token keyword">protected</span> <span class="token class-name">ModelAndView</span> <span class="token function">invokeHandlerMethod</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span>
		<span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">HandlerMethod</span> handlerMethod<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
	<span class="token class-name">ServletWebRequest</span> webRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServletWebRequest</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">try</span> <span class="token punctuation">{</span>
		<span class="token comment">// \u83B7\u53D6\u5BB9\u5668\u4E2D\u5168\u5C40\u914D\u7F6E\u7684 InitBinder \u548C\u5F53\u524D HandlerMethod \u6240\u5BF9\u5E94\u7684 Controller \u4E2D\u914D\u7F6E\u7684 InitBinder, \u7528\u4E8E\u53C2\u6570\u7684\u7ED1\u5B9A.</span>
		<span class="token comment">// InitBinder \u53EF\u7528\u4E8E\u53C2\u6570\u7C7B\u578B\u7684\u8F6C\u6362</span>
		<span class="token class-name">WebDataBinderFactory</span> binderFactory <span class="token operator">=</span> <span class="token function">getDataBinderFactory</span><span class="token punctuation">(</span>handlerMethod<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// \u83B7\u53D6\u5BB9\u5668\u4E2D\u5168\u5C40\u914D\u7F6E\u7684 ModelAttribute \u548C\u5F53\u524D HandlerMethod \u6240\u5BF9\u5E94\u7684 Controller \u4E2D\u914D\u7F6E\u7684 ModelAttribute</span>
		<span class="token comment">// \u8FD9\u4E9B\u914D\u7F6E\u7684\u65B9\u6CD5\u5C06\u4F1A\u5728\u76EE\u6807\u65B9\u6CD5\u8C03\u7528\u524D\u6267\u884C</span>
		<span class="token class-name">ModelFactory</span> modelFactory <span class="token operator">=</span> <span class="token function">getModelFactory</span><span class="token punctuation">(</span>handlerMethod<span class="token punctuation">,</span> binderFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// \u5C06 HandlerMethod \u5C01\u88C5\u6210\u4E00\u4E2A ServletInvocableHandlerMethod \u5BF9\u8C61</span>
		<span class="token class-name">ServletInvocableHandlerMethod</span> invocableMethod <span class="token operator">=</span> <span class="token function">createInvocableHandlerMethod</span><span class="token punctuation">(</span>handlerMethod<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>argumentResolvers <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// \u8BBE\u7F6E\u5F53\u524D\u5BB9\u5668\u4E2D\u914D\u7F6E\u7684\u6240\u6709 ArgumentResolver (\u7528\u4E8E\u89E3\u6790\u4E0D\u540C\u7C7B\u578B\u7684\u53C2\u6570)</span>
			invocableMethod<span class="token punctuation">.</span><span class="token function">setHandlerMethodArgumentResolvers</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>argumentResolvers<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>returnValueHandlers <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// \u8BBE\u7F6E\u5F53\u524D\u5BB9\u5668\u4E2D\u914D\u7F6E\u7684\u6240\u6709 ReturnValueHandler (\u7528\u4E8E\u89E3\u6790\u4E0D\u540C\u7C7B\u578B\u7684\u8FD4\u56DE\u503C)</span>
			invocableMethod<span class="token punctuation">.</span><span class="token function">setHandlerMethodReturnValueHandlers</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>returnValueHandlers<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		invocableMethod<span class="token punctuation">.</span><span class="token function">setDataBinderFactory</span><span class="token punctuation">(</span>binderFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
		invocableMethod<span class="token punctuation">.</span><span class="token function">setParameterNameDiscoverer</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>parameterNameDiscoverer<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">ModelAndViewContainer</span> mavContainer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndViewContainer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		mavContainer<span class="token punctuation">.</span><span class="token function">addAllAttributes</span><span class="token punctuation">(</span><span class="token class-name">RequestContextUtils</span><span class="token punctuation">.</span><span class="token function">getInputFlashMap</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// \u8FD9\u91CC initModel \u65B9\u6CD5\u4E3B\u8981\u4F5C\u7528\u662F\u8C03\u7528\u524D\u9762\u83B7\u53D6\u5230\u7684 @ModelAttribute \u6807\u6CE8\u7684\u65B9\u6CD5</span>
		<span class="token comment">// \u4ECE\u800C\u8FBE\u5230\u5728 handler \u8C03\u7528\u4E4B\u524D\u6267\u884C\u7684\u76EE\u7684</span>
		modelFactory<span class="token punctuation">.</span><span class="token function">initModel</span><span class="token punctuation">(</span>webRequest<span class="token punctuation">,</span> mavContainer<span class="token punctuation">,</span> invocableMethod<span class="token punctuation">)</span><span class="token punctuation">;</span>
		mavContainer<span class="token punctuation">.</span><span class="token function">setIgnoreDefaultModelOnRedirect</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ignoreDefaultModelOnRedirect<span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">// \u5F02\u6B65\u8BF7\u6C42\u5904\u7406\u76F8\u5173</span>
		<span class="token comment">// ...</span>
		
		<span class="token comment">// \u5BF9\u8BF7\u6C42\u53C2\u6570\u8FDB\u884C\u5904\u7406, \u8C03\u7528\u76EE\u6807 HandlerMethod \u65B9\u6CD5, \u5E76\u5C06\u8FD4\u56DE\u503C\u5C01\u88C5\u6210\u4E00\u4E2A ModelAndView \u5BF9\u8C61</span>
		invocableMethod<span class="token punctuation">.</span><span class="token function">invokeAndHandle</span><span class="token punctuation">(</span>webRequest<span class="token punctuation">,</span> mavContainer<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>asyncManager<span class="token punctuation">.</span><span class="token function">isConcurrentHandlingStarted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// \u5BF9\u5C01\u88C5\u7684 ModelAndView \u8FDB\u884C\u5904\u7406, \u4E3B\u8981\u662F\u5224\u65AD\u5F53\u524D\u8BF7\u6C42\u662F\u5426\u8FDB\u884C\u4E86\u91CD\u5B9A\u5411;</span>
		<span class="token comment">// \u5982\u679C\u8FDB\u884C\u4E86\u91CD\u5B9A\u5411, \u662F\u5426\u9700\u8981\u5C06 FlashAttribute \u5C01\u88C5\u5230\u65B0\u7684\u8BF7\u6C42\u4E2D</span>
		<span class="token keyword">return</span> <span class="token function">getModelAndView</span><span class="token punctuation">(</span>mavContainer<span class="token punctuation">,</span> modelFactory<span class="token punctuation">,</span> webRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">finally</span> <span class="token punctuation">{</span>
		webRequest<span class="token punctuation">.</span><span class="token function">requestCompleted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><p>\u7EE7\u7EED\u8FDB\u5165\u6838\u5FC3\u65B9\u6CD5 <code>ServletInvocableHandlerMethod#invokeAndHandle</code> \u5F53\u4E2D:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">invokeAndHandle</span><span class="token punctuation">(</span><span class="token class-name">ServletWebRequest</span> webRequest<span class="token punctuation">,</span> <span class="token class-name">ModelAndViewContainer</span> mavContainer<span class="token punctuation">,</span>
		<span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> providedArgs<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
	<span class="token comment">// \u5BF9\u76EE\u6807 handler \u7684\u53C2\u6570\u8FDB\u884C\u5904\u7406, \u5E76\u8C03\u7528\u76EE\u6807 handler</span>
	<span class="token class-name">Object</span> returnValue <span class="token operator">=</span> <span class="token function">invokeForRequest</span><span class="token punctuation">(</span>webRequest<span class="token punctuation">,</span> mavContainer<span class="token punctuation">,</span> providedArgs<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// \u8BBE\u7F6E\u76F8\u5173\u8FD4\u56DE\u72B6\u6001</span>
	<span class="token function">setResponseStatus</span><span class="token punctuation">(</span>webRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// \u8BBE\u7F6E mavContainer \u7684\u5904\u7406\u72B6\u6001</span>
	<span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>\u7EE7\u7EED\u8FDB\u5165\u8C03\u7528\u7684\u6838\u5FC3\u65B9\u6CD5 <code>InvocableHandlerMethod#invokeForRequest</code> :</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Nullable</span>
<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invokeForRequest</span><span class="token punctuation">(</span><span class="token class-name">NativeWebRequest</span> request<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">ModelAndViewContainer</span> mavContainer<span class="token punctuation">,</span>
		<span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> providedArgs<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
	<span class="token comment">// \u5C06 request \u4E2D\u7684\u53C2\u6570\u8F6C\u6362\u4E3A\u5F53\u524D handler \u7684\u53C2\u6570\u5F62\u5F0F</span>
	<span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token operator">=</span> <span class="token function">getMethodArgumentValues</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> mavContainer<span class="token punctuation">,</span> providedArgs<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isTraceEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		logger<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">&quot;Arguments: &quot;</span> <span class="token operator">+</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// \u7ED3\u5408\u7ECF\u8FC7\u5904\u7406\u540E\u7684\u53C2\u6570, \u4F7F\u7528\u53CD\u5C04\u5BF9\u76EE\u6807\u65B9\u6CD5\u8FDB\u884C\u8C03\u7528</span>
	<span class="token keyword">return</span> <span class="token function">doInvoke</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>\u6B64\u5904\u4E3B\u8981\u6709\u4E24\u4E2A\u6B65\u9AA4: \u5904\u7406\u53C2\u6570 \u548C \u8C03\u7528 handler</p><p>\u6211\u4EEC\u9996\u5148\u6765\u770B\u5BF9\u53C2\u6570\u5982\u4F55\u8FDB\u884C\u5904\u7406, \u8FDB\u5165\u5230 <code>InvocableHandlerMethod#getMethodArgumentValues</code> \u5F53\u4E2D:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getMethodArgumentValues</span><span class="token punctuation">(</span><span class="token class-name">NativeWebRequest</span> request<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">ModelAndViewContainer</span> mavContainer<span class="token punctuation">,</span>
		<span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> providedArgs<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
	<span class="token comment">// \u83B7\u53D6\u5F53\u524D handler \u6240\u58F0\u660E\u7684\u6240\u6709\u53C2\u6570, \u4E3B\u8981\u5305\u62EC: \u53C2\u6570\u540D, \u53C2\u6570\u7C7B\u578B, \u53C2\u6570\u4F4D\u7F6E, \u6240\u6807\u6CE8\u7684\u5C5E\u6027\u7B49\u7B49...</span>
	<span class="token class-name">MethodParameter</span><span class="token punctuation">[</span><span class="token punctuation">]</span> parameters <span class="token operator">=</span> <span class="token function">getMethodParameters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">ObjectUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>parameters<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> EMPTY_ARGS<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span>parameters<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> parameters<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">MethodParameter</span> parameter <span class="token operator">=</span> parameters<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
		parameter<span class="token punctuation">.</span><span class="token function">initParameterNameDiscovery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>parameterNameDiscoverer<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// providedArgs \u662F\u8C03\u7528\u65B9\u63D0\u4F9B\u7684\u53C2\u6570, \u4E3B\u8981\u662F\u5224\u65AD\u8FD9\u4E9B\u53C2\u6570\u4E2D\u662F\u5426\u6709\u5F53\u524D\u63D0\u4F9B\u7684\u7C7B\u578B. \u5982\u679C\u6709, \u5219\u76F4\u63A5\u4F7F\u7528\u8C03\u7528\u65B9\u63D0\u4F9B\u7684\u53C2\u6570.</span>
		<span class="token comment">// \u5BF9\u8BF7\u6C42\u800C\u8A00, \u9ED8\u8BA4\u60C5\u51B5\u4E0B, \u8C03\u7528\u65B9\u63D0\u4F9B\u7684\u53C2\u6570\u90FD\u662F\u957F\u5EA6\u4E3A 0 \u7684\u6570\u7EC4</span>
		args<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">findProvidedArgument</span><span class="token punctuation">(</span>parameter<span class="token punctuation">,</span> providedArgs<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>args<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">continue</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//\u5982\u679C\u5728\u8C03\u7528\u65B9\u63D0\u4F9B\u7684\u53C2\u6570\u4E2D\u4E0D\u80FD\u627E\u5230\u5F53\u524D\u7C7B\u578B\u7684\u53C2\u6570\u503C, \u5219\u904D\u5386 Spring \u5BB9\u5668\u4E2D\u6240\u6709\u7684 ArgumentResolver \u5224\u65AD\u54EA\u79CD\u7C7B\u578B\u7684 Resolver \u652F\u6301\u5BF9\u5F53\u524D\u53C2\u6570\u7684\u89E3\u6790</span>
		<span class="token comment">// \u8FD9\u91CC\u7684\u5224\u65AD\u65B9\u5F0F\u5176\u5B9E\u6BD4\u8F83\u7B80\u5355, \u6BD4\u5982 RequestParamMethodArgumentResolver \u5C31\u53EA\u5224\u65AD\u662F\u5426\u4F7F\u7528\u4E86 @RequestParam \u6CE8\u89E3</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>resolvers<span class="token punctuation">.</span><span class="token function">supportsParameter</span><span class="token punctuation">(</span>parameter<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span><span class="token function">formatArgumentError</span><span class="token punctuation">(</span>parameter<span class="token punctuation">,</span> <span class="token string">&quot;No suitable resolver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			<span class="token comment">// \u5982\u679C\u627E\u5230\u80FD\u591F\u5BF9\u5F53\u524D\u53C2\u6570\u8FDB\u884C\u5904\u7406\u7684 ArgumentResolver,</span>
			<span class="token comment">// \u5219\u8C03\u7528\u5176 resolveArgument() \u65B9\u6CD5\u4ECE request \u4E2D\u83B7\u53D6\u5BF9\u5E94\u7684\u53C2\u6570\u503C, \u5E76\u8FDB\u884C\u8F6C\u6362</span>
			args<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>resolvers<span class="token punctuation">.</span><span class="token function">resolveArgument</span><span class="token punctuation">(</span>parameter<span class="token punctuation">,</span> mavContainer<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataBinderFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// Leave stack trace for later, exception may actually be resolved and handled...</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isDebugEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token class-name">String</span> exMsg <span class="token operator">=</span> ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>exMsg <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>exMsg<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>parameter<span class="token punctuation">.</span><span class="token function">getExecutable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toGenericString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token function">formatArgumentError</span><span class="token punctuation">(</span>parameter<span class="token punctuation">,</span> exMsg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">throw</span> ex<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> args<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><p>\u63A5\u4E0B\u6765\u518D\u770B\u5BF9\u65B9\u6CD5\u7684\u5177\u4F53\u8C03\u7528:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Nullable</span>
<span class="token keyword">protected</span> <span class="token class-name">Object</span> <span class="token function">doInvoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
	<span class="token class-name">Method</span> method <span class="token operator">=</span> <span class="token function">getBridgedMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">ReflectionUtils</span><span class="token punctuation">.</span><span class="token function">makeAccessible</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">try</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">KotlinDetector</span><span class="token punctuation">.</span><span class="token function">isSuspendingFunction</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token class-name">CoroutinesUtils</span><span class="token punctuation">.</span><span class="token function">invokeSuspendingFunction</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// \u5F02\u5E38\u6355\u83B7 * n ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="_3-5-processdispatchresult-\u65B9\u6CD5\u7EC6\u8282" tabindex="-1"><a class="header-anchor" href="#_3-5-processdispatchresult-\u65B9\u6CD5\u7EC6\u8282" aria-hidden="true">#</a> 3.5 processDispatchResult \u65B9\u6CD5\u7EC6\u8282</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// \u8DF3\u8F6C\u89C6\u56FE\u9875\u9762, \u6E32\u67D3\u89C6\u56FE</span>
<span class="token function">processDispatchResult</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">,</span> mappedHandler<span class="token punctuation">,</span> mv<span class="token punctuation">,</span> dispatchException<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u8FDB\u5165:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">processDispatchResult</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span>
		<span class="token annotation punctuation">@Nullable</span> <span class="token class-name">HandlerExecutionChain</span> mappedHandler<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">ModelAndView</span> mv<span class="token punctuation">,</span>
		<span class="token annotation punctuation">@Nullable</span> <span class="token class-name">Exception</span> exception<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
	<span class="token keyword">boolean</span> errorView <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>exception <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// \u5F02\u5E38\u5904\u7406 ...</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// Did the handler return a view to render?</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>mv <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>mv<span class="token punctuation">.</span><span class="token function">wasCleared</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// \u5B8C\u6210\u6E32\u67D3</span>
		<span class="token function">render</span><span class="token punctuation">(</span>mv<span class="token punctuation">,</span> request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>errorView<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">WebUtils</span><span class="token punctuation">.</span><span class="token function">clearErrorRequestAttributes</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isTraceEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			logger<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">&quot;No view rendering, null ModelAndView returned.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">WebAsyncUtils</span><span class="token punctuation">.</span><span class="token function">getAsyncManager</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isConcurrentHandlingStarted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Concurrent handling started during a forward</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>mappedHandler <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Exception (if any) is already handled..</span>
		mappedHandler<span class="token punctuation">.</span><span class="token function">triggerAfterCompletion</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>\u8FDB\u5165\u5B8C\u6210\u6E32\u67D3\u7684 render \u65B9\u6CD5\u5F53\u4E2D:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token class-name">ModelAndView</span> mv<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
	<span class="token comment">// Determine locale for request and apply it to the response.</span>
	<span class="token class-name">Locale</span> locale <span class="token operator">=</span>
			<span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>localeResolver <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>localeResolver<span class="token punctuation">.</span><span class="token function">resolveLocale</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span> <span class="token operator">:</span> request<span class="token punctuation">.</span><span class="token function">getLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	response<span class="token punctuation">.</span><span class="token function">setLocale</span><span class="token punctuation">(</span>locale<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">View</span> view<span class="token punctuation">;</span>
	<span class="token class-name">String</span> viewName <span class="token operator">=</span> mv<span class="token punctuation">.</span><span class="token function">getViewName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>viewName <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// We need to resolve the view name.</span>
		<span class="token comment">// \u6839\u636E\u89C6\u56FE\u540D\u89E3\u6790\u5C01\u88C5\u89C6\u56FE\u5BF9\u8C61</span>
		view <span class="token operator">=</span> <span class="token function">resolveViewName</span><span class="token punctuation">(</span>viewName<span class="token punctuation">,</span> mv<span class="token punctuation">.</span><span class="token function">getModelInternal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> locale<span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>view <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ServletException</span><span class="token punctuation">(</span><span class="token string">&quot;Could not resolve view with name &#39;&quot;</span> <span class="token operator">+</span> mv<span class="token punctuation">.</span><span class="token function">getViewName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span>
					<span class="token string">&quot;&#39; in servlet with name &#39;&quot;</span> <span class="token operator">+</span> <span class="token function">getServletName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&#39;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token punctuation">{</span>
		<span class="token comment">// No need to lookup: the ModelAndView object contains the actual View object.</span>
		view <span class="token operator">=</span> mv<span class="token punctuation">.</span><span class="token function">getView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>view <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ServletException</span><span class="token punctuation">(</span><span class="token string">&quot;ModelAndView [&quot;</span> <span class="token operator">+</span> mv <span class="token operator">+</span> <span class="token string">&quot;] neither contains a view name nor a &quot;</span> <span class="token operator">+</span>
					<span class="token string">&quot;View object in servlet with name &#39;&quot;</span> <span class="token operator">+</span> <span class="token function">getServletName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&#39;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// Delegate to the View object for rendering.</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isTraceEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		logger<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">&quot;Rendering view [&quot;</span> <span class="token operator">+</span> view <span class="token operator">+</span> <span class="token string">&quot;] &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">try</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>mv<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			response<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span>mv<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		view<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>mv<span class="token punctuation">.</span><span class="token function">getModelInternal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isDebugEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;Error rendering view [&quot;</span> <span class="token operator">+</span> view <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">,</span> ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">throw</span> ex<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><p>\u7EE7\u7EED\u8FDB\u5165\u6839\u636E\u89C6\u56FE\u540D\u89E3\u6790\u5C01\u88C5\u89C6\u56FE\u5BF9\u8C61\u7684 <code>DispatcherServlet#resolveViewName</code> \u65B9\u6CD5\u5F53\u4E2D:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Nullable</span>
<span class="token keyword">protected</span> <span class="token class-name">View</span> <span class="token function">resolveViewName</span><span class="token punctuation">(</span><span class="token class-name">String</span> viewName<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> model<span class="token punctuation">,</span>
		<span class="token class-name">Locale</span> locale<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>viewResolvers <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ViewResolver</span> viewResolver <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>viewResolvers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// \u6839\u636E\u521D\u59CB\u5316\u7684\u89C6\u56FE\u89E3\u6790\u5668, \u89E3\u6790\u89C6\u56FE</span>
			<span class="token class-name">View</span> view <span class="token operator">=</span> viewResolver<span class="token punctuation">.</span><span class="token function">resolveViewName</span><span class="token punctuation">(</span>viewName<span class="token punctuation">,</span> locale<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>view <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> view<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>\u8FDB\u5165\u89E3\u6790\u89C6\u56FE\u7684\u65B9\u6CD5\u5F53\u4E2D <code>AbstractCachingViewResolver#resolveViewName</code> :</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token annotation punctuation">@Nullable</span>
<span class="token keyword">public</span> <span class="token class-name">View</span> <span class="token function">resolveViewName</span><span class="token punctuation">(</span><span class="token class-name">String</span> viewName<span class="token punctuation">,</span> <span class="token class-name">Locale</span> locale<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token function">createView</span><span class="token punctuation">(</span>viewName<span class="token punctuation">,</span> locale<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token punctuation">{</span>
		<span class="token class-name">Object</span> cacheKey <span class="token operator">=</span> <span class="token function">getCacheKey</span><span class="token punctuation">(</span>viewName<span class="token punctuation">,</span> locale<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">View</span> view <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>viewAccessCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>cacheKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>view <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>viewCreationCache<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				view <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>viewCreationCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>cacheKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>view <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// Ask the subclass to create the View object.</span>
					<span class="token comment">// \u8C03\u7528\u7236\u7C7B\u65B9\u6CD5, \u521B\u5EFA\u89C6\u56FE\u5BF9\u8C61</span>
					view <span class="token operator">=</span> <span class="token function">createView</span><span class="token punctuation">(</span>viewName<span class="token punctuation">,</span> locale<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>view <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cacheUnresolved<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						view <span class="token operator">=</span> UNRESOLVED_VIEW<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>view <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cacheFilter<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>view<span class="token punctuation">,</span> viewName<span class="token punctuation">,</span> locale<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">this</span><span class="token punctuation">.</span>viewAccessCache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>cacheKey<span class="token punctuation">,</span> view<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">this</span><span class="token punctuation">.</span>viewCreationCache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>cacheKey<span class="token punctuation">,</span> view<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isTraceEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				logger<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token function">formatKey</span><span class="token punctuation">(</span>cacheKey<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;served from cache&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span>view <span class="token operator">!=</span> UNRESOLVED_VIEW <span class="token operator">?</span> view <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p>\u89C6\u56FE\u751F\u6210\u540E,\u4F1A\u505A\u7F13\u5B58. \u5982\u679C\u6CA1\u6709\u7F13\u5B58\u5219\u4F1A\u91CD\u65B0\u751F\u6210, \u8FDB\u5165\u751F\u6210\u65B9\u6CD5 <code>UrlBasedViewResolver#createView</code> \u5F53\u4E2D:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token class-name">View</span> <span class="token function">createView</span><span class="token punctuation">(</span><span class="token class-name">String</span> viewName<span class="token punctuation">,</span> <span class="token class-name">Locale</span> locale<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
	<span class="token comment">// If this resolver is not supposed to handle the given view,</span>
	<span class="token comment">// return null to pass on to the next resolver in the chain.</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">canHandle</span><span class="token punctuation">(</span>viewName<span class="token punctuation">,</span> locale<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// Check for special &quot;redirect:&quot; prefix.</span>
	<span class="token comment">// \u5982\u679C\u662F\u91CD\u5B9A\u5411\u4F7F\u7528: RedirectView</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>viewName<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span>REDIRECT_URL_PREFIX<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">String</span> redirectUrl <span class="token operator">=</span> viewName<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>REDIRECT_URL_PREFIX<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">RedirectView</span> view <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RedirectView</span><span class="token punctuation">(</span>redirectUrl<span class="token punctuation">,</span>
				<span class="token function">isRedirectContextRelative</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">isRedirectHttp10Compatible</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> hosts <span class="token operator">=</span> <span class="token function">getRedirectHosts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>hosts <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			view<span class="token punctuation">.</span><span class="token function">setHosts</span><span class="token punctuation">(</span>hosts<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token function">applyLifecycleMethods</span><span class="token punctuation">(</span>REDIRECT_URL_PREFIX<span class="token punctuation">,</span> view<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// Check for special &quot;forward:&quot; prefix.</span>
	<span class="token comment">// \u5982\u679C\u662F\u8F6C\u53D1\u4F7F\u7528: InternalResourceView</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>viewName<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span>FORWARD_URL_PREFIX<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">String</span> forwardUrl <span class="token operator">=</span> viewName<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>FORWARD_URL_PREFIX<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">InternalResourceView</span> view <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InternalResourceView</span><span class="token punctuation">(</span>forwardUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token function">applyLifecycleMethods</span><span class="token punctuation">(</span>FORWARD_URL_PREFIX<span class="token punctuation">,</span> view<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// Else fall back to superclass implementation: calling loadView.</span>
	<span class="token comment">// \u4E0D\u540C\u8BF7\u6C42\u8C03\u7528\u7236\u7C7B\u9ED8\u8BA4\u7684 createView \u65B9\u6CD5</span>
	<span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">createView</span><span class="token punctuation">(</span>viewName<span class="token punctuation">,</span> locale<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>\u7EE7\u7EED\u8FDB\u5165\u7236\u7C7B\u7684 createView \u65B9\u6CD5\u4E2D, \u6B64\u65B9\u6CD5\u8C03\u7528\u4E86\u540C\u7C7B\u7684 <code>loadView</code> \u65B9\u6CD5, \u8FD9\u662F\u4E00\u4E2A\u62BD\u8C61\u65B9\u6CD5, \u5176\u5177\u4F53\u5B9E\u73B0\u662F: <code>UrlBasedViewResolver#loadView</code></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token class-name">View</span> <span class="token function">loadView</span><span class="token punctuation">(</span><span class="token class-name">String</span> viewName<span class="token punctuation">,</span> <span class="token class-name">Locale</span> locale<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
	<span class="token class-name">AbstractUrlBasedView</span> view <span class="token operator">=</span> <span class="token function">buildView</span><span class="token punctuation">(</span>viewName<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">View</span> result <span class="token operator">=</span> <span class="token function">applyLifecycleMethods</span><span class="token punctuation">(</span>viewName<span class="token punctuation">,</span> view<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>view<span class="token punctuation">.</span><span class="token function">checkResource</span><span class="token punctuation">(</span>locale<span class="token punctuation">)</span> <span class="token operator">?</span> result <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>\u7EE7\u7EED\u8FDB\u5165\u6838\u5FC3\u65B9\u6CD5, \u540C\u7C7B\u7684 <code>UrlBasedViewResolver#buildView</code> \u4E2D:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token class-name">AbstractUrlBasedView</span> <span class="token function">buildView</span><span class="token punctuation">(</span><span class="token class-name">String</span> viewName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
	<span class="token class-name">AbstractUrlBasedView</span> view <span class="token operator">=</span> <span class="token function">instantiateView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// \u5C06\u903B\u8F91\u89C6\u56FE\u540D\u8F6C\u6362\u4E3A\u7269\u7406\u89C6\u56FE\u540D</span>
	view<span class="token punctuation">.</span><span class="token function">setUrl</span><span class="token punctuation">(</span><span class="token function">getPrefix</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> viewName <span class="token operator">+</span> <span class="token function">getSuffix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	view<span class="token punctuation">.</span><span class="token function">setAttributesMap</span><span class="token punctuation">(</span><span class="token function">getAttributesMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">String</span> contentType <span class="token operator">=</span> <span class="token function">getContentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>contentType <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		view<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span>contentType<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token class-name">String</span> requestContextAttribute <span class="token operator">=</span> <span class="token function">getRequestContextAttribute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>requestContextAttribute <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		view<span class="token punctuation">.</span><span class="token function">setRequestContextAttribute</span><span class="token punctuation">(</span>requestContextAttribute<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token class-name">Boolean</span> exposePathVariables <span class="token operator">=</span> <span class="token function">getExposePathVariables</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>exposePathVariables <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		view<span class="token punctuation">.</span><span class="token function">setExposePathVariables</span><span class="token punctuation">(</span>exposePathVariables<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token class-name">Boolean</span> exposeContextBeansAsAttributes <span class="token operator">=</span> <span class="token function">getExposeContextBeansAsAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>exposeContextBeansAsAttributes <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		view<span class="token punctuation">.</span><span class="token function">setExposeContextBeansAsAttributes</span><span class="token punctuation">(</span>exposeContextBeansAsAttributes<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> exposedContextBeanNames <span class="token operator">=</span> <span class="token function">getExposedContextBeanNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>exposedContextBeanNames <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		view<span class="token punctuation">.</span><span class="token function">setExposedContextBeanNames</span><span class="token punctuation">(</span>exposedContextBeanNames<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// \u5B8C\u6210\u751F\u6210\u89C6\u56FE\u5BF9\u8C61</span>
	<span class="token keyword">return</span> view<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>\u81F3\u6B64, \u8BD5\u56FE\u5BF9\u8C61\u751F\u6210\u5B8C\u6210.</p><p>\u89C6\u56FE\u5BF9\u8C61\u751F\u6210\u5B8C\u6210\u540E, \u6211\u4EEC\u56DE\u5230 <code>DispatcherServlet#render</code> \u65B9\u6CD5\u5F53\u4E2D, \u7EE7\u7EED\u5206\u6790\u89C6\u56FE\u6E32\u67D3 <code>AbstractView#render</code> \u65B9\u6CD5:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Nullable</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token operator">?</span><span class="token punctuation">&gt;</span></span> model<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span>
		<span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isDebugEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;View &quot;</span> <span class="token operator">+</span> <span class="token function">formatViewName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span>
				<span class="token string">&quot;, model &quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>model <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> model <span class="token operator">:</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">emptyMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>
				<span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>staticAttributes<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;, static attributes &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>staticAttributes<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// \u83B7\u53D6\u5408\u5E76\u540E\u7684 ModelMap</span>
	<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> mergedModel <span class="token operator">=</span> <span class="token function">createMergedOutputModel</span><span class="token punctuation">(</span>model<span class="token punctuation">,</span> request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// \u8BBE\u7F6E\u54CD\u5E94\u5934\u4FE1\u606F</span>
	<span class="token function">prepareResponse</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// \u6E32\u67D3\u89C6\u56FE</span>
	<span class="token function">renderMergedOutputModel</span><span class="token punctuation">(</span>mergedModel<span class="token punctuation">,</span> <span class="token function">getRequestToExpose</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>\u8FDB\u5165\u6E32\u67D3\u89C6\u56FE\u7684\u65B9\u6CD5 <code>InternalResourceView#renderMergedOutputModel</code> \u4E2D:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">renderMergedOutputModel</span><span class="token punctuation">(</span>
		<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> model<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
	<span class="token comment">// Expose the model object as request attributes.</span>
	<span class="token comment">// \u628A ModelMap \u4E2D\u7684\u6570\u636E\u66B4\u9732\u5230 request \u57DF\u4E2D</span>
	<span class="token comment">// \u8FD9\u4E5F\u662F\u4E3A\u4EC0\u4E48\u5728\u540E\u53F0 model.add() \u6DFB\u52A0\u7684\u6570\u636E\u53EF\u4EE5\u5728 jsp \u4E2D\u53D6\u51FA\u6765\u7684\u6839\u672C\u539F\u56E0</span>
	<span class="token function">exposeModelAsRequestAttributes</span><span class="token punctuation">(</span>model<span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// Expose helpers as request attributes, if any.</span>
	<span class="token function">exposeHelpers</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// Determine the path for the request dispatcher.</span>
	<span class="token comment">// \u7269\u7406\u89C6\u56FE\u8DEF\u5F84</span>
	<span class="token class-name">String</span> dispatcherPath <span class="token operator">=</span> <span class="token function">prepareForRendering</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// Obtain a RequestDispatcher for the target resource (typically a JSP).</span>
	<span class="token comment">// \u83B7\u53D6\u539F\u751F\u7684\u8BF7\u6C42\u5206\u53D1\u5668</span>
	<span class="token class-name">RequestDispatcher</span> rd <span class="token operator">=</span> <span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> dispatcherPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>rd <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ServletException</span><span class="token punctuation">(</span><span class="token string">&quot;Could not get RequestDispatcher for [&quot;</span> <span class="token operator">+</span> <span class="token function">getUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span>
				<span class="token string">&quot;]: Check that the corresponding file exists within your web application archive!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// If already included or response already committed, perform include, else forward.</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">useInclude</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token function">getContentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isDebugEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;Including [&quot;</span> <span class="token operator">+</span> <span class="token function">getUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		rd<span class="token punctuation">.</span><span class="token function">include</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token punctuation">{</span>
		<span class="token comment">// Note: The forwarded resource is supposed to determine the content type itself.</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isDebugEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;Forwarding to [&quot;</span> <span class="token operator">+</span> <span class="token function">getUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		rd<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><p>\u81F3\u6B64\u89C6\u56FE\u6E32\u67D3\u5B8C\u6210, \u7531 <code>Servlet</code> \u539F\u751F\u7684 <code>RequestDispatcher</code> \u5B8C\u6210\u9875\u9762\u8DF3\u8F6C</p><h2 id="\u7B2C\u4E94\u90E8\u5206-ssm-\u6846\u67B6\u6574\u5408" tabindex="-1"><a class="header-anchor" href="#\u7B2C\u4E94\u90E8\u5206-ssm-\u6846\u67B6\u6574\u5408" aria-hidden="true">#</a> \u7B2C\u4E94\u90E8\u5206 SSM \u6846\u67B6\u6574\u5408</h2><h3 id="\u7B2C-1-\u8282-\u6574\u5408\u7B56\u7565" tabindex="-1"><a class="header-anchor" href="#\u7B2C-1-\u8282-\u6574\u5408\u7B56\u7565" aria-hidden="true">#</a> \u7B2C 1 \u8282 \u6574\u5408\u7B56\u7565</h3><p>SSM = Spring + SpringMVC + Mybatis = (Spring + Mybatis)+ SpringMVC</p><p>\u5148\u6574\u5408 Spring + Mybatis</p><p>\u7136\u540E\u518D\u6574\u5408 SpringMVC</p><p>\u57FA\u4E8E\u7684\u9700\u6C42:\u67E5\u8BE2 Account \u8868\u7684\u5168\u90E8\u6570\u636E\u663E\u793A\u5230\u2EDA\u9762</p><h3 id="\u7B2C-2-\u8282-mybatis-\u6574\u5408-spring" tabindex="-1"><a class="header-anchor" href="#\u7B2C-2-\u8282-mybatis-\u6574\u5408-spring" aria-hidden="true">#</a> \u7B2C 2 \u8282 Mybatis \u6574\u5408 Spring</h3><p><strong>\u6574\u5408\u76EE\u6807</strong></p><ul><li><p>\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\u4EE5\u53CA\u4E8B\u52A1\u7BA1\u7406\u90FD\u4EA4\u7ED9 Spring \u5BB9\u5668\u6765\u5B8C\u6210</p></li><li><p>SqlSessionFactory \u5BF9\u8C61\u5E94\u8BE5\u653E\u5230 Spring \u5BB9\u5668\u4E2D\u4F5C\u4E3A\u5355\u4F8B\u5BF9\u8C61\u7BA1\u7406</p></li><li><p>Mapper \u52A8\u6001\u4EE3\u7406\u5BF9\u8C61\u4EA4\u7ED9 Spring \u7BA1\u7406\uFF0C\u6211\u4EEC\u4ECE Spring \u5BB9\u5668\u4E2D\u76F4\u63A5\u83B7\u5F97 Mapper \u7684\u4EE3\u7406\u5BF9\u8C61</p></li></ul><p><strong>\u6574\u5408\u6240\u9700 Jar \u5206\u6790</strong></p><ul><li>Junit\u6D4B\u8BD5jar</li><li>Mybatis\u7684jar</li><li>Spring\u76F8\u5173jar(spring-context\u3001spring-test\u3001spring-jdbc\u3001spring-tx\u3001spring-aop\u3001 aspectjweaver)</li><li>Mybatis/Spring\u6574\u5408\u5305jar(mybatis-spring-xx.jar)</li><li>Mysql\u6570\u636E\u5E93\u9A71\u52A8jar</li><li>Druid\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\u7684jar</li></ul><p><strong>\u914D\u7F6E\u6587\u4EF6</strong></p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>tx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/tx<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/tx
        http://www.springframework.org/schema/tx/spring-tx.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mujunlin<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token comment">&lt;!--  \u6570\u636E\u5E93\u8FDE\u63A5\u6C60\u548C\u4E8B\u52A1\u7BA1\u7406  --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>property-placeholder</span> <span class="token attr-name">location</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>classpath:jdbc.properties<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.alibaba.druid.pool.DruidDataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driverClassName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${jdbc.driverClass}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${jdbc.jdbcUrl}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${jdbc.user}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${jdbc.password}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transactionManager<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.jdbc.datasource.DataSourceTransactionManager<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>annotation-driven</span> <span class="token attr-name">transaction-manager</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transactionManager<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token comment">&lt;!--  sqlSessionFactory \u5BF9\u8C61\u653E\u5230\u5BB9\u5668\u4E2D\u4F5C\u4E3A\u5355\u4F8B\u5BF9\u8C61\u7BA1\u7406  --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sqlSessionFactory<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.mybatis.spring.SqlSessionFactoryBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>typeAliasesPackage<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mujunlin.entity<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--  Mapper \u52A8\u6001\u4EE3\u7406\u5BF9\u8C61\u4EA4\u7ED9 Spring \u7BA1\u7406  --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.mybatis.spring.mapper.MapperScannerConfigurer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>basePackage<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mujunlin.mapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sqlSessionFactoryBeanName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sqlSessionFactory<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><h3 id="\u7B2C-3-\u8282-\u6574\u5408-springmvc" tabindex="-1"><a class="header-anchor" href="#\u7B2C-3-\u8282-\u6574\u5408-springmvc" aria-hidden="true">#</a> \u7B2C 3 \u8282 \u6574\u5408 SpringMVC</h3><p>\u76F8\u5173\u4F9D\u8D56</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--SpringMVC--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-webmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.1.12.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--jsp-api&amp;servlet-api--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jsp-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>javax.servlet-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--\u2EDA\u9762\u4F7F\u7528jstl\u8868\u8FBE\u5F0F--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>jstl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jstl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>taglibs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>standard<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.1.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--json\u6570\u636E\u4EA4\u4E92\u6240\u9700jar\uFF0Cstart--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.fasterxml.jackson.core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jackson-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.9.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.fasterxml.jackson.core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jackson-databind<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.9.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.fasterxml.jackson.core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jackson-annotations<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.9.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--json\u6570\u636E\u4EA4\u4E92\u6240\u9700jar\uFF0Cend--&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><p>web.xml</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">web-app</span> <span class="token name">PUBLIC</span>
        <span class="token string">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span>
        <span class="token string">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> <span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>display-name</span><span class="token punctuation">&gt;</span></span>Archetype Created Web Application<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>display-name</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context-param</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>contextConfigLocation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>classpath*:applicationContext.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context-param</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--  \u542F\u52A8 Spring \u5BB9\u5668  --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener-class</span><span class="token punctuation">&gt;</span></span>org.springframework.web.context.ContextLoaderListener<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener-class</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--  \u542F\u52A8 SpringMVC  --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>springmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">&gt;</span></span>org.springframework.web.servlet.DispatcherServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>contextConfigLocation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>classpath*:springmvc.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>load-on-startup</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>load-on-startup</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>springmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p>springmvc.xml</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>mvc</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/mvc<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--  \u626B\u63CF controller  --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mujunlin.controller<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token comment">&lt;!-- \u914D\u7F6E SpringMVC \u6CE8\u89E3\u9A71\u52A8, \u81EA\u52A8\u6CE8\u518C\u5408\u9002\u7684 handlerMapping \u548C handlerAdapter --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>annotation-driven</span><span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><blockquote><p>Spring\u5BB9\u5668\u548CSpringMVC\u5BB9\u5668\u662F\u6709\u5C42\u6B21\u7684\uFF08\u53EF\u4EE5\u7B80\u5355\u7406\u89E3\u4E3A\u7236\u5B50\u5BB9\u5668\uFF09</p><p>Spring\u5BB9\u5668\uFF1Aservice\u5BF9\u8C61+dao\u5BF9\u8C61</p><p>SpringMVC\u5BB9\u5668\uFF1Acontroller\u5BF9\u8C61, \u53EF\u4EE5\u5F15\u7528\u5230Spring\u5BB9\u5668\u4E2D\u7684\u5BF9\u8C61</p></blockquote>`,70);function w(h,f){const t=e("ExternalLinkIcon");return o(),c(u,null,[m,n("blockquote",null,[n("p",null,[b,n("a",d,[g,l(t)])])]),v],64)}var y=p(k,[["render",w],["__file","SpringMVC.html.vue"]]);export{y as default};
