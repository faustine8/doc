import{_ as t,r as l,o,a as c,b as a,d as e,F as i,c as p,e as n}from"./app.40df414d.js";var r="/doc/assets/README-1645843157123.e57a1ebc.png",u="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAjAAAACcCAIAAADu0gaEAAANO0lEQVR4Xu3cz28cZx3Hcf8nsWPnh6s4dlKvSSpEA2orlBIkIkWiUiOFppFy4FCkJCIkoNQxRUkvjhMrtBIQIdkHErghwbVq7V4QcM+tgLlacHefZ555Zp55fsz+mt39ev1+6aPW++zsM7Nb6fl4ZqeeaC29RgghhIw8E+EQIYQQMvxQSIQQQkSEQhps5hcWZ1+Zmzk6e3j62OTUkcmpGUIIIdFQSAPJYuvsibmFqemj4SdOCCEkGgqp+Zw8eXp6hiqaOaT+OTkdjhNCSDQUUsM5OX86/JQPaGgjQkg3oZCajDo3OsQqTAghPYVCaiwLp5fCz5cQQkiHoZCayWLr7PTM8fDzHe/cvfuLcJAQQnpLX4X07e+89be//1MlfKqp3Prpz1TOvvat8Kl+oo587clTdeS7//u/ivrht7/7vRo0z/7hxZ/Cl9TnxNxC+OHW5PVzb6qE4/srFBIhpMH0XkimjfRq/o/BFtJHv3rYbCfd/fm9f/1nx1SRGzWonlJtpH4OX1WTVxfPTB3u7ra6j1fXH66uh+M1WbrxyafPNttn5Urw2it3nn1y/Zw/YTQXVtQknW7crpDub+/u7W7fz35+8XKv+LnxqMlfPndHlr/c3bN2v/zQ337mw+3dxMGcee/+2vLVM8F4E3n71uqjW+fD8Z7T+ISEjDQ9FpLbRsWJxSCieqjZTlKVY+pHFc8771w2g+oH00NFwhfWZO7kqfCTrcmlH1425aF+CJ/tIuduP3y2eefdYDzMuw86qJk3rj/Z/PTJ7aWONtaRUEiqWrLacQvpvq6b5eJnr5P0keieih5MucT30UypnkiN61y48WjtxtvheG3qJiRk/6WXQhpaG5k02EnqaM25kaql8NnPPv+it0I6fvxE+MmmojZe+/VvTCGpH7p6rRd9NhM5H5rJTomCMyc/1crRJbT58MYb+cOs6sqHiXRTSAPJ85fZ/Opf3hmSG322ZPtJ/6y2TB7Y+ZtrqzcvZD9TSIQMO10X0pDbyKSpTnq8/tScG4VP9XOGdOTIbPjJpvLjD266xaAehtt0FF0hDy6E4zqqkFJPFRvYQsq6JzpV28t33RSSPi95+TwbN/1RXlUrzmacbaov168oKyc7xXn5otxR54UUzFyNbYWla8uP1lZtbE/oZ82IW1S6w5zB4qHO/Wstd37TH+XkK+8tFePFq/Rg6+qKeu159U8zqDtSF6S/dwqJjFe6K6SRtJFJI52kDlsdfHGlrojXRt0W0uGO/y7DN8580/SQeWh+VoPhlu2SnwMlTmIqhaS/fHpye8nfQDdNVjkPrtd8O7Vy21zHC3ah00chFZfR3EtqyUJyr/jpa3Te10K1haSf9L9GiheSqQFbIdUzpKxF3GYyP7svaV29lndDqidM8eTbZwVT7q5yhqSnLYrHFlj+rJ7EbbLYjgjZn+mukMyC3jY933dnKqdt1GbhaztJD2XTSTr/q6l3730UFtKde78Mt6yN/rJHVZGqE/PPxIW7LHUnUpGo9kqUXCR9FJJzylLWSU0hFZu90FfpKqc7dYVkvmFy5ozNnMe7Rld56FzK09GFkT30xvOkesLtEn+zsJDKGfReotWV2hEh+zODKaRe77sb70J667vfK848zEjxUD0Vbp9K0UCmkCbtDXj27obs3oTwXCeMf9qkM6xCcvqjw0LKL9xVL9b5M7jJzr0ibZQ/5ReSPhFx2qJSSOXlMv9yXH61zX1huie88fpCci73VWuPQiJjm+4KSV+yyzpJnQON0yW7IupN/fkvf328/jR8qiYdXrL7eHXdrwSbzm8B121ki6QopCzZRbxqx1Q3yKJOmPweqr8DYmDfIRWbdVlIfpGEE9qpgsEi/syT/qI/ExZSzQ0O9nsj2w2pnqCQCKlNd4XUGlEnNdJGrdqbGkzMl0k1G0Qz08FNDZevXHMXejPojqgNwldVk536OFfnwr5xvy7Kvh+qXs3T9y/UFYyZwe+wdJouJK8nyu+Nys0idygEE1a+l4omLKTwJrfgkp13h4KfDnqCQiKkNl0XUmvondRUG7WyI//3zn93E7d9F/+L0oXv/yB8tibHZ9vcuj2/sFjc6p0qJLWB2ix8bZGwfsKRSLL7uW3af5k00kKq3IBQPR8qy8ndJpxBJ1palQSFFFnZs8t0RQ1kdxYU/aQKw1TC+Zv2Ve4VPz1beRGvLLN2heTOTyGRA5heCqk1xE5qsI1Myv8x9vkfi2t371+7rh6a8WhX1ae+SCaDW71T6fYW8G4KqbinrvYOiFEXkr3UZqrohX25d8aTbVNz27f7ZxrK2dzzIa+QElfk9HLv3d4W3Hjt3CDunGDZ75yyUumskPI769zbvikkctDSYyG1qp0UPttUmm0jkw9+csOcJ3lRgz20kUnNX1Z9/dybYfek0tUfuEsWUv6/FiXqx1SUGXe3TCe+l/aFtE/i385ACBlNei+klu2knu+p6yS3BvbHVR+vPzWFqnros8+/UA/7OdU7Of9q+OGOfcajkDr4fogQMoz0VUjETc1J0rhmPAqJECIkFFJjOXW6FX6+hBBCOgyF1GTmDuSFO0IIaSQUUsOZp5OKTE77I4QQkg6F1HxOnV6anjkWftYHLYem6CRCSBehkAaSxdbZE3OnpqY7+pNChBBCJimkQWd+YXH2lbmZo7OHp491+DdYCSHkYIZCIoQQIiIUEiGEEBGhkAghhIgIhUQIIUREJq786H1CCCFk5Jnw/0w/AACjQCEBAESgkAAAIlBIAAARKCQAgAgUEgBABAoJACAChQQAEIFCAgCIQCEBAESgkAAAIlBIAAARei2k7ZWJiYmVbX/Y2FrWT275w2lfbVycmLi4ueOP929wM6cMf48AMBaShZSVSsylDb3Wjksh6UM17yg90p12exypLf2fbbn4L+M9BIBRShZSKVth/e6pLSRB2tTDzsYlr37CkS612eNoUUgA5KKQDlQh6XfnHJv3EABGqc9CypbvXHmNzrtkt7N50W5zceMrO+ryF/HsN3cj/fu7e1HRP7yCndnZ2B5D9hZKqoTCEbuZmj8yg+U8tbLlvxdH26my1+b8Uqx+1MEvBB19Gn4DUUgABOmrkMr11KyktjzcQsraqCinnY3NWMFUFnHdRuUqub0R7TA1bXFI2S78ksjZJd5unFVdudaH50PBiG0pO4MpBucdVR7mVRpf5dtMtbVS7jd2ba141n9T1d8Agq5yUEgA5OqrkNy1zF0TnZ+D9T3KLaS69TSl2mGualPu+e0VHl4wErzTyu7Co41sb0WeSh65W+Rh45qTzny//jFkbyF+ZkkhAZCrr0JyB90FNCindqueW0j5r/8d36RXXOaKLsHhBTR95F0XUvXtlyt+5H7CcI+F2qlc9vqbOc7gkPYqU4XHoEfivwRQSADkaraQ8oW+ukSaC1OZYOXNeYu4vbTlnRa4yq9M9MqbvlssrIfKkYdrfTASvFN3m8jSH+6xUDtV2azZNs7nGSstv5BC0UankADINYRCyuXrZvQ39+gibhdof9d74d5HUUgNnyH5+/ULqf4MKfqpAsC+MrxC2su3iYynF/H4Vyz+dyqmugZZSJUZnA/EP5J8JHLMWt1Ufqdmn2Hy8zTtnr8LPW3yVBIA9otBF9LOxnK5uCd/l3drY3ulnDa6aztuV3Z7j3gvhZRa652RbHtnxffu0zN7t9vbs7qaQkpN5e7XtFq5pZm22Gk+T7VWnWNWU0U+NC128170cwOAoRt0IZVrtBZtoz2/NtwvRfz9WnbJnsh2ml5Y2xVS2Wd+x9iRfHs7WNmyur15Ktxjoc1Uzvjyln/u5X6M6p3678J0Ui71oQUNlP7cAGDoOiikA85f+vvQ8FRcpgMwViikdhpukWamSl78BIB9i0Jqp7kW6X2qrzYu+jfg9TQPAAhGIbXTc4uE+pnK3siQ4WIdgDFEIQEARKCQAAAiUEgAABEoJACACBQSAEAECgkAIAKFBAAQgUICAIhAIQEARKCQAAAiUEgAABEoJACACBQSAEAECgkAIAKFBAAQgUICAIhAIQEARKCQAAAiUEgAABEoJACACBQSAEAECgkAIAKFBAAQgUICAIhAIQEARKCQAAAiUEgAABEoJACACBQSAEAECgkAIAKFBAAQgUICAIhAIQEARKCQAAAiUEgAABEoJACACBQSAEAECgkAIAKFBAAQgUICAIhAIQEARKCQAAAiUEgAABEoJACACBQSAEAECgkAIAKFBAAQgUICAIhAIQEARKCQAAAiUEgAABEoJACACBQSAEAECgkAIAKFBAAQgUICAIhAIQEARKCQAAAiUEgAABEoJACACBQSAEAECgkAIAKFBAAQgUICAIhAIQEARKCQAAAiUEgAABEoJACACBQSAEAECgkAIAKFBAAQgUICAIhAIQEARKCQAAAiUEgAABEoJACACBQSAEAECgkAIAKFBAAQgUICAIhAIQEARKCQAAAiUEgAABEoJACACBQSAEAECgkAIAKFBAAQgUICAIhAIQEARKCQAAAiUEgAABG+Bufvj90b99CBAAAAAElFTkSuQmCC",d="/doc/assets/README-1645861805358.8bb37035.png",m="/doc/assets/README-1643264859635.d143a3e3.png",k="/doc/assets/README-1643265720620.d8e88a45.png",b="/doc/assets/README-1643265854703.ed6cbaff.png",h="/doc/assets/README-1643265882214.a7b0ef71.png";const g={},v=p(`<h1 id="impala" tabindex="-1"><a class="header-anchor" href="#impala" aria-hidden="true">#</a> Impala</h1><blockquote><p>\u4EA4\u4E92\u5F0F\u67E5\u8BE2\u5DE5\u5177</p></blockquote><h2 id="\u7B2C-1-\u90E8\u5206-impala\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#\u7B2C-1-\u90E8\u5206-impala\u6982\u8FF0" aria-hidden="true">#</a> \u7B2C 1 \u90E8\u5206 Impala\u6982\u8FF0</h2><h3 id="_1-1-impala\u662F\u4EC0\u4E48" tabindex="-1"><a class="header-anchor" href="#_1-1-impala\u662F\u4EC0\u4E48" aria-hidden="true">#</a> 1.1 Impala\u662F\u4EC0\u4E48</h3><p>Impala\u662FCloudera\u63D0\u4F9B\u7684\u4E00\u6B3E\u5F00\u6E90\u7684\u9488\u5BF9HDFS\u548CHBASE\u4E2D\u7684PB\u7EA7\u522B\u6570\u636E\u8FDB\u884C<em>\u4EA4\u4E92\u5F0F\u5B9E\u65F6\u67E5\u8BE2</em>\u7684\u5DE5\u5177(Impala \u901F\u5EA6\u5FEB)\u3002</p><p>Impala\u662F\u53C2\u7167\u2F95\u6B4C\u7684\u65B0\u4E09\u7BC7\u8BBA\u2F42\u5F53\u4E2D\u7684Dremel\u5B9E\u73B0\u2F7D\u6765\uFF0C\u5176\u4E2D\u65E7\u4E09\u7BC7\u8BBA\u6587\u5206\u522B\u662F (BigTable\uFF0CGFS\uFF0CMapReduce)\u5206\u522B\u5BF9\u5E94 \u6211\u4EEC\u5373\u5C06\u5B66\u7684HBase\u548C\u5DF2\u7ECF\u5B66\u8FC7\u7684HDFS\u4EE5\u53CAMapReduce\u3002</p><p>Impala\u6700\u5927\u5356\u70B9\u548C\u6700\u5927\u7279\u70B9\u5C31\u662F<strong>\u5FEB\u901F</strong>\uFF0CImpala\u4E2D\u2F42\u7FFB\u8BD1\u662F\u2FBC\u89D2\u7F9A\u2F7A\u3002</p><h3 id="_1-2-impala\u4F18\u52BF" tabindex="-1"><a class="header-anchor" href="#_1-2-impala\u4F18\u52BF" aria-hidden="true">#</a> 1.2 Impala\u4F18\u52BF</h3><p>\u56DE\u987E\u524D\u2FAF\u2F24\u6570\u636E\u8BFE\u7A0B\u8DEF\u7EBF\u5176\u5B9E\u5C31\u662F\u2F00\u4E2A\u2F24\u6570\u636E\u4ECE\u4E1A\u8005\u2FAF\u5BF9\u7684\u2F24\u6570\u636E\u76F8\u5173\u6280\u672F\u53D1\u5C55\u7684\u8FC7\u7A0B\u3002</p><p>\u6280\u672F\u53D1\u5C55\u4EE5\u53CA\u66F4\u65B0\u6362\u4EE3\u7684\u539F\u56E0\u5C31\u662F\u2F7C\u7684\u6280\u672F\u67B6\u6784\u9047\u5230\u65B0\u7684\u95EE\u9898\uFF0C\u6709\u4E9B\u95EE\u9898\u53EF\u4EE5\u901A\u8FC7\u4E0D\u65AD\u4F18\u5316\u4EE3\u7801\u4F18\u5316\u8BBE\u8BA1\u5F97\u4EE5\u89E3\u51B3\uFF0C\u6709\u2F00\u4E9B\u95EE\u9898\u5C31\u4E0D\u518D\u662F\u7B80\u7B80\u5355\u5355\u4FEE\u6539\u4EE3\u7801\u5C31\u80FD\u89E3\u51B3\uFF0C\u9700\u8981\u4ECE\u6846\u67B6\u672C\u8EAB\u67B6\u6784\u8BBE\u8BA1\u4E0A\u6539\u53D8\uFF0C\u4EE5\u2F84\u4E8E\u9700\u8981\u63A8\u5012\u91CD\u5EFA\u3002</p><p>\u5728\u2F24\u6570\u636E\u9886\u57DF\u4E3B\u8981\u89E3\u51B3\u7684\u95EE\u9898\u662F\u6570\u636E\u7684\u5B58\u50A8\u548C\u5206\u6790\uFF0C\u4F46\u662F\u5176\u5B9E\u2F00\u4E2A\u5B8C\u6574\u7684\u2F24\u6570\u636E\u5206\u6790\u4EFB\u52A1\uFF0C\u5982\u679C\u7EC6\u5206\u4F1A\u6709\u2FAE\u5E38\u591A\u5177\u4F53\u7684\u573A\u666F\uFF0C\u2FAE\u5E38\u591A\u7684\u73AF\u8282\uFF1B\u5E76\u6CA1\u6709\u2F00\u4E2A\u7C7B\u4F3CJava Web\u7684Spring\u6846\u67B6\u5B9E\u73B0\u2F24\u2F00\u7EDF\u7684\u5C40\u2FAF\u3002</p><p>\u2F50\u5982\u6211\u4EEC\u6309\u7167\u9636\u6BB5\u5212\u5206\u2F00\u4E2A\u2F24\u6570\u636E\u5F00\u53D1\u4EFB\u52A1\uFF0C\u4F1A\u6709\uFF1A\u6570\u636E\u91C7\u96C6(\u2F47\u5FD7\u2F42\u4EF6/\u5173\u7CFB\u578B\u6570\u636E\u5E93\u4E2D)\uFF0C\u6570\u636E\u6E05\u6D17(\u6570\u636E\u683C\u5F0F\u6574\u7406\uFF0C\u810F\u6570\u636E\u8FC7\u6EE4\u7B49)\uFF0C \u6570\u636E\u9884\u5904\u7406(\u4E3A\u4E86\u540E\u7EED\u5206\u6790\u6240\u505A\u7684\u2F2F\u4F5C)\uFF0C\u6570\u636E\u5206\u6790\uFF1A\u79BB\u7EBF\u5904\u7406(T+1\u5206\u6790)\uFF0C\u5B9E\u65F6\u5904\u7406(\u6570\u636E\u5230\u6765\u5373\u5206\u6790)\uFF0C\u6570\u636E\u53EF\u89C6\u5316\uFF0C\u673A\u5668\u5B66\u4E60\uFF0C\u6DF1\u5EA6\u5B66\u4E60\u7B49\u3002</p><p>\u2FAF\u5BF9\u5982\u6B64\u4F17\u591A\u7684\u9636\u6BB5\u518D\u52A0\u4E0A\u2F24\u6570\u636E\u5929\u2F63\u7684\u2F24\u6570\u636E\u91CF\u95EE\u9898\u6CA1\u6709\u4EFB\u4F55\u2F00\u4E2A\u6846\u67B6\u53EF\u4EE5\u5B8C\u7F8Ecover\u4EE5\u4E0A\u6BCF\u4E2A\u9636\u6BB5\u3002\u6240\u4EE5\u2F24\u6570\u636E\u9886\u57DF\u6709\u2FAE\u5E38\u591A\u6846\u67B6\uFF0C\u6BCF\u4E2A\u6846\u67B6\u90FD\u6709\u6700\u9002\u5408\u2F83\u2F30\u7684\u5177\u4F53\u573A\u666F\u3002 \u2F50\u5982\uFF1AHDFS\u8D1F\u8D23\u2F24\u6570\u636E\u91CF\u5B58\u50A8\uFF0CMapReduce\uFF08Hive\uFF09\u8D1F\u8D23\u2F24\u6570\u636E\u91CF\u7684\u5206\u6790\u8BA1\u7B97\u3002</p><h4 id="impala\u7684\u8BDE\u751F" tabindex="-1"><a class="header-anchor" href="#impala\u7684\u8BDE\u751F" aria-hidden="true">#</a> Impala\u7684\u8BDE\u2F63</h4><p>\u4E4B\u524D\u5B66\u4E60\u7684Hive\u4EE5\u53CAMR\u9002\u5408\u79BB\u7EBF\u6279\u5904\u7406\uFF0C\u4F46\u662F\u5BF9\u4EA4\u4E92\u5F0F\u67E5\u8BE2\u7684\u573A\u666F\u2F46\u80FD\u4E3A\u2F12(\u8981\u6C42\u5FEB\u901F\u54CD\u5E94)\uFF0C\u6240\u4EE5\u4E3A\u4E86\u89E3\u51B3\u67E5\u8BE2\u901F\u5EA6\u7684\u95EE\u9898\uFF0CCloudera\u516C\u53F8\u4F9D\u636EGoogle\u7684Dremel\u5F00\u53D1\u4E86Impala\u3002</p><p>Impala\u629B\u5F03\u4E86MapReduce\uFF0C\u4F7F\u2F64\u4E86\u7C7B\u4F3C\u4E8E\u4F20\u7EDF\u7684<strong>MPP\u6570\u636E\u5E93\u6280\u672F</strong>\uFF0C\u2F24\u2F24\u63D0\u2FBC\u4E86\u67E5\u8BE2\u7684\u901F\u5EA6\u3002</p><h4 id="mpp\u662F\u4EC0\u4E48" tabindex="-1"><a class="header-anchor" href="#mpp\u662F\u4EC0\u4E48" aria-hidden="true">#</a> MPP\u662F\u4EC0\u4E48\uFF1F</h4><p>MPP (Massively Parallel Processing)\uFF0C\u5C31\u662F\u2F24\u89C4\u6A21\u5E76\u2F8F\u5904\u7406\uFF0C\u5728MPP\u96C6\u7FA4\u4E2D\uFF0C\u6BCF\u4E2A\u8282\u70B9\u8D44\u6E90\u90FD\u662F\u72EC\u2F74\u4EAB\u6709(\u4E5F\u5C31\u662F\u6709\u72EC\u2F74\u7684\u78C1\u76D8\u548C\u5185\u5B58)\uFF0C \u6BCF\u4E2A\u8282\u70B9\u901A\u8FC7\u2F79\u7EDC\u4E92\u76F8\u8FDE\u63A5\uFF0C\u5F7C\u6B64\u534F\u540C\u8BA1\u7B97\uFF0C\u4F5C\u4E3A\u6574\u4F53\u63D0\u4F9B\u6570\u636E\u670D\u52A1\u3002</p><p>\u7B80\u5355\u6765\u8BF4\uFF0CMPP\u662F\u5C06\u4EFB\u52A1\u5E76\u2F8F\u7684\u5206\u6563\u5230\u591A\u4E2A\u670D\u52A1\u5668\u548C\u8282\u70B9\u4E0A\uFF0C\u5728\u6BCF\u4E2A\u8282\u70B9\u4E0A\u8BA1\u7B97\u5B8C\u6210\u540E\uFF0C\u5C06\u5404\u2F83\u90E8\u5206\u7684\u7ED3\u679C\u6C47\u603B\u5728\u2F00\u8D77\u5F97\u5230\u6700\u7EC8\u7684\u7ED3\u679C\u3002</p><p>\u5BF9\u4E8EMPP\u67B6\u6784\u7684\u8F6F\u4EF6\u6765\u8BF4\u805A\u5408\u64CD\u4F5C\uFF0C\u2F50\u5982\u8BA1\u7B97\u67D0\u5F20\u8868\u7684\u603B\u6761\u6570\uFF0C\u5219\u5148\u8FDB\u2F8F\u5C40\u90E8\u805A\u5408(\u6BCF\u4E2A\u8282\u70B9\u5E76\u2F8F\u8BA1\u7B97)\uFF0C\u7136\u540E\u628A\u5C40\u90E8\u6C47\u603B\u7ED3\u679C\u8FDB\u2F8F\u5168\u5C40\u805A\u5408(\u4E0EHadoop\u76F8\u4F3C)\u3002</p><h4 id="impala\u4E0Ehive\u5BF9\u6BD4" tabindex="-1"><a class="header-anchor" href="#impala\u4E0Ehive\u5BF9\u6BD4" aria-hidden="true">#</a> Impala\u4E0EHive\u5BF9\u2F50</h4><h5 id="impala\u7684\u6280\u672F\u4F18\u52BF" tabindex="-1"><a class="header-anchor" href="#impala\u7684\u6280\u672F\u4F18\u52BF" aria-hidden="true">#</a> Impala\u7684\u6280\u672F\u4F18\u52BF</h5><ul><li>Impala\u6CA1\u6709\u91C7\u53D6MapReduce\u4F5C\u4E3A\u8BA1\u7B97\u5F15\u64CE\u3002</li></ul><blockquote><p>MR \u6162\u7684\u539F\u56E0\uFF1A1.Shuffle\u9636\u6BB5\u7684IO, 2.Shuffle\u9636\u6BB5\u9ED8\u8BA4\u5BF9key\u5206\u533A\u6392\u5E8F</p></blockquote><p>MR\u662F\u2FAE\u5E38\u597D\u7684\u5206\u5E03\u5F0F\u5E76\u2F8F\u8BA1\u7B97\u6846\u67B6\uFF0C\u4F46MR\u5F15\u64CE\u66F4\u591A\u7684\u662F\u2FAF\u5411\u6279\u5904\u7406\u6A21\u5F0F\uFF0C\u2F7D\u4E0D\u662F\u2FAF\u5411\u4EA4\u4E92\u5F0F\u7684SQL\u6267\u2F8F\u3002</p><p>\u4E0EHive\u76F8\u2F50\uFF1AImpala\u628A\u6574\u4E2A\u67E5\u8BE2\u4EFB\u52A1\u8F6C\u4E3A\u2F00\u68F5\u6267\u2F8F\u8BA1\u5212\u6811\uFF0C\u2F7D\u4E0D\u662F\u2F00\u8FDE\u4E32\u7684MR\u4EFB\u52A1\uFF0C\u5728\u5206\u53D1\u6267\u2F8F\u8BA1\u5212\u540E\uFF0CImpala\u4F7F\u2F64\u62C9\u53D6\u7684\u2F45\u5F0F\u83B7\u53D6\u4E0A\u4E2A\u9636\u6BB5\u7684\u6267\u2F8F\u7ED3\u679C\uFF0C \u628A\u7ED3\u679C\u6570\u636E\u6309\u6267\u2F8F\u6811\u6D41\u5F0F\u4F20\u9012\u6C47\u96C6\uFF0C\u51CF\u5C11\u7684\u4E86\u628A\u4E2D\u95F4\u7ED3\u679C\u5199\u2F0A\u78C1\u76D8\u7684\u6B65\u9AA4\uFF0C\u518D\u4ECE\u78C1\u76D8\u8BFB\u53D6\u6570\u636E\u7684\u5F00\u9500\u3002</p><p>Impala\u4F7F\u2F64\u670D\u52A1\u7684\u2F45\u5F0F\u907F\u514D\u4E86\u6BCF\u6B21\u6267\u2F8F\u67E5\u8BE2\u90FD\u9700\u8981\u542F\u52A8\u7684\u5F00\u9500\uFF0C\u5373\u76F8\u2F50Hive\u6CA1\u4E86MR\u542F\u52A8\u65F6\u95F4\u3002</p><blockquote><p>\u7B80\u5355\u8BB2\u6709\u4E24\u4E2A\u4F18\u52BF\uFF1A1.\u907F\u514D\u6570\u636E\u843D\u78C1\u76D8, 2.\u5904\u7406\u8FDB\u7A0B\u65E0\u9700\u6BCF\u6B21\u542F\u52A8, 3.Impala\u9ED8\u8BA4\u4E0D\u4F1A\u5BF9\u6570\u636E\u8FDB\u884C\u6392\u5E8F</p></blockquote><ul><li>\u4F7F\u2F64LLVM(C++\u7F16\u5199\u7684\u7F16\u8BD1\u5668)\u4EA7\u2F63\u8FD0\u2F8F\u4EE3\u7801\uFF0C\u53EF\u4EE5\u9488\u5BF9\u7279\u5B9A\u67E5\u8BE2\u2F63\u6210\u7279\u5B9A\u4EE3\u7801\u3002</li><li>\u4F18\u79C0\u7684IO\u8C03\u5EA6\uFF0CImpala\u2F40\u6301\u76F4\u63A5\u6570\u636E\u5757\u8BFB\u53D6\u548C\u672C\u5730\u4EE3\u7801\u8BA1\u7B97\u3002</li><li>\u9009\u62E9\u9002\u5408\u7684\u6570\u636E\u5B58\u50A8\u683C\u5F0F\u53EF\u4EE5\u5F97\u5230\u6700\u597D\u7684\u6027\u80FD\uFF08Impala\u2F40\u6301\u591A\u79CD\u5B58\u50A8\u683C\u5F0F\uFF09\u3002</li><li>\u5C3D\u53EF\u80FD\u4F7F\u2F64\u5185\u5B58\uFF0C\u4E2D\u95F4\u7ED3\u679C\u4E0D\u5199\u78C1\u76D8\uFF0C\u53CA\u65F6\u901A\u8FC7\u2F79\u7EDC\u4EE5stream\u7684\u2F45\u5F0F\u4F20\u9012\u6570\u636E\u3002</li></ul><h5 id="impala\u4E0Ehive\u5BF9\u6BD4\u5206\u6790" tabindex="-1"><a class="header-anchor" href="#impala\u4E0Ehive\u5BF9\u6BD4\u5206\u6790" aria-hidden="true">#</a> Impala\u4E0EHive\u5BF9\u2F50\u5206\u6790</h5><p>\u67E5\u8BE2\u8FC7\u7A0B</p><ul><li>Hive\uFF1A\u5728Hive\u4E2D\uFF0C\u6BCF\u4E2A\u67E5\u8BE2\u90FD\u6709\u2F00\u4E2A&quot;\u51B7\u542F\u52A8&quot;\u7684\u5E38\u2EC5\u95EE\u9898\u3002\uFF08map,reduce\u6BCF\u6B21\u90FD\u8981\u542F\u52A8\u5173\u95ED\uFF0C\u7533\u8BF7\u8D44\u6E90\uFF0C\u91CA\u653E\u8D44\u6E90...\uFF09</li><li>Impala\uFF1AImpala\u907F\u514D\u4E86\u4EFB\u4F55\u53EF\u80FD\u7684\u542F\u52A8\u5F00\u9500\uFF0C\u8FD9\u662F\u2F00\u79CD\u672C\u5730\u67E5\u8BE2\u8BED\u2F94\u3002 \u56E0\u4E3A\u8981\u59CB\u7EC8\u5904\u7406\u67E5\u8BE2\uFF0C\u6240\u4EE5Impala\u5B88\u62A4\u7A0B\u5E8F\u8FDB\u7A0B\u603B\u662F\u5728\u96C6\u7FA4\u542F\u52A8\u4E4B\u540E\u5C31\u51C6\u5907\u5C31\u7EEA\u3002 \u5B88\u62A4\u8FDB\u7A0B\u5728\u96C6\u7FA4\u542F\u52A8\u4E4B\u540E\u53EF\u4EE5\u63A5\u6536\u67E5\u8BE2\u4EFB\u52A1\u5E76\u6267\u2F8F\u67E5\u8BE2\u4EFB\u52A1\u3002</li></ul><p>\u4E2D\u95F4\u7ED3\u679C</p><ul><li>Hive\uFF1AHive\u901A\u8FC7MR\u5F15\u64CE\u5B9E\u73B0\u6240\u6709\u4E2D\u95F4\u7ED3\u679C\uFF0C\u4E2D\u95F4\u7ED3\u679C\u9700\u8981\u843D\u76D8\uFF0C\u8FD9\u5BF9\u964D\u4F4E\u6570\u636E\u5904\u7406\u901F\u5EA6\u6709\u4E0D\u5229\u5F71\u54CD\u3002</li><li>Impala\uFF1A\u5728\u6267\u2F8F\u7A0B\u5E8F\u4E4B\u95F4(\u5373\u5B88\u62A4\u8FDB\u7A0B\u4E4B\u95F4)\u4F7F\u2F64\u6D41\u7684\u2F45\u5F0F\u4F20\u8F93\u4E2D\u95F4\u7ED3\u679C\uFF0C\u907F\u514D\u6570\u636E\u843D\u76D8\u3002\u5C3D\u53EF\u80FD\u4F7F\u2F64\u5185\u5B58\u907F\u514D\u78C1\u76D8\u5F00\u9500\u3002</li></ul><p>\u4EA4\u4E92\u67E5\u8BE2</p><ul><li>Hive\uFF1A\u5BF9\u4E8E\u4EA4\u4E92\u5F0F\u8BA1\u7B97\uFF0CHive\u4E0D\u662F\u7406\u60F3\u7684\u9009\u62E9\u3002</li><li>Impala\uFF1A\u5BF9\u4E8E\u4EA4\u4E92\u5F0F\u8BA1\u7B97\uFF0CImpala\u2FAE\u5E38\u9002\u5408\u3002(\u6570\u636E\u91CF\u7EA7PB\u7EA7)</li></ul><p>\u8BA1\u7B97\u5F15\u64CE</p><ul><li>Hive\uFF1A\u662F\u57FA\u4E8E\u6279\u5904\u7406\u7684Hadoop MapReduce</li><li>Impala\uFF1A\u66F4\u50CF\u662FMPP\u6570\u636E\u5E93\u6280\u672F</li></ul><p>\u5BB9\u9519</p><ul><li>Hive\uFF1AHive\u662F\u5BB9\u9519\u7684\uFF08\u901A\u8FC7MR&amp;Yarn\u5B9E\u73B0\uFF09</li><li>Impala\uFF1AImpala\u6CA1\u6709\u5BB9\u9519\uFF0C\u7531\u4E8E\u826F\u597D\u7684\u67E5\u8BE2\u6027\u80FD\uFF0CImpala\u9047\u5230\u9519\u8BEF\u4F1A\u91CD\u65B0\u6267\u2F8F\u2F00\u6B21\u67E5\u8BE2</li></ul><p>\u67E5\u8BE2\u901F\u5EA6</p><ul><li>Impala\uFF1AImpala\u2F50Hive\u5FEB3-90\u500D\u3002</li></ul><h5 id="impala\u4F18\u52BF\u603B\u7ED3" tabindex="-1"><a class="header-anchor" href="#impala\u4F18\u52BF\u603B\u7ED3" aria-hidden="true">#</a> Impala\u4F18\u52BF\u603B\u7ED3</h5><ol><li>Impala\u6700\u2F24\u4F18\u70B9\u5C31\u662F\u67E5\u8BE2\u901F\u5EA6\u5FEB(\u5728\u2F00\u5B9A\u6570\u636E\u91CF\u4E0B)\uFF1B</li><li>\u901F\u5EA6\u5FEB\u7684\u539F\u56E0\uFF1A\u907F\u514D\u4E86MR\u5F15\u64CE\u7684\u5F0A\u7AEF\uFF0C\u91C7\u2F64\u4E86MPP\u6570\u636E\u5E93\u6280\u672F\uFF0C</li></ol><h3 id="_1-3-impala\u7684\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#_1-3-impala\u7684\u7F3A\u70B9" aria-hidden="true">#</a> 1.3 Impala\u7684\u7F3A\u70B9</h3><ol><li>Impala\u5C5E\u4E8EMPP\u67B6\u6784\uFF0C\u53EA\u80FD\u505A\u5230\u767E\u8282\u70B9\u7EA7\uFF0C\u2F00\u822C\u5E76\u53D1\u67E5\u8BE2\u4E2A\u6570\u8FBE\u523020\u5DE6\u53F3\u65F6\uFF0C\u6574\u4E2A\u7CFB\u7EDF\u7684\u541E\u5410\u5DF2\u7ECF\u8FBE\u5230\u6EE1\u8D1F\u8377\u72B6\u6001\uFF0C\u518D\u6269\u5BB9\u8282\u70B9\u4E5F\u63D0\u5347\u4E0D\u4E86\u541E\u5410\u91CF\uFF0C\u5904\u7406\u6570\u636E\u91CF\u5728PB\u7EA7\u522B\u6700\u4F73\u3002</li><li>\u8D44\u6E90\u4E0D\u80FD\u901A\u8FC7YARN\u7EDF\u2F00\u8D44\u6E90\u7BA1\u7406\u8C03\u5EA6\uFF0C\u6240\u4EE5Hadoop\u96C6\u7FA4\u2F46\u6CD5\u5B9E\u73B0Impala\u3001Spark\u3001Hive\u7B49\u7EC4\u4EF6\u7684\u52A8\u6001\u8D44\u6E90\u5171\u4EAB\u3002</li></ol><h3 id="_1-4-\u9002\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_1-4-\u9002\u7528\u573A\u666F" aria-hidden="true">#</a> 1.4 \u9002\u2F64\u573A\u666F</h3><ul><li>Hive: \u590D\u6742\u7684\u6279\u5904\u7406\u67E5\u8BE2\u4EFB\u52A1\uFF0C\u6570\u636E\u8F6C\u6362\u4EFB\u52A1\uFF0C\u5BF9\u5B9E\u65F6\u6027\u8981\u6C42\u4E0D\u2FBC\u540C\u65F6\u6570\u636E\u91CF\u2F1C\u5F88\u2F24\u7684\u573A\u666F\u3002</li><li>Impala\uFF1A\u5B9E\u65F6\u6570\u636E\u5206\u6790\uFF0C\u4E0EHive\u914D\u5408\u4F7F\u2F64,\u5BF9Hive\u7684\u7ED3\u679C\u6570\u636E\u96C6\u8FDB\u2F8F\u5B9E\u65F6\u5206\u6790\u3002Impala\u4E0D\u80FD\u5B8C\u5168\u53D6\u4EE3Hive\uFF0CImpala\u53EF\u4EE5\u76F4\u63A5\u5904\u7406Hive\u8868\u4E2D\u7684\u6570\u636E\u3002</li></ul><h2 id="\u7B2C-2-\u90E8\u5206-impala-\u5B89\u88C5\u4E0E\u5165\u2ED4\u6848\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u7B2C-2-\u90E8\u5206-impala-\u5B89\u88C5\u4E0E\u5165\u2ED4\u6848\u4F8B" aria-hidden="true">#</a> \u7B2C 2 \u90E8\u5206 Impala \u5B89\u88C5\u4E0E\u2F0A\u2ED4\u6848\u4F8B</h2><h3 id="_2-1-\u96C6\u7FA4\u51C6\u5907" tabindex="-1"><a class="header-anchor" href="#_2-1-\u96C6\u7FA4\u51C6\u5907" aria-hidden="true">#</a> 2.1 \u96C6\u7FA4\u51C6\u5907</h3><h4 id="_2-1-1-\u5B89\u88C5hadoop-hive" tabindex="-1"><a class="header-anchor" href="#_2-1-1-\u5B89\u88C5hadoop-hive" aria-hidden="true">#</a> 2.1.1 \u5B89\u88C5Hadoop,Hive</h4><p>Impala\u7684\u5B89\u88C5\u9700\u8981\u63D0\u524D\u88C5\u597DHadoop\uFF0CHive\u8FD9\u4E24\u4E2A\u6846\u67B6\uFF0C</p><blockquote><p>HDFS: Impala \u6570\u636E\u5B58\u50A8\u5728 HDFS; Hive: Impala \u76F4\u63A5\u4F7F\u7528 Hive \u5143\u6570\u636E\u7BA1\u7406\u6570\u636E\u3002</p></blockquote><p>Hive\u9700\u8981\u5728\u6240\u6709\u7684Impala\u5B89\u88C5\u7684\u8282\u70B9\u4E0A\u2FAF\u90FD\u8981\u6709\uFF0C\u56E0\u4E3AImpala\u9700\u8981\u5F15\u2F64Hive\u7684\u4F9D\u8D56\u5305</p><p>Hadoop\u7684\u6846\u67B6\u9700\u8981\u2F40\u6301C\u7A0B\u5E8F\u8BBF\u95EE\u63A5\u2F1D\uFF0C\u67E5\u770B\u4E0B\u56FE\uFF0C\u5982\u679C\u6709\u8BE5\u8DEF\u5F84\u6709 <code>.so</code> \u7ED3\u5C3E\u2F42\u4EF6\uFF0C\u5C31\u8BC1\u660E\u2F40\u6301C</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>ll /opt/zmn/servers/hadoop-2.9.2/lib/native/
total <span class="token number">5020</span>
drwxr-xr-x. <span class="token number">2</span> root root      <span class="token number">94</span> Dec <span class="token number">18</span> <span class="token number">17</span>:43 examples
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">1440164</span> Dec <span class="token number">18</span> <span class="token number">17</span>:43 libhadoop.a
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">1632592</span> Dec <span class="token number">18</span> <span class="token number">17</span>:43 libhadooppipes.a
lrwxrwxrwx. <span class="token number">1</span> root root      <span class="token number">18</span> Dec <span class="token number">18</span> <span class="token number">17</span>:34 libhadoop.so -<span class="token operator">&gt;</span> libhadoop.so.1.0.0
-rwxr-xr-x. <span class="token number">1</span> root root  <span class="token number">842132</span> Dec <span class="token number">18</span> <span class="token number">17</span>:43 libhadoop.so.1.0.0
-rw-r--r--. <span class="token number">1</span> root root  <span class="token number">476106</span> Dec <span class="token number">18</span> <span class="token number">17</span>:43 libhadooputils.a
-rw-r--r--. <span class="token number">1</span> root root  <span class="token number">454188</span> Dec <span class="token number">18</span> <span class="token number">17</span>:43 libhdfs.a
lrwxrwxrwx. <span class="token number">1</span> root root      <span class="token number">16</span> Dec <span class="token number">18</span> <span class="token number">17</span>:34 libhdfs.so -<span class="token operator">&gt;</span> libhdfs.so.0.0.0
-rwxr-xr-x. <span class="token number">1</span> root root  <span class="token number">284815</span> Dec <span class="token number">18</span> <span class="token number">17</span>:43 libhdfs.so.0.0.0
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="_2-1-2-\u51C6\u5907impala\u7684\u6240\u6709\u4F9D\u8D56\u5305" tabindex="-1"><a class="header-anchor" href="#_2-1-2-\u51C6\u5907impala\u7684\u6240\u6709\u4F9D\u8D56\u5305" aria-hidden="true">#</a> 2.1.2 \u51C6\u5907Impala\u7684\u6240\u6709\u4F9D\u8D56\u5305</h4><p>Cloudera\u516C\u53F8\u5BF9\u4E8EImpala\u7684\u5B89\u88C5\u53EA\u63D0\u4F9B\u4E86rpm\u5305\u6CA1\u6709\u63D0\u4F9Btar\u5305\uFF1B\u6240\u4EE5\u6211\u4EEC\u9009\u62E9\u4F7F\u2F64Cloudera\u7684rpm\u5305\u8FDB\u2F8FImpala\u7684\u5B89\u88C5\u3002 \u4F46\u662F\u53E6\u5916\u2F00\u4E2A\u95EE\u9898\uFF0CImpala\u7684rpm\u5305\u4F9D\u8D56\u2FAE\u5E38\u591A\u7684\u5176\u4ED6\u7684rpm\u5305\uFF0C\u6211\u4EEC\u53EF\u4EE5\u2F00\u4E2A\u4E2A\u7684\u5C06\u4F9D\u8D56\u627E\u51FA\u6765\uFF0C\u4F46\u662F\u8FD9\u79CD\u2F45\u5F0F\u5B9E\u5728\u662F\u6D6A\u8D39\u65F6\u95F4\u3002</p><p>Linux\u7CFB\u7EDF\u4E2D\u5BF9\u4E8Erpm\u5305\u7684\u4F9D\u8D56\u7BA1\u7406\u63D0\u4F9B\u4E86\u2F00\u4E2A\u2FAE\u5E38\u597D\u7684\u7BA1\u7406\u2F2F\u5177\u53EB\u505AYum,\u7C7B\u4F3C\u4E8EJava\u2F2F\u7A0B\u4E2D\u7684\u5305\u7BA1\u7406\u2F2F\u5177Maven,Maven\u53EF\u4EE5\u2F83\u52A8\u641C\u5BFB\u6307\u5B9AJar\u6240\u9700\u7684\u5176\u5B83\u4F9D\u8D56\u5E76\u2F83\u52A8\u4E0B\u8F7D\u6765\u3002 Yum\u540C\u7406\u53EF\u4EE5\u2FAE\u5E38\u2F45\u4FBF\u7684\u8BA9\u6211\u4EEC\u8FDB\u2F8Frpm\u5305\u7684\u5B89\u88C5\uFF0C\u2F46\u9700\u5173\u5FC3\u5F53\u524Drpm\u6240\u9700\u7684\u4F9D\u8D56\u3002\u4F46\u662F\u4E0EMaven\u4E0B\u8F7D\u5176\u5B83\u4F9D\u8D56\u9700\u8981\u5230\u4E2D\u592E\u4ED3\u5E93\u2F00\u6837\uFF0C Yum\u4E0B\u8F7D\u4F9D\u8D56\u6240\u9700\u7684\u6E90\u4E5F\u662F\u5728\u653E\u7F6E\u5728\u56FD\u5916\u670D\u52A1\u5668\u5E76\u4E14\u5176\u4E2D\u6CA1\u6709\u5B89\u88C5Impala\u6240\u9700\u8981\u7684rpm\u5305\uFF0C \u6240\u4EE5\u9ED8\u8BA4\u7684\u8FD9\u79CDYum\u6E90\u53EF\u80FD\u4E0B\u8F7D\u4F9D\u8D56\u5931\u8D25\u3002\u6240\u4EE5\u6211\u4EEC\u53EF\u4EE5\u2F83\u2F30\u6307\u5B9AYum\u53BB\u54EA\u2FA5\u4E0B\u8F7D\u6240\u9700\u4F9D\u8D56\u3002</p><p>rpm\u2F45\u5F0F\u5B89\u88C5: \u9700\u8981\u2F83\u2F30\u7BA1\u7406rpm\u5305\u7684\u4F9D\u8D56\u5173\u7CFB\uFF0C\u2FAE\u5E38\u9EBB\u70E6\uFF1B\u89E3\u51B3\u4F9D\u8D56\u5173\u7CFB\u4F7F\u2F64yum\uFF1B\u9ED8\u8BA4Yum\u6E90\u6CA1\u6709Impala\u7684rpm\u5B89\u88C5\u5305\uFF0C \u6240\u4EE5\u6211\u4EEC\u2F83\u2F30\u51C6\u5907\u597D\u6240\u6709\u7684Impala\u5B89\u88C5\u6240\u9700\u7684rpm\u5305\uFF0C\u5236\u4F5CYum\u672C\u5730\u6E90\uFF0C\u914D\u7F6EYum\u547D\u4EE4\u53BB\u5230\u6211\u4EEC\u51C6\u5907\u7684Yun\u6E90\u4E2D\u4E0B\u8F7DImpala\u7684rpm\u5305\u8FDB\u2F8F\u5B89\u88C5\u3002</p><h5 id="\u5177\u4F53\u5236\u4F5C\u6B65\u9AA4" tabindex="-1"><a class="header-anchor" href="#\u5177\u4F53\u5236\u4F5C\u6B65\u9AA4" aria-hidden="true">#</a> \u5177\u4F53\u5236\u4F5C\u6B65\u9AA4</h5><p>Yum\u6E90\u662FCentos\u5F53\u4E2D\u4E0B\u8F7D\u8F6F\u4EF6rpm\u5305\u7684\u5730\u5740\uFF0C\u56E0\u6B64\u901A\u8FC7\u5236\u4F5C\u672C\u5730Yum\u6E90\u5E76\u6307\u5B9AYum\u547D\u4EE4\u4F7F\u2F64\u672C\u5730Yum\u6E90\u3002 \u4E3A\u4E86\u4F7FYum\u547D\u4EE4(\u672C\u673A\uFF0C\u8DE8\u2F79\u7EDC\u8282\u70B9)\u53EF\u4EE5\u901A\u8FC7\u2F79\u7EDC\u8BBF\u95EE\u5230\u672C\u5730\u6E90\uFF0C\u6211\u4EEC\u4F7F\u2F64Httpd\u8FD9\u79CD\u9759\u6001\u8D44\u6E90\u670D\u52A1\u5668\u6765\u5F00\u653E\u6211\u4EEC\u4E0B\u8F7D\u6240\u6709\u7684rpm\u5305\u3002</p><ol><li>Linux121\u5B89\u88C5Httpd\u670D\u52A1\u5668</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># yum\u2F45\u5F0F\u5B89\u88C5httpd\u670D\u52A1\u5668</span>
yum <span class="token function">install</span> httpd -y
<span class="token comment"># \u542F\u52A8httpd\u670D\u52A1\u5668</span>
systemctl start httpd
<span class="token comment"># \u9A8C\u8BC1httpd\u2F2F\u4F5C\u662F\u5426\u6B63\u5E38,\u9ED8\u8BA4\u7AEF\u2F1D\u662F80\uFF0C\u53EF\u4EE5\u7701\u7565</span>
http://linux121
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><img src="`+r+`" alt="\u6D4B\u8BD5\u9875\u9762"></p><ol start="2"><li>\u65B0\u5EFA\u2F00\u4E2A\u6D4B\u8BD5\u2EDA\u2FAF</li></ol><p>httpd\u9ED8\u8BA4\u5B58\u653E\u2EDA\u2FAF\u8DEF\u5F84: <code>/var/www/html/</code></p><p>\u65B0\u5EFA\u2F00\u4E2A\u2EDA\u2FAFtest.html</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">doctype</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>This is a httpd page !!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div>`,69),y=n("\u8BBF\u95EE: "),I={href:"http://linux121/test.html",target:"_blank",rel:"noopener noreferrer"},f=n("http://linux121/test.html"),x=a("p",null,[a("img",{src:u,alt:"\u6D4B\u8BD5\u9875\u9762\u5C55\u793A"})],-1),A=a("ol",{start:"3"},[a("li",null,"\u4E0B\u8F7DImpala\u5B89\u88C5\u6240\u9700rpm\u5305")],-1),q=n("Impala\u6240\u9700\u5B89\u88C5\u5305\u9700\u8981\u5230Cloudera\u63D0\u4F9B\u7684\u5730\u5740\u4E0B\u8F7D\uFF1A"),E={href:"https://archive.cloudera.com/p/cdh5/repo-as-tarball/5.7.6/cdh5.7.6-centos7.tar.gz",target:"_blank",rel:"noopener noreferrer"},w=n("https://archive.cloudera.com/p/cdh5/repo-as-tarball/5.7.6/cdh5.7.6-centos7.tar.gz"),S=p(`<blockquote><p>\u4E0B\u8F7D\u9700\u8981\u767B\u5F55\u8D26\u6237\uFF0CGG</p></blockquote><p>\u6CE8\u610F\uFF1A\u8BE5tar.gz\u5305\u662F\u5305\u542B\u4E86Cloudera\u6240\u63D0\u4F9B\u7684\u2F0F\u4E4E\u6240\u6709rpm\u5305\uFF0C\u4F46\u662F\u4E3A\u4E86\u2F45\u4FBF\u6211\u4EEC\u4E0D\u518D\u53BB\u68B3\u7406\u5176\u4E2D\u4F9D\u8D56\u5173\u7CFB\uFF0C\u5168\u90E8\u4E0B\u8F7D\u6765\uFF0C\u6574\u4E2A\u2F42\u4EF6\u2F50\u8F83\u2F24\uFF0C\u67093.8G\u3002 \u9009\u62E9\u2F00\u4E2A\u78C1\u76D8\u7A7A\u95F4\u591F\u7684\u8282\u70B9\uFF0C\u540E\u7EED\u8FD8\u8981\u628A\u538B\u7F29\u5305\u89E3\u538B\u6240\u4EE5\u78C1\u76D8\u7A7A\u95F4\u8981\u5269\u4F5910G\u4EE5\u4E0A\u3002</p><p>\u79FB\u52A8\u8BE5\u5B89\u88C5\u5305\u5230 <code>/opt/zmn/software</code></p><p>\u89E3\u538B\u7F29: <code>tar -zxvf cdh5.7.6-centos7.tar.gz</code></p><ol start="4"><li>\u4F7F\u2F64Httpd\u76DB\u653E\u4F9D\u8D56\u5305</li></ol><p>\u521B\u5EFA\u8F6F\u94FE\u63A5\u5230 <code>/var/www/html</code> \u4E0B</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">ln</span> -s /opt/zmn/software/cdh/5.7.6 /var/www/html/cdh57
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div>`,7),C=n("\u9A8C\u8BC1: "),_={href:"http://linux121/cdh57/",target:"_blank",rel:"noopener noreferrer"},T=n("http://linux121/cdh57/"),H=p(`<p>\u5982\u679C\u63D0\u793A403 forbidden</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">vim</span> /etc/selinux/config

<span class="token comment"># \u5C06SELINUX=enforcing\u6539\u4E3ASELINUX=disabled</span>
<span class="token comment"># \u4FEE\u6539\u4E4B\u540E\u8981\u8BB0\u5F97\u91CD\u542F\u673A\u5668\uFF01\uFF01\u4E4B\u524D\u4FEE\u6539\u8FC7\u53EF\u4EE5\u4E0D\u2F64\u4FEE\u6539\uFF01\uFF01</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="5"><li>\u4FEE\u6539Yum\u6E90\u914D\u7F6E\u2F42\u4EF6</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /etc/yum.repos.d

<span class="token comment">#\u521B\u5EFA\u2F00\u4E2A\u65B0\u7684\u914D\u7F6E\u2F42\u4EF6</span>
<span class="token function">vim</span> local.repo

<span class="token comment">#\u6DFB\u52A0\u5982\u4E0B\u5185\u5BB9</span>
<span class="token punctuation">[</span>local<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>local
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>http://linux121/cdh57/
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li><code>[local]</code>: server id, \u552F\u4E00\u6807\u5FD7</li><li><code>name</code>: \u5BF9\u5F53\u524D\u6E90\u7684\u63CF\u8FF0</li><li><code>baseurl</code>: \u8BBF\u95EE\u5F53\u524D\u6E90\u7684\u5730\u5740\u4FE1\u606F</li><li><code>gpgcheck</code>: 1/0, gpg\u6821\u9A8C</li><li><code>enabled</code>: 1/0, \u662F\u5426\u4F7F\u2F64\u5F53\u524D\u6E90</li></ul><ol start="6"><li>\u5206\u53D1local.repo\u2F42\u4EF6\u5230\u5176\u5B83\u8282\u70B9</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>rsync-script local.repo
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_2-2-\u5B89\u88C5impala" tabindex="-1"><a class="header-anchor" href="#_2-2-\u5B89\u88C5impala" aria-hidden="true">#</a> 2.2 \u5B89\u88C5Impala</h3><h4 id="_2-2-1-\u96C6\u7FA4\u89C4\u5212" tabindex="-1"><a class="header-anchor" href="#_2-2-1-\u96C6\u7FA4\u89C4\u5212" aria-hidden="true">#</a> 2.2.1 \u96C6\u7FA4\u89C4\u5212</h4><table><thead><tr><th>\u670D\u52A1\u540D\u79F0</th><th style="text-align:center;">linux121</th><th style="text-align:center;">linux122</th><th style="text-align:center;">linux123</th></tr></thead><tbody><tr><td>impala-catalogd</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;">\u2714</td></tr><tr><td>impala-statestored</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;">\u2714</td></tr><tr><td>impala-server</td><td style="text-align:center;">\u2714</td><td style="text-align:center;">\u2714</td><td style="text-align:center;">\u2714</td></tr></tbody></table><p>Impala\u2EC6\u2F8A</p><table><thead><tr><th>\u89D2\u8272</th><th>\u63CF\u8FF0</th><th>\u8FDB\u7A0B\u540D</th></tr></thead><tbody><tr><td><code>impala-server</code></td><td>\u8FD9\u4E2A\u8FDB\u7A0B\u662FImpala\u771F\u6B63\u2F2F\u4F5C\u7684\u8FDB\u7A0B\uFF0C\u5B98\u2F45\u5EFA\u8BAE\u628A impala-server \u5B89\u88C5\u5728 datanode \u8282\u70B9\uFF0C\u66F4\u9760\u8FD1\u6570\u636E(\u65B9\u4FBF\u77ED\u8DEF\u8BFB\u53D6)</td><td><code>impalad</code></td></tr><tr><td><code>impala-statestored</code></td><td>\u5065\u5EB7\u76D1\u63A7\u2EC6\u2F8A\uFF0C\u4E3B\u8981\u76D1\u63A7 impala-server, \u5F53 impala-server \u51FA\u73B0\u5F02\u5E38\u65F6\u544A\u77E5\u7ED9\u5176\u5B83 impala-server</td><td><code>statestored</code></td></tr><tr><td><code>impala-catalogd</code></td><td>\u7BA1\u7406\u548C\u7EF4\u62A4\u5143\u6570\u636E(Hive)\u3001impala\u66F4\u65B0\u64CD\u4F5C\u7B49\uFF1B\u628A impala-server \u66F4\u65B0\u7684\u5143\u6570\u636E\u901A\u77E5\u7ED9\u5176\u5B83 impala-server</td><td><code>catalogd</code></td></tr></tbody></table><blockquote><p>\u5B98\u2F45\u5EFA\u8BAE <code>statestored</code> \u4E0E <code>catalog</code> \u5B89\u88C5\u5728\u540C\u2F00\u8282\u70B9\u4E0A\uFF01\uFF01(\u56E0\u4E3A\u5E95\u5C42\u4F1A\u6709\u4E00\u4E9B\u4F9D\u8D56)</p></blockquote><h4 id="_2-2-2-\u5177\u4F53\u5B89\u88C5\u6B65\u9AA4" tabindex="-1"><a class="header-anchor" href="#_2-2-2-\u5177\u4F53\u5B89\u88C5\u6B65\u9AA4" aria-hidden="true">#</a> 2.2.2 \u5177\u4F53\u5B89\u88C5\u6B65\u9AA4</h4><p>Linux123</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum <span class="token function">install</span> impala -y
yum <span class="token function">install</span> impala-server -y
yum <span class="token function">install</span> impala-state-store -y
yum <span class="token function">install</span> impala-catalog -y
yum <span class="token function">install</span> impala-shell -y
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Linux121\u4E0ELinux122</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum <span class="token function">install</span> impala-server -y
yum <span class="token function">install</span> impala-shell -y
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h5 id="\u914D\u7F6Eimpala" tabindex="-1"><a class="header-anchor" href="#\u914D\u7F6Eimpala" aria-hidden="true">#</a> \u914D\u7F6EImpala</h5><ol><li>\u4FEE\u6539 <code>[linux123]/opt/zmn/servers/hive-2.3.7/conf/hive-site.xml</code></li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--\u6307\u5B9Ametastore\u5730\u5740\uFF0C\u4E4B\u524D\u6DFB\u52A0\u8FC7\u53EF\u4EE5\u4E0D\u2F64\u6DFB\u52A0 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hive.metastore.uris<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>thrift://linux121:9083,thrift://linux123:9083<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hive.metastore.client.socket.timeout<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>3600<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ol start="2"><li>\u5206\u53D1Hive\u5B89\u88C5\u5305\u5230\u96C6\u7FA4\u8282\u70B9</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">rsync</span> -r /opt/zmn/servers/hive-2.3.7/ linux122:/opt/zmn/servers/
<span class="token function">rsync</span> -r /opt/zmn/servers/hive-2.3.7/ linux121:/opt/zmn/servers/
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>\u5982\u679C\u524D\u9762\u5DF2\u7ECF\u6709 Hive \u7684\u670D\u52A1\u7684\u8BDD\uFF0C\u6B64\u65F6\u53EA\u9700\u8981\u590D\u5236\u914D\u7F6E\u6587\u4EF6\u5373\u53EF\u3002</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /opt/zmn/servers/hive-2.3.7/conf/

<span class="token comment"># \u590D\u5236\u6587\u4EF6</span>
<span class="token function">scp</span> hive-site.xml linux121:<span class="token environment constant">$PWD</span>
<span class="token function">scp</span> hive-site.xml linux122:<span class="token environment constant">$PWD</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="3"><li>Linux123\u542F\u52A8metastore\u670D\u52A1</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">nohup</span> hive --service metastore <span class="token operator">&amp;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>metastore \u53EF\u4EE5\u5728 linux121 \u4E0A\u4E5F\u8D77\u4E00\u4EFD</p></blockquote><p>\u542F\u52A8 <code>hiveserver2</code> \u670D\u52A1</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">nohup</span> hive --service hiveserver2 <span class="token operator">&amp;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="4"><li>\u4FEE\u6539HDFS\u96C6\u7FA4 <code>hdfs-site.xml</code>\uFF0C\u914D\u7F6EHDFS\u96C6\u7FA4\u7684\u77ED\u8DEF\u8BFB\u53D6</li></ol><p>\u4EC0\u4E48\u662F\u77ED\u8DEF\u8BFB\u53D6\uFF1F</p><p>\u5728HDFS\u4E2D\u901A\u8FC7DataNode\u6765\u8BFB\u53D6\u6570\u636E\u3002\u4F46\u662F\uFF0C\u5F53\u5BA2\u6237\u7AEF\u5411DataNode\u8BF7\u6C42\u8BFB\u53D6\u2F42\u4EF6\u65F6\uFF0CDataNode\u5C31\u4F1A\u4ECE\u78C1\u76D8\u8BFB\u53D6\u8BE5\u2F42\u4EF6\u5E76\u901A\u8FC7TCP socket\u5C06\u6570\u636E\u53D1\u9001\u5230\u5BA2\u6237\u7AEF\u3002</p><p>\u6240\u8C13&quot;\u77ED\u8DEF&quot;\u662F\u6307Client\u5BA2\u6237\u7AEF\u76F4\u63A5\u8BFB\u53D6\u2F42\u4EF6\u3002\u5F88\u660E\u663E\uFF0C\u8FD9\u79CD\u60C5\u51B5\u53EA\u5728\u5BA2\u6237\u7AEF\u4E0E\u6570\u636E\u653E\u5728\u540C\u2F00\u5730\u70B9\uFF08\u8BD1\u8005\u6CE8\uFF1A\u540C\u2F00\u4E3B\u673A\uFF09\u65F6\u624D\u6709\u53EF\u80FD\u53D1\u2F63\u3002\u77ED\u8DEF\u8BFB\u5BF9\u4E8E\u8BB8\u591A\u5E94\u2F64\u7A0B\u5E8F\u4F1A\u5E26\u6765\u91CD\u2F24\u7684\u6027\u80FD\u63D0\u5347\u3002</p><p>\u77ED\u8DEF\u8BFB\u53D6\uFF1A\u5C31\u662FClient\u4E0EDataNode\u5C5E\u4E8E\u540C\u2F00\u8282\u70B9\uFF0C\u2F46\u9700\u518D\u7ECF\u8FC7\u2F79\u7EDC\u4F20\u8F93\u6570\u636E\uFF0C\u76F4\u63A5\u672C\u5730\u8BFB\u53D6\u3002</p><p>\u8981\u914D\u7F6E\u77ED\u8DEF\u672C\u5730\u8BFB\uFF0C\u9700\u8981\u9A8C\u8BC1\u672C\u673AHadoop\u662F\u5426\u6709 <code>libhadoop.so</code>;</p><p>\u8FDB\u2F0A\u2F00\u4E0B\u2F6C\u5F55\uFF1A<code>cd /opt/zmn/servers/hadoop-2.9.2/lib/native</code></p><p>\u77ED\u8DEF\u8BFB\u53D6\u914D\u7F6E\u6B65\u9AA4</p><ul><li>\u521B\u5EFA\u77ED\u8DEF\u8BFB\u53D6\u672C\u5730\u4E2D\u8F6C\u7AD9</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u6240\u6709\u8282\u70B9\u521B\u5EFA\u2F00\u4E0B\u2F6C\u5F55</span>
<span class="token function">mkdir</span> -p /var/lib/hadoop-hdfs
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>\u4FEE\u6539hdfs-site.xml</li></ul><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- \u6DFB\u52A0\u5982\u4E0B\u5185\u5BB9 --&gt;</span>
    <span class="token comment">&lt;!-- \u6253\u5F00\u77ED\u8DEF\u8BFB\u53D6\u5F00\u5173 --&gt;</span>
    <span class="token comment">&lt;!-- \u6253\u5F00\u77ED\u8DEF\u8BFB\u53D6\u914D\u7F6E--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.client.read.shortcircuit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--\u8FD9\u662F\u2F00\u4E2AUNIX\u57DF\u5957\u63A5\u5B57\u7684\u8DEF\u5F84\uFF0C\u5C06\u2F64\u4E8EDataNode\u548C\u672C\u5730HDFS\u5BA2\u6237\u673A\u4E4B\u95F4\u7684\u901A\u4FE1 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.domain.socket.path<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/var/lib/hadoop-hdfs/dn_socket<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--block\u5B58\u50A8\u5143\u6570\u636E\u4FE1\u606F\u5F00\u53D1\u5F00\u5173 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.datanode.hdfs-blocks-metadata.enabled<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.client.file-block-storage-locations.timeout<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>30000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>\u6CE8\uFF1A\u5206\u53D1\u5230\u96C6\u7FA4\u5176\u5B83\u8282\u70B9\uFF0C\u7136\u540E\u91CD\u542FHadoop\u96C6\u7FA4\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /opt/zmn/servers/hadoop-2.9.2/etc/hadoop/

<span class="token comment"># \u590D\u5236\u6587\u4EF6</span>
<span class="token function">scp</span> hdfs-site.xml linux122:<span class="token environment constant">$PWD</span>
<span class="token function">scp</span> hdfs-site.xml linux123:<span class="token environment constant">$PWD</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#\u505C\u2F4C\u96C6\u7FA4</span>
stop-dfs.sh
stop-yarn.sh
<span class="token comment">#\u542F\u52A8\u96C6\u7FA4</span>
start-dfs.sh
start-yarn.sh
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol start="5"><li>Impala\u5177\u4F53\u914D\u7F6E</li></ol><p><strong>\u5F15\u2F64HDFS\uFF0CHive\u914D\u7F6E</strong></p><p>\u4F7F\u2F64Yum\u2F45\u5F0F\u5B89\u88C5Impala\uFF0C\u9ED8\u8BA4\u7684Impala\u914D\u7F6E\u2F42\u4EF6\u2F6C\u5F55\u4E3A <code>/etc/impala/conf</code>\uFF0C\u4F7F\u2F64Impala\u8981\u4F9D\u8D56Hadoop\uFF0CHive\u6846\u67B6\uFF0C\u6240\u4EE5\u9700\u8981\u628AHdfs,Hive\u7684\u914D\u7F6E\u2F42\u4EF6\u544A\u77E5Impala\u3002</p><p>\u6267\u2F8F\u4EE5\u4E0B\u547D\u4EE4\u628AHdfs\uFF0CHive\u7684\u914D\u7F6E\u2F42\u4EF6\u8F6F\u94FE\u63A5\u5230 <code>/etc/impala/conf</code> \u4E0B</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">ln</span> -s /opt/zmn/servers/hadoop-2.9.2/etc/hadoop/core-site.xml /etc/impala/conf/core-site.xml
<span class="token function">ln</span> -s /opt/zmn/servers/hadoop-2.9.2/etc/hadoop/hdfs-site.xml /etc/impala/conf/hdfs-site.xml
<span class="token function">ln</span> -s /opt/zmn/servers/hive-2.3.7/conf/hive-site.xml /etc/impala/conf/hive-site.xml
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>\u6CE8\uFF1A\u6240\u6709\u8282\u70B9\u90FD\u8981\u6267\u2F8F\u6B64\u547D\u4EE4\uFF01</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u9A8C\u8BC1\u547D\u4EE4</span>
<span class="token builtin class-name">cd</span> /etc/impala/conf
ll
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>Impala\u2F83\u8EAB\u914D\u7F6E</strong></p><p>\u6240\u6709\u8282\u70B9\u66F4\u6539Impala\u9ED8\u8BA4\u914D\u7F6E\u2F42\u4EF6\u4EE5\u53CA\u6DFB\u52A0mysql\u7684\u9A71\u52A8\u5305</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">vim</span> /etc/default/impala

<span class="token comment"># \u66F4\u65B0\u5982\u4E0B\u5185\u5BB9</span>
<span class="token assign-left variable">IMPALA_CATALOG_SERVICE_HOST</span><span class="token operator">=</span>linux123
<span class="token assign-left variable">IMPALA_STATE_STORE_HOST</span><span class="token operator">=</span>linux123
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u6240\u6709\u8282\u70B9\u521B\u5EFAmysql\u7684\u9A71\u52A8\u5305\u7684\u8F6F\u94FE\u63A5</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#\u521B\u5EFA\u8282\u70B9</span>
<span class="token function">mkdir</span> -p /usr/share/java
<span class="token function">ln</span> -s /opt/zmn/servers/hive-2.3.7/lib/mysql-connector-java-5.1.46.jar /usr/share/java/mysql-connector-java.jar
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u4FEE\u6539 <code>bigtop</code> \u7684 <code>java_home</code> \u8DEF\u5F84</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u6240\u6709\u8282\u70B9\u90FD\u9700\u8981\u4FEE\u6539</span>
<span class="token function">vim</span> /etc/default/bigtop-utils

<span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/opt/zmn/servers/jdk1.8.0_231
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>\u6CE8\u610F\uFF1AApache Bigtop \u662F\u2F00\u4E2A\u9488\u5BF9\u57FA\u7840\u8BBE\u65BD\u2F2F\u7A0B\u5E08\u548C\u6570\u636E\u79D1\u5B66\u5BB6\u7684\u5F00\u6E90\u9879\u2F6C\uFF0C\u65E8\u5728\u5168\u2FAF\u6253\u5305\u3001\u6D4B\u8BD5\u548C\u914D\u7F6E\u9886\u5148\u7684\u5F00\u6E90\u2F24\u6570\u636E\u7EC4\u4EF6/\u9879\u2F6C\u3002Impala\u9879\u2F6C\u4E2D\u4F7F\u2F64\u5230\u4E86\u6B64\u8F6F\u4EF6\u3002</p></blockquote><p><strong>\u542F\u52A8Impala</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#linux123\u542F\u52A8\u5982\u4E0B\u2EC6\u2F8A</span>
<span class="token function">service</span> impala-state-store start
<span class="token function">service</span> impala-catalog start
<span class="token function">service</span> impala-server start
<span class="token comment">#\u5176\u4F59\u8282\u70B9\u542F\u52A8\u5982\u4E0B\u2EC6\u2F8A</span>
<span class="token function">service</span> impala-server start
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>\u9A8C\u8BC1 Impala \u542F\u52A8\u7ED3\u679C</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">ps</span> -ef <span class="token operator">|</span> <span class="token function">grep</span> impala
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u6D4F\u89C8\u5668Web\u754C\u2FAF\u9A8C\u8BC1</p>`,65),R=n("\u8BBF\u95EE "),F=a("code",null,"Impalad",-1),Q=n(" \u7684\u7BA1\u7406\u754C\u2FAF: "),B={href:"http://linux123:25000/",target:"_blank",rel:"noopener noreferrer"},D=n("http://linux123:25000/"),U=n("\u8BBF\u95EE "),N=a("code",null,"statestored",-1),L=n(" \u7684\u7BA1\u7406\u754C\u2FAF: "),P={href:"http://linux123:25010/",target:"_blank",rel:"noopener noreferrer"},M=n("http://linux123:25010/"),O=p(`<blockquote><p>\u6CE8\u610F\uFF1A\u542F\u52A8\u4E4B\u540E\u6240\u6709\u5173\u4E8EImpala\u7684\u2F47\u5FD7\u9ED8\u8BA4\u90FD\u5728 <code>/var/log/impala</code> \u8FD9\u4E2A\u8DEF\u5F84\u4E0B\uFF0CLinux123\u673A\u5668\u4E0A\u2FAF\u5E94\u8BE5\u6709\u4E09\u4E2A\u8FDB\u7A0B\uFF0C Linux121\u4E0ELinux122\u673A\u5668\u4E0A\u2FAF\u53EA\u6709\u2F00\u4E2A\u8FDB\u7A0B\uFF0C\u5982\u679C\u8FDB\u7A0B\u4E2A\u6570\u4E0D\u5BF9\uFF0C\u53BB\u5BF9\u5E94\u2F6C\u5F55\u4E0B\u67E5\u770B\u62A5\u9519\u2F47\u5FD7.</p></blockquote><p><strong>\u6D88\u9664Impala\u5F71\u54CD</strong></p><p>\u7531\u4E8E\u4F7F\u2F64Yum\u547D\u4EE4\u5B89\u88C5Impala\uFF0C\u6211\u4EEC\u9009\u62E9\u4F7F\u2F64yum\u2F83\u52A8\u8FDB\u2F8FImpala\u4F9D\u8D56\u7684\u5B89\u88C5\u548C\u5904\u7406\uFF0C\u6240\u4EE5\u672C\u6B21\u5B89\u88C5\u9ED8\u8BA4\u4F1A\u628AImpala\u4F9D\u8D56\u7684\u6240\u6709\u6846\u67B6\u90FD\u4F1A\u5B89\u88C5\uFF0C\u2F50\u5982Hadoop,Hive,Mysql\u7B49\uFF0C \u4E3A\u4E86\u4FDD\u8BC1\u6211\u4EEC\u2F83\u2F30\u5B89\u88C5\u7684Hadoop\u7B49\u4F7F\u2F64\u6B63\u5E38\uFF0C\u6211\u4EEC\u9700\u8981\u5220\u9664\u6389Impala\u9ED8\u8BA4\u5B89\u88C5\u7684\u5176\u5B83\u6846\u67B6</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u4F7F\u2F64which\u547D\u4EE4 \u67E5\u627Ehadoop,hive\u7B49\u4F1A\u53D1\u73B0\uFF0C\u547D\u4EE4\u2F42\u4EF6\u662F/usr/bin/hadoop \u2F7D\u2FAE\u6211\u4EEC\u2F83\u2F30\u5B89\u88C5\u7684\u8DEF\u5F84\uFF0C\u9700\u8981\u628A\u8FD9\u4E9B\u5220\u9664\u6389,\u6240\u6709\u8282\u70B9\u90FD\u8981\u6267\u2F8F</span>
<span class="token function">rm</span> -rf /usr/bin/hadoop
<span class="token function">rm</span> -rf /usr/bin/hdfs
<span class="token function">rm</span> -rf /usr/bin/hive
<span class="token function">rm</span> -rf /usr/bin/beeline
<span class="token function">rm</span> -rf /usr/bin/hiveserver2

<span class="token comment"># \u91CD\u65B0\u2F63\u6548\u73AF\u5883\u53D8\u91CF</span>
<span class="token builtin class-name">source</span> /etc/profile
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><code>jps</code> \u65F6\u51FA\u73B0\u6CA1\u6709\u540D\u5B57\u7684\u8FDB\u7A0B\u6216\u8005 process information unavailable</p><p>\u89E3\u51B3\u2F45\u5F0F: <code>rm -rf /tmp/hsperfdata_impala</code></p><h3 id="_2-3-impala\u5165\u2ED4\u6848\u4F8B" tabindex="-1"><a class="header-anchor" href="#_2-3-impala\u5165\u2ED4\u6848\u4F8B" aria-hidden="true">#</a> 2.3 Impala\u2F0A\u2ED4\u6848\u4F8B</h3><p>\u4F7F\u2F64Yum\u2F45\u5F0F\u5B89\u88C5Impala\u540E\uFF0C<code>impala-shell</code> \u53EF\u4EE5\u5168\u5C40\u4F7F\u2F64\uFF1B\u8FDB\u2F0Aimpala-shell\u547D\u4EE4\u2F8F</p><p>impala-shell\u8FDB\u2F0A\u5230impala\u7684\u4EA4\u4E92\u7A97\u2F1D</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[root@linux123 ~]# impala-shell
Starting Impala Shell without Kerberos authentication
Connected to linux123:21000
Server version: impalad version 2.5.0-cdh5.7.6 RELEASE (build ecbba4f4e6d5eec6c33c1e02412621b8b9c71b6a)
***********************************************************************************
Welcome to the Impala shell. Copyright (c) 2015 Cloudera, Inc. All rights reserved.
(Impala Shell v2.5.0-cdh5.7.6 (ecbba4f) built on Tue Feb 21 14:54:50 PST 2017)

You can run a single query from the command line using the &#39;-q&#39; option.
***********************************************************************************
[linux123:21000] &gt;  show databases;
Query: show databases
+------------------+----------------------------------------------+
| name             | comment                                      |
+------------------+----------------------------------------------+
| _impala_builtins | System database for Impala builtin functions |
| default          | Default Hive database                        |
+------------------+----------------------------------------------+
Fetched 2 row(s) in 0.22s
[linux123:21000] &gt; 

</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>\u5982\u679C\u60F3\u8981\u4F7F\u2F64Impala ,\u9700\u8981\u5C06\u6570\u636E\u52A0\u8F7D\u5230Impala\u4E2D\uFF0C\u5982\u4F55\u52A0\u8F7D\u6570\u636E\u5230Impala\u4E2D\u5462\uFF1F</p><ul><li>\u4F7F\u2F64Impala\u7684\u5916\u90E8\u8868\uFF0C\u8FD9\u79CD\u9002\u2F64\u4E8E\u5DF2\u7ECF\u6709\u6570\u636E\u2F42\u4EF6\uFF0C\u53EA\u9700\u5C06\u6570\u636E\u2F42\u4EF6\u62F7\u2EC9\u5230HDFS\u4E0A\uFF0C\u521B\u5EFA\u2F00\u5F20Impala\u5916\u90E8\u8868\uFF0C\u5C06\u5916\u90E8\u8868\u7684\u5B58\u50A8\u4F4D\u7F6E\u6307\u5411\u6570\u636E\u2F42\u4EF6\u7684\u4F4D\u7F6E\u5373\u53EF\u3002\uFF08\u7C7B\u4F3CHive\uFF09</li><li>\u901A\u8FC7Insert\u2F45\u5F0F\u63D2\u2F0A\u6570\u636E\uFF0C\u9002\u2F64\u4E8E\u6211\u4EEC\u6CA1\u6709\u6570\u636E\u2F42\u4EF6\u7684\u573A\u666F\u3002</li></ul><h4 id="\u5165\u95E8\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#\u5165\u95E8\u4F7F\u7528" aria-hidden="true">#</a> \u5165\u95E8\u4F7F\u7528</h4><ol><li>\u51C6\u5907\u6570\u636E\u2F42\u4EF6 <code>[linux123/root/impala_data]user.csv</code></li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>392456197008193000,\u5F20\u4E09,20,0
267456198006210000,\u674E\u56DB,25,1
892456199007203000,\u738B\u4E94,24,1
492456198712198000,\u8D75\u516D,26,2
392456197008193000,\u5F20\u4E09,20,0
392456197008193000,\u5F20\u4E09,20,0
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol start="2"><li>\u521B\u5EFAHDFS\u5B58\u653E\u6570\u636E\u7684\u8DEF\u5F84</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># linux123</span>
hadoop fs -mkdir -p /user/impala/t1
<span class="token comment">#\u4E0A\u4F20\u672C\u5730user.csv\u5230hdfs /user/impala/table1</span>
hadoop fs -put user.csv /user/impala/t1
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="3"><li>\u521B\u5EFA\u8868</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#\u8FDB\u2F0Aimpala-shell</span>
impala-shell
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">use</span> <span class="token keyword">default</span><span class="token punctuation">;</span>
<span class="token comment">-- \u8868\u5982\u679C\u5B58\u5728\u5219\u5220\u9664</span>
<span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> t1<span class="token punctuation">;</span>
<span class="token comment">-- \u6267\u2F8F\u521B\u5EFA</span>
<span class="token keyword">create</span> external <span class="token keyword">table</span> t1<span class="token punctuation">(</span>id string<span class="token punctuation">,</span>name string<span class="token punctuation">,</span>age <span class="token keyword">int</span><span class="token punctuation">,</span>gender <span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token keyword">row</span> format delimited <span class="token keyword">fields</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">&#39;,&#39;</span> location <span class="token string">&#39;/user/impala/t1&#39;</span><span class="token punctuation">;</span>
<span class="token comment">-- WARNINGS: Impala does not have READ_WRITE access to path &#39;hdfs://linux121:9000/user/impala&#39;</span>
<span class="token comment">-- \u53EF\u4EE5\u901A\u8FC7\u5173\u95ED\u96C6\u7FA4\u6743\u9650\u6821\u9A8C\u7684\u65B9\u5F0F\u89E3\u51B3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="4"><li>\u67E5\u8BE2\u6570\u636E</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[linux122:21000] &gt; select * from t1;
Query: select * from t1
+--------------------+------+-----+--------+
| id                 | name | age | gender |
+--------------------+------+-----+--------+
| 392456197008193000 | \u5F20\u4E09 | 20  | 0      |
| 267456198006210000 | \u674E\u56DB | 25  | 1      |
| 892456199007203000 | \u738B\u4E94 | 24  | 1      |
| 492456198712198000 | \u8D75\u516D | 26  | 2      |
| 392456197008193000 | \u5F20\u4E09 | 20  | 0      |
| 392456197008193000 | \u5F20\u4E09 | 20  | 0      |
+--------------------+------+-----+--------+
Fetched 6 row(s) in 5.90s
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ol start="5"><li>\u521B\u5EFAt2\u8868</li></ol><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- \u521B\u5EFA\u2F00\u4E2A\u5185\u90E8\u8868</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> t2<span class="token punctuation">(</span>id string<span class="token punctuation">,</span>name string<span class="token punctuation">,</span>age <span class="token keyword">int</span><span class="token punctuation">,</span>gender <span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token keyword">row</span> format delimited <span class="token keyword">fields</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">&#39;,&#39;</span><span class="token punctuation">;</span>
<span class="token comment">-- \u67E5\u770B\u8868\u7ED3\u6784</span>
<span class="token keyword">desc</span> t1<span class="token punctuation">;</span>
<span class="token keyword">desc</span> formatted t2<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="6"><li>\u63D2\u2F0A\u6570\u636E\u5230t2\u5E76\u9A8C\u8BC1\u7ED3\u679C</li></ol><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- \u63D2\u5165\u6570\u636E</span>
<span class="token keyword">insert</span> overwrite <span class="token keyword">table</span> t2 <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t1 <span class="token keyword">where</span> gender <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">-- \u9A8C\u8BC1\u6570\u636E</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t2<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="\u66F4\u65B0\u5143\u6570\u636E" tabindex="-1"><a class="header-anchor" href="#\u66F4\u65B0\u5143\u6570\u636E" aria-hidden="true">#</a> \u66F4\u65B0\u5143\u6570\u636E</h4><p>\u4F7F\u2F64Beeline\u8FDE\u63A5Hive\u67E5\u770BHive\u4E2D\u7684\u6570\u636E\uFF0C\u53D1\u73B0\u901A\u8FC7Impala\u521B\u5EFA\u7684\u8868\uFF0C\u5BFC\u2F0A\u7684\u6570\u636E\u90FD\u53EF\u4EE5\u88ABHive\u611F\u77E5\u5230\u3002</p><p>\u2F29\u7ED3\uFF1A</p><ol><li>\u4E0A\u2FAF\u6848\u4F8B\u4E2DImpala\u7684\u6570\u636E\u2F42\u4EF6\u6211\u4EEC\u51C6\u5907\u7684\u662F\u4EE5\u9017\u53F7\u5206\u9694\u7684\u2F42\u672C\u2F42\u4EF6\uFF0C\u5B9E\u9645\u4E0A\uFF0CImpala\u53EF\u4EE5\u2F40\u6301RCFile,SequenceFile,Parquet\u7B49\u591A\u79CD\u2F42\u4EF6\u683C\u5F0F\u3002</li><li>Impala\u4E0EHive\u5143\u6570\u636E\u7684\u5173\u7CFB\uFF1F</li></ol><blockquote><p>Hive\u5BF9\u5143\u6570\u636E\u7684\u66F4\u65B0\u64CD\u4F5C\u4E0D\u80FD\u88ABImpala\u611F\u77E5\u5230\uFF1B</p><p>Impala\u5BF9\u5143\u6570\u636E\u7684\u66F4\u65B0\u64CD\u4F5C\u53EF\u4EE5\u88ABHive\u611F\u77E5\u5230\u3002</p></blockquote><p>Impala\u540C\u6B65Hive\u5143\u6570\u636E\u547D\u4EE4\uFF1A\u2F3F\u52A8\u6267\u2F8Finvalidate metadata\uFF0C\uFF08\u540E\u7EED\u8BE6\u7EC6\u8BB2\u89E3\uFF09</p><p>Impala\u662F\u901A\u8FC7Hive\u7684metastore\u670D\u52A1\u6765\u8BBF\u95EE\u548C\u64CD\u4F5CHive\u7684\u5143\u6570\u636E\uFF0C\u4F46\u662FHive\u5BF9\u8868\u8FDB\u2F8F\u521B\u5EFA\u5220\u9664\u4FEE\u6539\u7B49\u64CD\u4F5C\uFF0CImpala\u662F\u2F46\u6CD5\u2F83\u52A8\u8BC6\u522B\u5230Hive\u4E2D\u5143\u6570\u636E\u7684\u53D8\u66F4\u60C5\u51B5\u7684\uFF0C \u5982\u679C\u60F3\u8BA9Impala\u8BC6\u522B\u5230Hive\u5143\u6570\u636E\u7684\u53D8\u5316\uFF0C\u8FDB\u2F0Aimpala-shell\u4E4B\u540E\u2FB8\u5148\u8981\u505A\u7684\u64CD\u4F5C\u5C31\u662F\u6267\u2F8F <code>invalidate metadata;</code>, \u8BE5\u547D\u4EE4\u4F1A\u5C06\u6240\u6709\u7684Impala\u7684\u5143\u6570\u636E\u5931\u6548\u5E76\u91CD\u65B0\u4ECE\u5143\u6570\u636E\u5E93\u540C\u6B65\u5143\u6570\u636E\u4FE1\u606F\u3002\u540E\u2FAF\u8BE6\u7EC6\u8BB2\u89E3\u5143\u6570\u636E\u66F4\u65B0\u547D\u4EE4\u3002</p><ol start="3"><li>Impala\u64CD\u4F5CHDFS\u4F7F\u2F64\u7684\u662FImpala\u2F64\u6237\uFF0C\u6240\u4EE5\u4E3A\u4E86\u907F\u514D\u6743\u9650\u95EE\u9898\uFF0C\u6211\u4EEC\u53EF\u4EE5\u9009\u62E9\u5173\u95ED\u6743\u9650\u6821\u9A8C</li></ol><p>\u5728hdfs-site.xml\u4E2D\u6DFB\u52A0\u5982\u4E0B\u914D\u7F6E\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--\u5173\u95EDhdfs\u6743\u9650\u6821\u9A8C --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.permissions.enabled<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="\u7B2C-3-\u90E8\u5206-impala\u7684\u67B6\u6784\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#\u7B2C-3-\u90E8\u5206-impala\u7684\u67B6\u6784\u539F\u7406" aria-hidden="true">#</a> \u7B2C 3 \u90E8\u5206 Impala\u7684\u67B6\u6784\u539F\u7406</h2><h3 id="\u7B2C-1-\u8282-impala\u7684\u7EC4\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u7B2C-1-\u8282-impala\u7684\u7EC4\u4EF6" aria-hidden="true">#</a> \u7B2C 1 \u8282 Impala\u7684\u7EC4\u4EF6</h3><p>Impala\u662F\u2F00\u4E2A\u5206\u5E03\u5F0F\u3001\u2F24\u89C4\u6A21\u5E76\u2F8F\u5904\u7406(MPP)\u6570\u636E\u5E93\u5F15\u64CE\uFF0C\u5B83\u5305\u62EC\u591A\u4E2A\u8FDB\u7A0B\u3002</p><blockquote><p>Impala\u4E0EHive\u7C7B\u4F3C\uFF0C\u4E0D\u662F\u6570\u636E\u5E93\u2F7D\u662F\u6570\u636E\u5206\u6790\u2F2F\u5177\u3002</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#\u5728linux123\u6267\u2F8F</span>
<span class="token function">ps</span> -ef <span class="token operator">|</span> <span class="token function">grep</span> impala

impala     <span class="token number">2305</span>      <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">14</span>:32 ?        00:00:15 /usr/lib/impala/sbin/statestored -log_dir<span class="token operator">=</span>/var/log/impala -state_store_port<span class="token operator">=</span><span class="token number">24000</span>
impala     <span class="token number">2400</span>      <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">14</span>:32 ?        00:00:16 /usr/lib/impala/sbin/catalogd -log_dir<span class="token operator">=</span>/var/log/impala
impala     <span class="token number">2484</span>      <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">14</span>:32 ?        00:00:17 /usr/lib/impala/sbin/impalad -log_dir<span class="token operator">=</span>/var/log/impala -catalog_service_host<span class="token operator">=</span>linux123 -state_store_port<span class="token operator">=</span><span class="token number">24000</span> -use_statestore -state_store_host<span class="token operator">=</span>linux123 -be_port<span class="token operator">=</span><span class="token number">22000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><img src="`+d+'" alt="impala\u67B6\u6784"></p><h4 id="impalad" tabindex="-1"><a class="header-anchor" href="#impalad" aria-hidden="true">#</a> impalad</h4><p>\u2EC6\u2F8A\u540D\u79F0\u4E3A Impala Daemon, \u662F\u5728\u6BCF\u4E2A\u8282\u70B9\u4E0A\u8FD0\u2F8F\u7684\u8FDB\u7A0B\uFF0C\u662FImpala\u7684\u6838\u2F3C\u7EC4\u4EF6\uFF0C\u8FDB\u7A0B\u540D\u662F <code>Impalad</code>;</p><p>\u4F5C\u2F64: \u8D1F\u8D23\u8BFB\u5199\u6570\u636E\u2F42\u4EF6\uFF0C\u63A5\u6536\u6765\u2F83Impala-shell\uFF0CJDBC,ODBC\u7B49\u7684\u67E5\u8BE2\u8BF7\u6C42\uFF0C\u4E0E\u96C6\u7FA4\u5176\u5B83Impalad\u5206\u5E03\u5F0F\u5E76\u2F8F\u5B8C\u6210\u67E5\u8BE2\u4EFB\u52A1\uFF0C\u5E76\u5C06\u67E5\u8BE2\u7ED3\u679C\u8FD4\u56DE\u7ED9\u4E2D\u2F3C\u534F\u8C03\u8005\u3002</p><p>\u4E3A\u4E86\u4FDD\u8BC1Impalad\u8FDB\u7A0B\u4E86\u89E3\u5176\u5B83Impalad\u7684\u5065\u5EB7\u72B6\u51B5\uFF0CImpalad\u8FDB\u7A0B\u4F1A\u2F00\u76F4\u4E0Estatestore\u4FDD\u6301\u901A\u4FE1\u3002</p><p>Impalad\u670D\u52A1\u7531\u4E09\u4E2A\u6A21\u5757\u7EC4\u6210\uFF1AQuery Planner(\u751F\u6210\u67E5\u8BE2\u8BA1\u5212)\u3001Query Coordinator(\u67E5\u8BE2\u534F\u8C03\u5668)\u548CQuery Executor(\u6267\u884C\u5F15\u64CE)\u3002 \u524D\u4E24\u4E2A\u6A21\u5757\u7EC4\u6210\u524D\u7AEF\uFF0C\u8D1F\u8D23\u63A5\u6536SQL\u67E5\u8BE2\u8BF7\u6C42\uFF0C\u89E3\u6790SQL\u5E76\u8F6C\u6362\u6210\u6267\u2F8F\u8BA1\u5212\uFF0C\u4EA4\u7531\u540E\u7AEF\u6267\u2F8F\uFF0C</p><h4 id="statestored" tabindex="-1"><a class="header-anchor" href="#statestored" aria-hidden="true">#</a> statestored</h4><p>statestore\u76D1\u63A7\u96C6\u7FA4\u4E2DImpalad\u7684\u5065\u5EB7\u72B6\u51B5\uFF0C\u5E76\u5C06\u96C6\u7FA4\u5065\u5EB7\u4FE1\u606F\u540C\u6B65\u7ED9Impalad</p><p>statestore\u8FDB\u7A0B\u540D\u4E3A <code>statestored</code></p><h4 id="catalogd" tabindex="-1"><a class="header-anchor" href="#catalogd" aria-hidden="true">#</a> catalogd</h4><p>Impala\u6267\u2F8F\u7684SQL\u8BED\u53E5\u5F15\u53D1\u5143\u6570\u636E\u53D1\u2F63\u53D8\u5316\u65F6\uFF0Ccatalog\u670D\u52A1\u8D1F\u8D23\u628A\u8FD9\u4E9B\u5143\u6570\u636E\u7684\u53D8\u5316\u540C\u6B65\u7ED9\u5176\u5B83Impalad\u8FDB\u7A0B(\u2F47\u5FD7\u9A8C\u8BC1,\u76D1\u63A7statestore\u8FDB\u7A0B\u2F47\u5FD7)</p><p>catalog\u670D\u52A1\u5BF9\u5E94\u8FDB\u7A0B\u540D\u79F0\u662F <code>catalogd</code></p><p>\u7531\u4E8E\u2F00\u4E2A\u96C6\u7FA4\u9700\u8981\u2F00\u4E2A <code>catalogd</code> \u4EE5\u53CA\u2F00\u4E2A <code>statestored</code> \u8FDB\u7A0B\uFF0C\u2F7D\u4E14 <code>catalogd</code> \u8FDB\u7A0B\u6240\u6709\u8BF7\u6C42\u90FD\u662F\u7ECF\u8FC7 <code>statestored</code> \u8FDB\u7A0B\u53D1\u9001\uFF0C \u6240\u4EE5\u5B98\u2F45\u5EFA\u8BAE\u8BA9 <code>statestored</code> \u8FDB\u7A0B\u4E0E <code>catalogd</code> \u8FDB\u7A0B\u5B89\u6392\u540C\u4E2A\u8282\u70B9\u3002</p><blockquote><p>\u67D0\u4E2A impalad \u8FDB\u7A0B\u66F4\u65B0\u539F\u6570\u636E\u4E4B\u540E\uFF0Ccatelogd \u8D1F\u8D23\u628A\u8FD9\u4E2A\u66F4\u65B0\u540C\u6B65\u7ED9\u5176\u4ED6 impalad\u3002</p><p>\u4E3A\u4EC0\u4E48 hive \u66F4\u65B0\u5143\u6570\u636E impala \u611F\u77E5\u4E0D\u5230\u5462? \u96C6\u7FA4\u542F\u52A8\u65F6\u62C9\u53D6\u5143\u6570\u636E\u540C\u6B65\u7ED9 impalad \u8FDB\u7A0B, \u540E\u7EED\u53EA\u6709\u624B\u52A8\u6267\u884C\u4E86 <code>invalidate metadata</code> \u547D\u4EE4 \u6216\u8005 <code>refresh</code> \u547D\u4EE4\u624D\u4F1A\u518D\u6B21\u62C9\u53D6\u5143\u6570\u636E\u3002</p></blockquote><h3 id="\u7B2C-2-\u8282-impala\u7684\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#\u7B2C-2-\u8282-impala\u7684\u67E5\u8BE2" aria-hidden="true">#</a> \u7B2C 2 \u8282 Impala\u7684\u67E5\u8BE2</h3><p><img src="'+m+`" alt="Impala\u7684\u67E5\u8BE2\u6267\u884C\u6D41\u7A0B"></p><ol><li>Client\u63D0\u4EA4\u4EFB\u52A1</li></ol><p>Client\u53D1\u9001\u2F00\u4E2ASQL\u67E5\u8BE2\u8BF7\u6C42\u5230\u4EFB\u610F\u2F00\u4E2AImpalad\u8282\u70B9\uFF0C\u4F1A\u8FD4\u56DE\u2F00\u4E2AqueryId\u2F64\u4E8E\u4E4B\u540E\u7684\u5BA2\u6237\u7AEF\u64CD\u4F5C\u3002</p><blockquote><p>\u4EE5 impala-shell \u4F5C\u4E3A\u5BA2\u6237\u7AEF\u6765\u8BB2, \u5728\u54EA\u4E2A\u8282\u70B9\u542F\u52A8 impala-shell, \u5C31\u4F1A\u5C06\u8BF7\u6C42\u53D1\u9001\u5230\u54EA\u4E2A\u8282\u70B9\u7684 impalad</p></blockquote><ol start="2"><li>\u2F63\u6210\u5355\u673A\u548C\u5206\u5E03\u5F0F\u6267\u2F8F\u8BA1\u5212\u3010\u91CD\u8981\u3011</li></ol><p>SQL\u63D0\u4EA4\u5230Impalad\u8282\u70B9\u4E4B\u540E\uFF0C\u8FDB\u7A0B\u4E2D\u7684Analyser\u4F1A\u4F9D\u6B21\u6267\u2F8FSQL\u7684\u8BCD\u6CD5\u5206\u6790\u3001\u8BED\u6CD5\u5206\u6790\u3001\u8BED\u4E49\u5206\u6790\u7B49\u64CD\u4F5C\uFF1B</p><p>\u7136\u540E\u4ECEMySQL\u5143\u6570\u636E\u5E93\u4E2D\u83B7\u53D6\u5143\u6570\u636E\uFF0C\u4ECEHDFS\u7684\u540D\u79F0\u8282\u70B9\u4E2D\u83B7\u53D6\u6570\u636E\u5730\u5740\uFF0C\u4EE5\u5F97\u5230\u5B58\u50A8\u8FD9\u4E2A\u67E5\u8BE2\u76F8\u5173\u6570\u636E\u7684\u6240\u6709\u6570\u636E\u8282\u70B9;</p><p>\u89E3\u6790\u5B8C\u6210\u4E4B\u540E\u4F1A\u751F\u6210\u4E24\u4E2A\u8BA1\u5212\uFF1A\u5355\u673A\u6267\u884C\u8BA1\u5212\u548C\u5206\u5E03\u5F0F\u5E76\u884C\u6267\u884C\u8BA1\u5212\u3002</p><ul><li>\u5355\u673A\u6267\u2F8F\u8BA1\u5212\uFF1A \u6839\u636E\u4E0A\u2F00\u6B65\u5BF9SQL\u8BED\u53E5\u7684\u5206\u6790\uFF0C\u7531Planner\u5148\u2F63\u6210\u5355\u673A\u7684\u6267\u2F8F\u8BA1\u5212\uFF0C\u8BE5\u6267\u2F8F\u8BA1\u5212\u662F\u7531PlanNode\u7EC4\u6210\u7684\u2F00\u68F5\u6811\uFF0C\u8FD9\u4E2A\u8FC7\u7A0B\u4E2D\u4E5F\u4F1A\u6267\u2F8F\u2F00\u4E9BSQL\u4F18\u5316\uFF0C\u4F8B\u5982Join\u987A\u5E8F\u6539\u53D8\u3001\u8C13\u8BCD\u4E0B\u63A8\u7B49\u3002</li><li>\u5206\u5E03\u5F0F\u5E76\u2F8F\u6267\u884C\u8BA1\u5212\uFF1A\u5C06\u5355\u673A\u6267\u2F8F\u8BA1\u5212\u8F6C\u6362\u6210\u5206\u5E03\u5F0F\u5E76\u2F8F\u7269\u7406\u6267\u2F8F\u8BA1\u5212\uFF0C\u7269\u7406\u6267\u2F8F\u8BA1\u5212\u7531\u2F00\u4E2A\u4E2A\u7684Fragment\u7EC4\u6210\uFF0CFragment\u4E4B\u95F4\u6709\u6570\u636E\u4F9D\u8D56\u5173\u7CFB\uFF0C\u5904\u7406\u8FC7\u7A0B\u4E2D\u9700\u8981\u5728\u539F\u6709\u7684\u6267\u2F8F\u8BA1\u5212\u4E4B\u4E0A\u52A0\u2F0A\u2F00\u4E9BExchangeNode\u548CDataStreamSink\u4FE1\u606F\u7B49\u3002</li></ul><blockquote><p>Fragment\uFF1A sql\u2F63\u6210\u7684\u5206\u5E03\u5F0F\u6267\u2F8F\u8BA1\u5212\u7684\u2F00\u4E2A\u2F26\u4EFB\u52A1\uFF1B</p><p>DataStreamSink\uFF1A\u4F20\u8F93\u5F53\u524D\u7684Fragment, \u8F93\u51FA\u6570\u636E\u5230\u4E0D\u540C\u7684\u8282\u70B9</p></blockquote><ol start="3"><li>\u4EFB\u52A1\u8C03\u5EA6\u548C\u5206\u53D1</li></ol><p>Coordinator\u5C06Fragment(\u2F26\u4EFB\u52A1)\u6839\u636E\u6570\u636E\u5206\u533A\u4FE1\u606F\u53D1\u914D\u5230\u4E0D\u540C\u7684Impalad\u8282\u70B9\u4E0A\u6267\u2F8F\u3002Impalad\u8282\u70B9\u63A5\u6536\u5230\u6267\u2F8FFragment\u8BF7\u6C42\u4EA4\u7531Executor\u6267\u2F8F\u3002</p><ol start="4"><li>Fragment\u4E4B\u95F4\u7684\u6570\u636E\u4F9D\u8D56</li></ol><p>\u6BCF\u2F00\u4E2AFragment\u7684\u6267\u2F8F\u8F93\u51FA\u901A\u8FC7DataStreamSink\u53D1\u9001\u5230\u4E0B\u2F00\u4E2AFragment\uFF0CFragment\u8FD0\u2F8F\u8FC7\u7A0B\u4E2D\u4E0D\u65AD\u5411coordinator\u8282\u70B9\u6C47\u62A5\u5F53\u524D\u8FD0\u2F8F\u72B6\u6001\u3002</p><ol start="5"><li>\u7ED3\u679C\u6C47\u603B</li></ol><p>\u67E5\u8BE2\u7684SQL\u901A\u5E38\u60C5\u51B5\u4E0B\u9700\u8981\u6709\u2F00\u4E2A\u5355\u72EC\u7684Fragment\u2F64\u4E8E\u7ED3\u679C\u7684\u6C47\u603B\uFF0C\u5B83\u53EA\u5728Coordinator\u8282\u70B9\u8FD0\u2F8F\uFF0C\u5C06\u591A\u4E2A\u8282\u70B9\u7684\u6700\u7EC8\u6267\u2F8F\u7ED3\u679C\u6C47\u603B\uFF0C\u8F6C\u6362\u6210ResultSet\u4FE1\u606F\u3002</p><ol start="6"><li>\u83B7\u53D6\u7ED3\u679C</li></ol><p>\u5BA2\u6237\u7AEF\u8C03\u2F64\u83B7\u53D6ResultSet\u7684\u63A5\u2F1D\uFF0C\u8BFB\u53D6\u67E5\u8BE2\u7ED3\u679C\u3002</p><h4 id="\u67E5\u8BE2\u8BA1\u5212\u8BE6\u89E3\u793A\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u67E5\u8BE2\u8BA1\u5212\u8BE6\u89E3\u793A\u4F8B" aria-hidden="true">#</a> \u67E5\u8BE2\u8BA1\u5212\u8BE6\u89E3\u793A\u4F8B</h4><p>\u4EE5\u2F00\u4E2ASQL\u4F8B\u2F26\u6765\u5C55\u793A\u67E5\u8BE2\u8BA1\u5212</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- SQL\u8BED\u53E5</span>
<span class="token keyword">select</span> t1<span class="token punctuation">.</span>n1<span class="token punctuation">,</span>
       t2<span class="token punctuation">.</span>n2<span class="token punctuation">,</span>
       <span class="token function">count</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">as</span> c
<span class="token keyword">from</span> t1
       <span class="token keyword">join</span> t2 <span class="token keyword">on</span> t1<span class="token punctuation">.</span>id <span class="token operator">=</span> t2<span class="token punctuation">.</span>id
       <span class="token keyword">join</span> t3 <span class="token keyword">on</span> t1<span class="token punctuation">.</span>id <span class="token operator">=</span> t3<span class="token punctuation">.</span>id
<span class="token keyword">where</span> t3<span class="token punctuation">.</span>n3 <span class="token operator">between</span> <span class="token string">&#39;a&#39;</span> <span class="token operator">and</span> <span class="token string">&#39;f&#39;</span>
<span class="token keyword">group</span> <span class="token keyword">by</span> t1<span class="token punctuation">.</span>n1<span class="token punctuation">,</span> t2<span class="token punctuation">.</span>n2
<span class="token keyword">order</span> <span class="token keyword">by</span> c <span class="token keyword">desc</span> <span class="token keyword">limit</span> <span class="token number">100</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h5 id="queryplanner\u751F\u6210\u5355\u673A\u7684\u6267\u884C\u8BA1\u5212" tabindex="-1"><a class="header-anchor" href="#queryplanner\u751F\u6210\u5355\u673A\u7684\u6267\u884C\u8BA1\u5212" aria-hidden="true">#</a> QueryPlanner\u2F63\u6210\u5355\u673A\u7684\u6267\u2F8F\u8BA1\u5212</h5><p><img src="`+k+'" alt="\u5355\u673A\u6267\u884C\u8BA1\u5212"></p><p>\u5206\u6790\u4E0A\u2FAF\u7684\u5355\u673A\u6267\u2F8F\u8BA1\u5212:</p><ol><li>\u7B2C\u2F00\u6B65\u5148\u53BB\u626B\u63CFt1\u8868\u4E2D\u9700\u8981\u7684\u6570\u636E\uFF0C\u5982\u679C\u6570\u636E\u2F42\u4EF6\u5B58\u50A8\u662F\u5217\u5F0F\u5B58\u50A8\u6211\u4EEC\u53EF\u4EE5\u4FBF\u5229\u7684\u626B\u63CF\u5230\u6240\u9700\u7684\u5217id,n1;</li><li>\u63A5\u7740\u9700\u8981\u4E0Et2\u8868\u8FDB\u2F8FJoin\u64CD\u4F5C\uFF0C\u626B\u63CFt2\u8868\u4E0Et1\u8868\u7C7B\u4F3C\u83B7\u53D6\u5230\u6240\u9700\u6570\u636E\u5217id,n2;</li><li>t1\u4E0Et2\u8868\u8FDB\u2F8F\u5173\u8054\uFF0C\u5173\u8054\u4E4B\u540E\u518D\u4E0Et3\u8868\u8FDB\u2F8F\u5173\u8054\uFF0C\u8FD9\u2FA5Impala\u4F1A\u4F7F\u2F64\u8C13\u8BCD\u4E0B\u63A8\u626B\u63CFt3\u8868\u53EA\u53D6join\u6240\u9700\u6570\u636E\uFF1B</li><li>\u5BF9group by\u8FDB\u2F8F\u76F8\u5E94\u7684aggregation\u64CD\u4F5C\uFF0C</li><li>\u6700\u7EC8\u662F\u6392\u5E8F\u53D6\u51FA\u6307\u5B9A\u6570\u91CF\u7684\u6570\u636E\u8FD4\u56DE\u3002</li></ol><h5 id="\u5206\u5E03\u5F0F\u5E76\u884C\u6267\u884C\u8BA1\u5212" tabindex="-1"><a class="header-anchor" href="#\u5206\u5E03\u5F0F\u5E76\u884C\u6267\u884C\u8BA1\u5212" aria-hidden="true">#</a> \u5206\u5E03\u5F0F\u5E76\u2F8F\u6267\u2F8F\u8BA1\u5212</h5><p>\u6240\u8C13\u7684\u5206\u5E03\u5F0F\u5E76\u2F8F\u5316\u6267\u2F8F\u8BA1\u5212\u5C31\u662F\u5728\u5355\u673A\u6267\u2F8F\u8BA1\u5212\u57FA\u7840\u4E4B\u4E0A\u7ED3\u5408\u6570\u636E\u5206\u5E03\u5F0F\u5B58\u50A8\u7684\u7279\u70B9\uFF0C\u6309\u7167\u4EFB\u52A1\u7684\u8BA1\u7B97\u8981\u6C42\u628A\u5355\u673A\u6267\u2F8F\u8BA1\u5212\u62C6\u5206\u4E3A\u591A\u6BB5\u2F26\u4EFB\u52A1\uFF0C\u6BCF\u4E2A\u2F26\u4EFB\u52A1\u90FD\u662F\u53EF\u4EE5\u5E76\u2F8F\u6267\u2F8F\u7684\u3002 \u4E0A\u2FAF\u7684\u5355\u673A\u6267\u2F8F\u8BA1\u5212\u8F6C\u4E3A\u5206\u5E03\u5F0F\u5E76\u2F8F\u6267\u2F8F\u8BA1\u5212\u5982\u4E0B\u56FE\u6240\u793A\uFF1A</p><p><img src="'+b+'" alt="\u5206\u5E03\u5F0F\u6267\u884C\u8BA1\u5212"></p><p>\u5206\u5E03\u5F0F\u5E76\u2F8F\u6267\u2F8F\u8BA1\u5212\u6D41\u7A0B\u56FE</p><p><img src="'+h+`" alt="\u5206\u5E03\u5F0F\u5E76\u884C\u6267\u884C\u8BA1\u5212\u6D41\u7A0B\u56FE"></p><p>\u5206\u5E03\u5F0F\u6267\u2F8F\u8BA1\u5212\u4E2D\u6D89\u53CA\u5230\u591A\u8868\u7684Join, Impala\u4F1A\u6839\u636E\u8868\u7684\u2F24\u2F29\u6765\u51B3\u5B9AJoin\u7684\u2F45\u5F0F\uFF0C\u4E3B\u8981\u6709\u4E24\u79CD\uFF1A\u5206\u522B\u662FHashJoin\u4E0EBroadcast Join</p><p>\u4E0A\u2FAF\u5206\u5E03\u5F0F\u6267\u2F8F\u8BA1\u5212\u4E2D\u53EF\u4EE5\u770B\u51FAT1,T2\u8868\u2F24\u2F00\u4E9B\uFF0C\u2F7DT3\u8868\u2F29\u2F00\u4E9B\uFF0C \u6240\u4EE5\u5BF9\u4E8ET1\u4E0ET2\u7684Join Impala\u9009\u62E9\u4F7F\u2F64Hash Join, \u5BF9\u4E8ET3\u8868\u9009\u62E9\u4F7F\u2F64Broadcast\u2F45\u5F0F\uFF0C\u76F4\u63A5\u628AT3\u8868\u2F34\u64AD\u5230\u9700\u8981Join\u7684\u8282\u70B9\u4E0A\u3002</p><p>\u5206\u5E03\u5F0F\u5E76\u2F8F\u8BA1\u5212\u6D41\u7A0B</p><ol><li>T1\u548CT2\u4F7F\u2F64Hash join\uFF0C\u6B64\u65F6\u9700\u8981\u6309\u7167id\u7684\u503C\u5206\u522B\u5C06T1\u548CT2\u5206\u6563\u5230\u4E0D\u540C\u7684Impalad\u8FDB\u7A0B\uFF0Cid\u76F8\u540C\u7684\u6570\u636E\u4F1A\u6563\u5217\u5230\u76F8\u540C\u7684Impalad\u8FDB\u7A0B\u8FDB\u884Cjoin\uFF0C\u8FD9\u6837\u6BCF\u2F00\u4E2AJoin\u4E4B\u540E\u662F\u5168\u90E8\u6570\u636E\u7684\u2F00\u90E8\u5206</li><li>T1\u4E0ET2Join\u4E4B\u540E\u7684\u7ED3\u679C\u6570\u636E\u518D\u4E0ET3\u8868\u8FDB\u2F8FJoin, \u6B64\u65F6T3\u8868\u91C7\u2F64Broadcast\u2F45\u5F0F\u628A\u2F83\u2F30\u5168\u90E8\u6570\u636E(id\u5217)\u2F34\u64AD\u5230\u9700\u8981\u7684Impala\u8282\u70B9\u4E0A</li><li>T1,T2,T3 Join\u4E4B\u540E\u518D\u6839\u636EGroup by\u6267\u2F8F\u672C\u5730\u7684\u9884\u805A\u5408\uFF0C\u6BCF\u2F00\u4E2A\u8282\u70B9\u7684\u9884\u805A\u5408\u7ED3\u679C\u53EA\u662F\u6700\u7EC8\u7ED3\u679C\u7684\u2F00\u90E8\u5206\uFF08\u4E0D\u540C\u7684\u8282\u70B9\u53EF\u80FD\u5B58\u5728\u76F8\u540C\u7684group by\u7684\u503C\uFF09\uFF0C\u9700\u8981\u518D\u8FDB\u2F8F\u2F00\u6B21\u5168\u5C40\u7684\u805A\u5408\u3002</li><li>\u5168\u5C40\u7684\u805A\u5408\u540C\u6837\u9700\u8981\u5E76\u2F8F\u3002\u6839\u636E\u805A\u5408\u5217(n1, n2)\u8FDB\u2F8FHash\u5206\u6563\u5230\u4E0D\u540C\u7684\u8282\u70B9\u6267\u2F8FMerge\u8FD0\u7B97\uFF08\u5176\u5B9E\u4ECD\u7136\u662F\u2F00\u6B21\u805A\u5408\u8FD0\u7B97\uFF09\uFF0C\u2F00\u822C\u60C5\u51B5\u4E0B\u4E3A\u4E86\u8F83\u5C11\u6570\u636E\u7684\u2F79\u7EDC\u4F20\u8F93\uFF0C Impala\u4F1A\u9009\u62E9\u4E4B\u524D\u672C\u5730\u805A\u5408\u8282\u70B9\u505A\u5168\u5C40\u805A\u5408\u2F2F\u4F5C\u3002</li><li>\u901A\u8FC7\u5168\u5C40\u805A\u5408\u4E4B\u540E\uFF0C\u76F8\u540C\u7684key\u53EA\u5B58\u5728\u4E8E\u2F00\u4E2A\u8282\u70B9\uFF0C\u7136\u540E\u5BF9\u4E8E\u6BCF\u2F00\u4E2A\u8282\u70B9\u8FDB\u2F8F\u6392\u5E8F\u548CTopN\u8BA1\u7B97\uFF0C\u6700\u7EC8\u5C06\u6BCF\u2F00\u4E2A\u5168\u5C40\u805A\u5408\u8282\u70B9\u7684\u7ED3\u679C\u8FD4\u56DE\u7ED9Coordinator\u8FDB\u2F8F\u5408\u5E76\u3001\u6392\u5E8F\u3001limit\u8BA1\u7B97\uFF0C\u8FD4\u56DE\u7ED3\u679C\u7ED9\u2F64\u6237.</li></ol><blockquote><p>\u5176\u4E2D\uFF0C\u524D\u9762\u7684 4 \u6B65\u90FD\u53EF\u4EE5\u5E76\u884C\u6267\u884C\u3002</p></blockquote><h2 id="\u7B2C-4-\u90E8\u5206-impala\u7684\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#\u7B2C-4-\u90E8\u5206-impala\u7684\u4F7F\u7528" aria-hidden="true">#</a> \u7B2C 4 \u90E8\u5206 Impala\u7684\u4F7F\u2F64</h2><p>Impala\u7684\u6838\u2F3C\u5F00\u53D1\u8BED\u2F94\u662Fsql\u8BED\u53E5\uFF0CImpala\u6709shell\u547D\u4EE4\u2F8F\u7A97\u2F1D\uFF0C\u4EE5\u53CAJDBC\u7B49\u2F45\u5F0F\u6765\u63A5\u6536sql\u8BED\u53E5\u6267\u2F8F\uFF0C\u5BF9\u4E8E\u590D\u6742\u7C7B\u578B\u5206\u6790\u53EF\u4EE5\u4F7F\u2F64C++\u6216\u8005Java\u6765\u7F16\u5199UDF\u51FD\u6570\u3002</p><p>Impala\u7684sql\u8BED\u6CD5\u662F\u2FBC\u5EA6\u96C6\u6210\u4E86Apache Hive\u7684sql\u8BED\u6CD5\uFF0CImpala\u2F40\u6301Hive\u2F40\u6301\u7684\u6570\u636E\u7C7B\u578B\u4EE5\u53CA\u90E8\u5206Hive\u7684\u5185\u7F6E\u51FD\u6570\u3002</p><p>\u9700\u8981\u6CE8\u610F\u7684\u2F0F\u70B9\uFF1A</p><ol><li>Impala\u4E0EHive\u7C7B\u4F3C\u5B83\u4EEC\u7684\u91CD\u70B9\u90FD\u662F\u67E5\u8BE2\uFF0C\u6240\u4EE5\u50CFUpdate,delete\u7B49\u5177\u6709\u66F4\u65B0\u6027\u8D28\u7684\u64CD\u4F5C\u6700\u597D\u4E0D\u8981\u4F7F\u2F64\u8FD9\u79CD\u2F2F\u5177\uFF0C\u5BF9\u4E8E\u5220\u9664\u6570\u636E\u7684\u64CD\u4F5C\u53EF\u4EE5\u901A\u8FC7<code>Drop Table</code>,<code>Alter Table Drop Partition</code>\u6765\u5B9E\u73B0\uFF0C\u66F4\u65B0\u53EF\u4EE5\u5C1D\u8BD5\u4F7F\u2F64<code>Insert overwrite</code>\u2F45\u5F0F</li><li>\u901A\u5E38\u4F7F\u2F64Impala\u7684\u2F45\u5F0F\u662F\u6570\u636E\u2F42\u4EF6\u5B58\u50A8\u5728Hdfs\u2F42\u4EF6\u7CFB\u7EDF\uFF0C\u501F\u52A9\u4E8EImpala\u7684\u8868\u5B9A\u4E49\u6765\u67E5\u8BE2\u548C\u7BA1\u7406Hdfs\u4E0A\u7684\u6570\u636E\u2F42\u4EF6\uFF1B</li><li>Impala\u7684\u4F7F\u2F64\u2F24\u591A\u6570\u4E0EHive\u76F8\u540C\uFF0C\u2F50\u5982Impala\u540C\u6837\u2F40\u6301\u5185\u5916\u90E8\u8868\uFF0C\u4EE5\u53CA\u5206\u533A\u7B49\uFF0C\u53EF\u4EE5\u501F\u9274\u53C2\u8003Hive\u7684\u4F7F\u2F64\u3002</li></ol><h3 id="\u7B2C-1-\u8282-impala-shell\u547D\u4EE4\u53C2\u6570" tabindex="-1"><a class="header-anchor" href="#\u7B2C-1-\u8282-impala-shell\u547D\u4EE4\u53C2\u6570" aria-hidden="true">#</a> \u7B2C 1 \u8282 Impala-shell\u547D\u4EE4\u53C2\u6570</h3><h4 id="_1-1-impala-shell\u5916\u90E8\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_1-1-impala-shell\u5916\u90E8\u547D\u4EE4" aria-hidden="true">#</a> 1.1 impala-shell\u5916\u90E8\u547D\u4EE4</h4><p>\u6240\u8C13\u7684\u5916\u90E8\u547D\u4EE4\u6307\u7684\u662F\u4E0D\u9700\u8981\u8FDB\u2F0A\u5230 impala-shell \u4EA4\u4E92\u547D\u4EE4\u2F8F\u5F53\u4E2D\u5373\u53EF\u6267\u2F8F\u7684\u547D\u4EE4\u53C2\u6570\u3002</p><p>impala-shell \u540E\u2FAF\u6267\u2F8F\u7684\u65F6\u5019\u53EF\u4EE5\u5E26\u5F88\u591A\u53C2\u6570\u3002\u4F60\u53EF\u4EE5\u5728\u542F\u52A8 <code>impala-shell</code> \u65F6\u8BBE\u7F6E\uFF0C\u2F64\u4E8E\u4FEE\u6539\u547D\u4EE4\u6267\u2F8F\u73AF\u5883\u3002</p><p><code>impala-shell \u2013h</code> \u53EF\u4EE5\u5E2E\u52A9\u6211\u4EEC\u67E5\u770B\u5E2E\u52A9\u2F3F\u518C\u3002</p><p>\u2F50\u5982\u2F0F\u4E2A\u5E38\u2EC5\u7684\uFF1A</p><ul><li><code>impala-shell \u2013r</code> \u5237\u65B0impala\u5143\u6570\u636E\uFF0C\u4E0E\u5EFA\u2F74\u8FDE\u63A5\u540E\u6267\u2F8F REFRESH \u8BED\u53E5\u6548\u679C\u76F8\u540C(\u5143\u6570\u636E\u53D1\u2F63\u53D8\u5316\u7684\u65F6\u5019)</li><li><code>impala-shell \u2013f \u2F42\u4EF6\u8DEF\u5F84</code> \u6267\u2F8F\u6307\u5B9A\u7684sql\u67E5\u8BE2\u2F42\u4EF6</li><li><code>impala-shell \u2013i</code> \u6307\u5B9A\u8FDE\u63A5\u8FD0\u2F8F impalad \u5B88\u62A4\u8FDB\u7A0B\u7684\u4E3B\u673A\u3002\u9ED8\u8BA4\u7AEF\u2F1D\u662F 21000\u3002\u4F60\u53EF\u4EE5\u8FDE\u63A5\u5230\u96C6\u7FA4\u4E2D\u8FD0\u2F8F <code>impalad</code> \u7684\u4EFB\u610F\u4E3B\u673A\u3002</li><li><code>impala-shell \u2013o</code> \u4FDD\u5B58\u6267\u2F8F\u7ED3\u679C\u5230\u2F42\u4EF6\u5F53\u4E2D\u53BB</li></ul><blockquote><p>\u5C55\u793AImpala\u9ED8\u8BA4\u2F40\u6301\u7684\u5185\u7F6E\u51FD\u6570\u9700\u8981\u8FDB\u2F0AImpala\u9ED8\u8BA4\u7CFB\u7EDF\u6570\u636E\u5E93\u4E2D\u6267\u2F8F</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>use _impala_builtins<span class="token punctuation">;</span>
show functions<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>\u5728\u5176\u5B83\u6570\u636E\u5E93\u4E0B\u2F46\u6CD5\u67E5\u770B\uFF01\uFF01</p></blockquote><h4 id="_1-2-impala-shell\u5185\u90E8\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_1-2-impala-shell\u5185\u90E8\u547D\u4EE4" aria-hidden="true">#</a> 1.2 impala-shell\u5185\u90E8\u547D\u4EE4</h4><p>\u6240\u8C13\u5185\u90E8\u547D\u4EE4\u662F\u6307\uFF0C\u8FDB\u2F0Aimpala-shell\u547D\u4EE4\u2F8F\u4E4B\u540E\u53EF\u4EE5\u6267\u2F8F\u7684\u8BED\u6CD5\u3002</p><ul><li><code>help;</code> \u67E5\u770B\u5E2E\u52A9\u4FE1\u606F</li></ul><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[linux123:21000] &gt; help;

Documented commands (type help &lt;topic&gt;):
========================================
compute   exit     history  quit    shell  unset   version
connect   explain  insert   select  show   use     with   
describe  help     profile  set     tip    values

Undocumented commands:
======================
alter  create  desc  drop  load  summary

[linux123:21000] &gt; help quit;
Quit the Impala shell
[linux123:21000] &gt; help alter;
*** No help on alter
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ul><li><code>connect hostname;</code> \u8FDE\u63A5\u5230\u6307\u5B9A\u673A\u5668\u7684 <code>Impalad</code></li><li><code>refresh dbname.tablename</code> \u589E\u91CF\u5237\u65B0\uFF0C\u5237\u65B0\u67D0\u2F00\u5F20\u8868\u7684\u5143\u6570\u636E\uFF0C\u4E3B\u8981\u2F64\u4E8E\u5237\u65B0hive\u5F53\u4E2D\u6570\u636E\u8868\u2FA5\u2FAF\u7684\u6570\u636E\u6539\u53D8\u7684\u60C5\u51B5</li><li><code>invalidate metadata</code> \u5168\u91CF\u5237\u65B0\uFF0C\u6027\u80FD\u6D88\u8017\u8F83\u2F24\uFF0C\u4E3B\u8981\u2F64\u4E8Ehive\u5F53\u4E2D\u65B0\u5EFA\u6570\u636E\u5E93\u6216\u8005\u6570\u636E\u5E93\u8868\u7684\u65F6\u5019\u6765\u8FDB\u2F8F\u5237\u65B0</li><li><code>quit/exit</code> \u4ECEImpala shell\u4E2D\u9000\u51FA</li><li><code>explain</code> \u2F64\u4E8E\u67E5\u770Bsql\u8BED\u53E5\u7684\u6267\u2F8F\u8BA1\u5212\u3002(<code>set explain_level=3;</code> \u503C\u53EF\u4EE5\u8BBE\u7F6E\u6210 0,1,2,3 \u7B49\u2F0F\u4E2A\u503C\uFF0C\u5176\u4E2D3\u7EA7\u522B\u662F\u6700\u2FBC\u7684\uFF0C\u53EF\u4EE5\u6253\u5370\u51FA\u6700\u5168\u7684\u4FE1\u606F)</li></ul><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[linux123:21000] &gt; explain select * from t1;
Query: explain select * from t1
+------------------------------------------------------------------------------------+
| Explain String                                                                     |
+------------------------------------------------------------------------------------+
| Estimated Per-Host Requirements: Memory=32.00MB VCores=1                           |
| WARNING: The following tables are missing relevant table and/or column statistics. |
| default.t1                                                                         |
|                                                                                    |
| 01:EXCHANGE [UNPARTITIONED]                                                        |
| |                                                                                  |
| 00:SCAN HDFS [default.t1]                                                          |
|    partitions=1/1 files=1 size=185B                                                |
+------------------------------------------------------------------------------------+
Fetched 8 row(s) in 0.01s
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ul><li><code>profile</code> \u5728\u6267\u2F8Fsql\u8BED\u53E5\u4E4B\u540E\u6267\u2F8F\uFF0C\u53EF\u4EE5\u6253\u5370\u51FA\u66F4\u52A0\u8BE6\u7EC6\u7684\u6267\u2F8F\u6B65\u9AA4\uFF0C\u4E3B\u8981\u2F64\u4E8E\u67E5\u8BE2\u7ED3\u679C\u7684\u67E5\u770B\uFF0C\u96C6\u7FA4\u7684\u8C03\u4F18\u7B49\u3002</li></ul><blockquote><p><code>expalin</code>: \u53EF\u4EE5\u4E0D\u771F\u6B63\u6267\u2F8F\u4EFB\u52A1\uFF0C\u53EA\u662F\u5C55\u793A\u4EFB\u52A1\u7684\u6267\u2F8F\u8BA1\u5212\uFF1B</p><p><code>profile</code>: \u9700\u8981\u4EFB\u52A1\u6267\u2F8F\u5B8C\u6210\u540E\u8C03\u2F64\uFF0C\u53EF\u4EE5\u4ECE\u66F4\u5E95\u5C42\u4EE5\u53CA\u66F4\u8BE6\u7EC6\u7684\u5C42\u2FAF\u6765\u89C2\u5BDF\u6211\u4EEC\u8FD0\u2F8F <code>impala</code> \u7684\u4EFB\u52A1\uFF0C\u8FDB\u2F8F\u8C03\u4F18\u3002</p></blockquote><h3 id="\u7B2C-2-\u8282-impala-sql\u8BED\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u7B2C-2-\u8282-impala-sql\u8BED\u6CD5" aria-hidden="true">#</a> \u7B2C 2 \u8282 Impala sql\u8BED\u6CD5</h3><h4 id="_2-1-\u6570\u636E\u5E93\u7279\u5B9A\u8BED\u53E5" tabindex="-1"><a class="header-anchor" href="#_2-1-\u6570\u636E\u5E93\u7279\u5B9A\u8BED\u53E5" aria-hidden="true">#</a> 2.1 \u6570\u636E\u5E93\u7279\u5B9A\u8BED\u53E5</h4><h5 id="_1-\u521B\u5EFA\u6570\u636E\u5E93" tabindex="-1"><a class="header-anchor" href="#_1-\u521B\u5EFA\u6570\u636E\u5E93" aria-hidden="true">#</a> 1. \u521B\u5EFA\u6570\u636E\u5E93</h5><p><code>CREATE DATABASE</code> \u8BED\u53E5\u2F64\u4E8E\u5728Impala\u4E2D\u521B\u5EFA\u65B0\u6570\u636E\u5E93\u3002</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> database_name<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u8FD9\u2FA5\uFF0C<code>IF NOT EXISTS</code> \u662F\u2F00\u4E2A\u53EF\u9009\u7684\u2F26\u53E5\u3002\u5982\u679C\u6211\u4EEC\u4F7F\u2F64\u6B64\u2F26\u53E5\uFF0C\u5219\u53EA\u6709\u5728\u6CA1\u6709\u5177\u6709\u76F8\u540C\u540D\u79F0\u7684\u73B0\u6709\u6570\u636E\u5E93\u65F6\uFF0C\u624D\u4F1A\u521B\u5EFA\u5177\u6709\u7ED9\u5B9A\u540D\u79F0\u7684\u6570\u636E\u5E93\u3002</p><p>\u9ED8\u8BA4\u5C31\u4F1A\u5728hive\u7684\u6570\u4ED3\u8DEF\u5F84\u4E0B\u521B\u5EFA\u65B0\u7684\u6570\u636E\u5E93\u540D\u2F42\u4EF6\u5939: <code>/user/hive/warehouse/zmn_test.db</code></p><h5 id="_2-\u5220\u9664\u6570\u636E\u5E93" tabindex="-1"><a class="header-anchor" href="#_2-\u5220\u9664\u6570\u636E\u5E93" aria-hidden="true">#</a> 2. \u5220\u9664\u6570\u636E\u5E93</h5><p>Impala\u7684 <code>DROP DATABASE</code> \u8BED\u53E5\u2F64\u4E8E\u4ECEImpala\u4E2D\u5220\u9664\u6570\u636E\u5E93\u3002 \u5728\u5220\u9664\u6570\u636E\u5E93\u4E4B\u524D\uFF0C\u5EFA\u8BAE\u4ECE\u4E2D\u5220\u9664\u6240\u6709\u8868\u3002</p><p>\u5982\u679C\u4F7F\u2F64\u7EA7\u8054\u5220\u9664\uFF0CImpala\u4F1A\u5728\u5220\u9664\u6307\u5B9A\u6570\u636E\u5E93\u4E2D\u7684\u8868\u4E4B\u524D\u5220\u9664\u5B83\u3002</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">database</span> sample <span class="token keyword">cascade</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="_2-2-\u8868\u7279\u5B9A\u8BED\u53E5" tabindex="-1"><a class="header-anchor" href="#_2-2-\u8868\u7279\u5B9A\u8BED\u53E5" aria-hidden="true">#</a> 2.2 \u8868\u7279\u5B9A\u8BED\u53E5</h4><h5 id="_1-create-table-\u8BED\u53E5" tabindex="-1"><a class="header-anchor" href="#_1-create-table-\u8BED\u53E5" aria-hidden="true">#</a> 1. CREATE TABLE \u8BED\u53E5</h5><p><code>CREATE TABLE</code> \u8BED\u53E5\u2F64\u4E8E\u5728Impala\u4E2D\u7684\u6240\u9700\u6570\u636E\u5E93\u4E2D\u521B\u5EFA\u65B0\u8868\u3002\u9700\u8981\u6307\u5B9A\u8868\u540D\u5B57\u5E76\u5B9A\u4E49\u5176\u5217\u548C\u6BCF\u5217\u7684\u6570\u636E\u7C7B\u578B\u3002</p><p>impala\u2F40\u6301\u7684\u6570\u636E\u7C7B\u578B\u548Chive\u7C7B\u4F3C.</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> database_name<span class="token punctuation">.</span>table_name <span class="token punctuation">(</span> column1 data_type<span class="token punctuation">,</span> column2 data_type<span class="token punctuation">,</span> column3 data_type<span class="token punctuation">,</span> \u2026\u2026\u2026 columnN data_type<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> mydb<span class="token punctuation">.</span>student<span class="token punctuation">(</span>name STRING<span class="token punctuation">,</span> age <span class="token keyword">INT</span><span class="token punctuation">,</span> contact <span class="token keyword">INT</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>\u9ED8\u8BA4\u5EFA\u8868\u7684\u6570\u636E\u5B58\u50A8\u8DEF\u5F84\u8DDFhive\u2F00\u81F4\u3002\u4E5F\u53EF\u4EE5\u5728\u5EFA\u8868\u7684\u65F6\u5019\u901A\u8FC7location\u6307\u5B9A\u5177\u4F53\u8DEF\u5F84\u3002</p></blockquote><h5 id="_2-insert-\u8BED\u53E5" tabindex="-1"><a class="header-anchor" href="#_2-insert-\u8BED\u53E5" aria-hidden="true">#</a> 2. INSERT \u8BED\u53E5</h5><p>Impala\u7684INSERT\u8BED\u53E5\u6709\u4E24\u4E2A\u2F26\u53E5: into\u548Coverwrite\u3002</p><p>into\u2F64\u4E8E\u63D2\u2F0A\u65B0\u8BB0\u5F55\u6570\u636E\uFF0Coverwrite\u2F64\u4E8E\u8986\u76D6\u5DF2\u6709\u7684\u8BB0\u5F55\u3002</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> table_name <span class="token punctuation">(</span>column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> column3<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>value1<span class="token punctuation">,</span> value2<span class="token punctuation">,</span> value3<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>valueN<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> table_name <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>value1<span class="token punctuation">,</span> value2<span class="token punctuation">,</span> value2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p><code>column1\uFF0Ccolumn2\uFF0C... columnN</code> \u662F\u8981\u63D2\u2F0A\u6570\u636E\u7684\u8868\u4E2D\u7684\u5217\u7684\u540D\u79F0\u3002\u8FD8\u53EF\u4EE5\u6DFB\u52A0\u503C\u2F7D\u4E0D\u6307\u5B9A\u5217\u540D\uFF0C\u4F46\u662F\uFF0C\u9700\u8981\u786E\u4FDD\u503C\u7684\u987A\u5E8F\u4E0E\u8868\u4E2D\u7684\u5217\u7684\u987A\u5E8F\u76F8\u540C\u3002</p></blockquote><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> employee
<span class="token punctuation">(</span>
  Id      <span class="token keyword">INT</span><span class="token punctuation">,</span>
  name    STRING<span class="token punctuation">,</span>
  age     <span class="token keyword">INT</span><span class="token punctuation">,</span>
  address STRING<span class="token punctuation">,</span>
  salary  <span class="token keyword">BIGINT</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> employee
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;Ramesh&#39;</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token string">&#39;Ahmedabad&#39;</span><span class="token punctuation">,</span> <span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> employee
<span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&#39;Khilan&#39;</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token string">&#39;Delhi&#39;</span><span class="token punctuation">,</span> <span class="token number">15000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">Insert</span> <span class="token keyword">into</span> employee
<span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&#39;kaushik&#39;</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token string">&#39;Kota&#39;</span><span class="token punctuation">,</span> <span class="token number">30000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">Insert</span> <span class="token keyword">into</span> employee
<span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&#39;Chaitali&#39;</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token string">&#39;Mumbai&#39;</span><span class="token punctuation">,</span> <span class="token number">35000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">Insert</span> <span class="token keyword">into</span> employee
<span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&#39;Hardik&#39;</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token string">&#39;Bhopal&#39;</span><span class="token punctuation">,</span> <span class="token number">40000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">Insert</span> <span class="token keyword">into</span> employee
<span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token string">&#39;Komal&#39;</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token string">&#39;MP&#39;</span><span class="token punctuation">,</span> <span class="token number">32000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>overwrite \u8986\u76D6\u2F26\u53E5\u8986\u76D6\u8868\u5F53\u4E2D\u5168\u90E8\u8BB0\u5F55\u3002 \u8986\u76D6\u7684\u8BB0\u5F55\u5C06\u4ECE\u8868\u4E2D\u6C38\u4E45\u5220\u9664\u3002</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">INSERT</span> OVERWRITE employee <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;Ram&#39;</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token string">&#39;Vishakhapatnam&#39;</span><span class="token punctuation">,</span> <span class="token number">37000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h5 id="_3-select-\u8BED\u53E5" tabindex="-1"><a class="header-anchor" href="#_3-select-\u8BED\u53E5" aria-hidden="true">#</a> 3. SELECT \u8BED\u53E5</h5><p>Impala \u7684SELECT\u8BED\u53E5\u2F64\u4E8E\u4ECE\u6570\u636E\u5E93\u67E5\u8BE2\u6570\u636E\uFF0C\u6B64\u67E5\u8BE2\u4EE5\u8868\u7684\u5F62\u5F0F\u8FD4\u56DE\u6570\u636E\u3002</p><h5 id="_4-describe-\u8BED\u53E5" tabindex="-1"><a class="header-anchor" href="#_4-describe-\u8BED\u53E5" aria-hidden="true">#</a> 4. DESCRIBE \u8BED\u53E5</h5><p>Impala\u4E2D\u7684describe\u8BED\u53E5\u2F64\u4E8E\u63D0\u4F9B\u8868\u7684\u63CF\u8FF0\u3002\u6B64\u8BED\u53E5\u7684\u7ED3\u679C\u5305\u542B\u6709\u5173\u8868\u7684\u4FE1\u606F\uFF0C\u4F8B\u5982\u5217\u540D\u79F0\u53CA\u5176\u6570\u636E\u7C7B\u578B\u3002</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">DESCRIBE</span> table_name<span class="token punctuation">;</span>
<span class="token comment">-- \u53EF\u4EE5\u7B80\u5199\u6210\uFF1A</span>
<span class="token keyword">DESC</span> table_name<span class="token punctuation">;</span>
<span class="token comment">-- \u540C\u6837\u652F\u6301\u66F4\u52A0\u8BE6\u7EC6\u7684\u6570\u636E</span>
<span class="token keyword">describe</span> formatted table_name<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h5 id="_5-alter-table" tabindex="-1"><a class="header-anchor" href="#_5-alter-table" aria-hidden="true">#</a> 5. ALTER TABLE</h5><p>Impala\u4E2D\u7684Alter table\u8BED\u53E5\u2F64\u4E8E\u5BF9\u7ED9\u5B9A\u8868\u6267\u2F8F\u66F4\u6539\u3002\u4F7F\u2F64\u6B64\u8BED\u53E5\uFF0C\u6211\u4EEC\u53EF\u4EE5\u6DFB\u52A0\uFF0C\u5220\u9664\u6216\u4FEE\u6539\u73B0\u6709\u8868\u4E2D\u7684\u5217\uFF0C\u4E5F\u53EF\u4EE5\u91CD\u547D\u540D\u5B83\u4EEC\u3002</p><blockquote><p>\u53C2\u8003 Hive\u3002\u4E0D\u5EFA\u8BAE\u5728 impala \u4E2D\u5B9E\u73B0\u8868\u7ED3\u6784\u5B9A\u4E49\u548C\u4FEE\u6539\u3002</p></blockquote><h5 id="_6-delete\u3001truncate-table" tabindex="-1"><a class="header-anchor" href="#_6-delete\u3001truncate-table" aria-hidden="true">#</a> 6. DELETE\u3001TRUNCATE TABLE</h5><p>Impala <code>DROP TABLE</code> \u8BED\u53E5\u2F64\u4E8E\u5220\u9664Impala\u4E2D\u7684\u73B0\u6709\u8868\u3002\u6B64\u8BED\u53E5\u8FD8\u4F1A\u5220\u9664\u5185\u90E8\u8868\u7684\u5E95\u5C42HDFS\u2F42\u4EF6\u3002</p><blockquote><p>\u6CE8\u610F\uFF1A\u4F7F\u2F64\u6B64\u547D\u4EE4\u65F6\u5FC5\u987B\u2F29\u2F3C\uFF0C\u56E0\u4E3A\u5220\u9664\u8868\u540E\uFF0C\u8868\u4E2D\u53EF\u2F64\u7684\u6240\u6709\u4FE1\u606F\u4E5F\u5C06\u6C38\u8FDC\u4E22\u5931\u3002</p></blockquote><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> database_name<span class="token punctuation">.</span>table_name<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Impala\u7684 <code>TRUNCATE TABLE</code> \u8BED\u53E5\u2F64\u4E8E\u4ECE\u73B0\u6709\u8868\u4E2D\u5220\u9664\u6240\u6709\u8BB0\u5F55\u3002\u4FDD\u7559\u8868\u7ED3\u6784\u3002</p><p>\u4F7F\u2F64DROP TABLE\u547D\u4EE4\u4F1A\u5220\u9664\u2F00\u4E2A\u5B8C\u6574\u7684\u8868\uFF0C\u5B83\u4F1A\u4ECE\u6570\u636E\u5E93\u4E2D\u5220\u9664\u5B8C\u6574\u7684\u8868\u7ED3\u6784\uFF0C\u5982\u679C\u5E0C\u671B\u5B58\u50A8\u6570\u636E\uFF0C\u5C06\u9700\u8981\u91CD\u65B0\u521B\u5EFA\u6B64\u8868\u3002</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">TRUNCATE</span> <span class="token keyword">TABLE</span> table_name<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Impala\u5BF9\u590D\u6742\u6570\u636E\u7C7B\u578B\u7684\u2F40\u6301</strong></p><p>\u5BF9\u4E8EText\u5B58\u50A8\u683C\u5F0F\u4E2D\u7684\u590D\u6742\u7C7B\u578B\u4E0D\u2F40\u6301\uFF0C\u590D\u6742\u7C7B\u578B\u8981\u4F7F\u2F64 <code>parquet</code> \u683C\u5F0F\u3002</p><h5 id="_7-view\u89C6\u56FE" tabindex="-1"><a class="header-anchor" href="#_7-view\u89C6\u56FE" aria-hidden="true">#</a> 7. view\u89C6\u56FE</h5><p>\u89C6\u56FE\u4EC5\u4EC5\u662F\u5B58\u50A8\u5728\u6570\u636E\u5E93\u4E2D\u5177\u6709\u5173\u8054\u540D\u79F0\u7684Impala\u67E5\u8BE2\u8BED\u2F94\u7684\u8BED\u53E5\u3002 \u5B83\u662F\u4EE5\u9884\u5B9A\u4E49\u7684SQL\u67E5\u8BE2\u5F62\u5F0F\u7684\u8868\u7684\u7EC4\u5408\u3002</p><p>\u89C6\u56FE\u53EF\u4EE5\u5305\u542B\u8868\u7684\u6240\u6709\u2F8F\u6216\u9009\u5B9A\u7684\u2F8F\u3002</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> view_name <span class="token keyword">AS</span> <span class="token keyword">SELECT</span> statement
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u521B\u5EFA\u89C6\u56FEview\u3001\u67E5\u8BE2\u89C6\u56FEview</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> employee_view <span class="token keyword">AS</span> <span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> age <span class="token keyword">FROM</span> employee<span class="token punctuation">;</span>
<span class="token comment">-- \u67E5\u770B\u89C6\u56FE\u662F\u5426\u521B\u5EFA\u6210\u529F</span>
<span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
<span class="token comment">-- \u89C6\u56FE\u521B\u5EFA\u6210\u529F\u540E\uFF0C\u4F1A\u5728\u6570\u636E\u8868\u5217\u8868\u4E2D\u663E\u793A employee_view</span>

<span class="token comment">-- \u67E5\u770B\u89C6\u56FE\u6570\u636E</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employee_view<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>\u4FEE\u6539\u89C6\u56FE</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">VIEW</span> database_name<span class="token punctuation">.</span>view_name <span class="token keyword">AS</span> <span class="token keyword">Select</span>\u8BED\u53E5
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u5220\u9664\u89C6\u56FE</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">VIEW</span> database_name<span class="token punctuation">.</span>view_name<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h5 id="_8-order-by\u5B50\u53E5" tabindex="-1"><a class="header-anchor" href="#_8-order-by\u5B50\u53E5" aria-hidden="true">#</a> 8. ORDER BY\u2F26\u53E5</h5><p>Impala <code>ORDER BY</code> \u2F26\u53E5\u2F64\u4E8E\u6839\u636E\u2F00\u4E2A\u6216\u591A\u4E2A\u5217\u4EE5\u5347\u5E8F\u6216\u964D\u5E8F\u5BF9\u6570\u636E\u8FDB\u2F8F\u6392\u5E8F\u3002</p><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u2F00\u4E9B\u6570\u636E\u5E93\u6309\u5347\u5E8F\u5BF9\u67E5\u8BE2\u7ED3\u679C\u8FDB\u2F8F\u6392\u5E8F\u3002</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> table_name <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> col_name
 <span class="token punctuation">[</span><span class="token keyword">ASC</span><span class="token operator">|</span><span class="token keyword">DESC</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>NULLS <span class="token keyword">FIRST</span><span class="token operator">|</span>NULLS <span class="token keyword">LAST</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u53EF\u4EE5\u4F7F\u2F64\u5173\u952E\u5B57ASC\u6216DESC\u5206\u522B\u6309\u5347\u5E8F\u6216\u964D\u5E8F\u6392\u5217\u8868\u4E2D\u7684\u6570\u636E\u3002</p><p>\u5982\u679C\u6211\u4EEC\u4F7F\u2F64 <code>NULLS FIRST</code>\uFF0C\u8868\u4E2D\u7684\u6240\u6709\u7A7A\u503C\u90FD\u6392\u5217\u5728\u9876\u2F8F; \u5982\u679C\u6211\u4EEC\u4F7F\u2F64 <code>NULLS LAST</code>\uFF0C\u5305\u542B\u7A7A\u503C\u7684\u2F8F\u5C06\u6700\u540E\u6392\u5217\u3002</p><h5 id="_9-group-by\u5B50\u53E5" tabindex="-1"><a class="header-anchor" href="#_9-group-by\u5B50\u53E5" aria-hidden="true">#</a> 9. GROUP BY\u2F26\u53E5</h5><p>Impala <code>GROUP BY</code>\u2F26\u53E5\u4E0E<code>SELECT</code>\u8BED\u53E5\u534F\u4F5C\u4F7F\u2F64\uFF0C\u4EE5\u5C06\u76F8\u540C\u7684\u6570\u636E\u6392\u5217\u5230\u7EC4\u4E2D\u3002</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> name<span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">from</span> employee <span class="token keyword">group</span> <span class="token keyword">by</span> name<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h5 id="_10-having\u5B50\u53E5" tabindex="-1"><a class="header-anchor" href="#_10-having\u5B50\u53E5" aria-hidden="true">#</a> 10. HAVING\u2F26\u53E5</h5><p>\u5BB9\u6613\u4E0EWHERE\u8FC7\u6EE4\u8FDB\u2F8F\u6DF7\u6DC6\uFF0C\u5982\u4F55\u533A\u5206?</p><ul><li>WHERE: \u8FC7\u6EE4\u7684\u6570\u636E\u662F\u539F\u59CB\u6570\u636E\uFF0C\u8868\u4E2D\u672C\u6765\u5C31\u5B58\u5728\u7684\u6570\u636E\uFF1B</li><li>HAVING: \u8FC7\u6EE4\u7684\u662F\u67E5\u8BE2\u7ED3\u679C\u6570\u636E\uFF1B</li></ul><p>\u6309\u5E74\u9F84\u5BF9\u8868\u8FDB\u2F8F\u5206\u7EC4\uFF0C\u5E76\u9009\u62E9\u6BCF\u4E2A\u7EC4\u7684\u6700\u2F24\u2F2F\u8D44\uFF0C\u5E76\u663E\u793A\u2F24\u4E8E20000\u7684\u2F2F\u8D44</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">FROM</span> employee <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> age <span class="token keyword">HAVING</span> <span class="token function">max</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">20000</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h5 id="_11-limit\u3001offset" tabindex="-1"><a class="header-anchor" href="#_11-limit\u3001offset" aria-hidden="true">#</a> 11. LIMIT\u3001OFFSET</h5><p>Impala\u4E2D\u7684LIMIT\u2F26\u53E5\u2F64\u4E8E\u5C06\u7ED3\u679C\u96C6\u7684\u2F8F\u6570\u9650\u5236\u4E3A\u6240\u9700\u7684\u6570\uFF0C\u5373\u67E5\u8BE2\u7684\u7ED3\u679C\u96C6\u4E0D\u5305\u542B\u8D85\u8FC7\u6307\u5B9A\u9650\u5236\u7684\u8BB0\u5F55\u3002</p><p>\u2F00\u822C\u6765\u8BF4\uFF0CSELECT\u67E5\u8BE2\u7684resultset\u4E2D\u7684\u2F8F\u4ECE0\u5F00\u59CB\u3002\u4F7F\u2F64offset\u2F26\u53E5\uFF0C\u6211\u4EEC\u53EF\u4EE5\u51B3\u5B9A\u4ECE\u54EA\u2FA5\u8003\u8651\u8F93\u51FA\u3002</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employee <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> salary <span class="token keyword">LIMIT</span> <span class="token number">2</span> <span class="token keyword">OFFSET</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>\u4F7F\u2F64offset\u5173\u952E\u5B57\u8981\u6C42\u7ED3\u679C\u6570\u636E\u5FC5\u987B\u662F\u6392\u5E8F\u4E4B\u540E\u7684\uFF01\uFF01</p></blockquote><h3 id="\u7B2C-3-\u8282-impala\u5BFC\u5165\u6570\u636E" tabindex="-1"><a class="header-anchor" href="#\u7B2C-3-\u8282-impala\u5BFC\u5165\u6570\u636E" aria-hidden="true">#</a> \u7B2C 3 \u8282 Impala\u5BFC\u2F0A\u6570\u636E</h3><h4 id="_1-insert-into-values" tabindex="-1"><a class="header-anchor" href="#_1-insert-into-values" aria-hidden="true">#</a> 1. INSERT INTO VALUES</h4><p>\u8FD9\u79CD\u2F45\u5F0F\u2FAE\u5E38\u7C7B\u4F3C\u4E8ERDBMS\u7684\u6570\u636E\u63D2\u2F0A\u2F45\u5F0F\u3002</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t_test2<span class="token punctuation">(</span>id <span class="token keyword">int</span><span class="token punctuation">,</span>name string<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token keyword">TABLE</span> t_test2 <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_2-insert-into-select" tabindex="-1"><a class="header-anchor" href="#_2-insert-into-select" aria-hidden="true">#</a> 2. INSERT INTO SELECT</h4><p>\u63D2\u2F0A\u2F00\u5F20\u8868\u7684\u6570\u636E\u6765\u2F83\u4E8E\u540E\u2FAF\u7684select\u67E5\u8BE2\u8BED\u53E5\u8FD4\u56DE\u7684\u7ED3\u679C\u3002</p><h4 id="_3-create-table-as-select" tabindex="-1"><a class="header-anchor" href="#_3-create-table-as-select" aria-hidden="true">#</a> 3. CREATE TABLE AS SELECT</h4><p>\u5EFA\u8868\u7684\u5B57\u6BB5\u4E2A\u6570\u3001\u7C7B\u578B\u3001\u6570\u636E\u6765\u2F83\u4E8E\u540E\u7EED\u7684select\u67E5\u8BE2\u8BED\u53E5\u3002</p><p><code>load data</code> \u2F45\u5F0F\uFF0C\u8FD9\u79CD\u2F45\u5F0F\u4E0D\u5EFA\u8BAE\u5728Impala\u4E2D\u4F7F\u2F64\uFF0C\u5148\u4F7F\u2F64 <code>load data</code> \u2F45\u5F0F\u628A\u6570\u636E\u52A0\u8F7D\u5230Hive\u8868\u4E2D\uFF0C\u7136\u540E\u4F7F\u2F64\u4EE5\u4E0A\u2F45\u5F0F\u63D2\u2F0AImpala\u8868\u4E2D\u3002</p><h2 id="\u7B2C-5-\u90E8\u5206-impala\u7684jdbc\u65B9\u5F0F\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#\u7B2C-5-\u90E8\u5206-impala\u7684jdbc\u65B9\u5F0F\u67E5\u8BE2" aria-hidden="true">#</a> \u7B2C 5 \u90E8\u5206 Impala\u7684JDBC\u2F45\u5F0F\u67E5\u8BE2</h2><p>\u5728\u5B9E\u9645\u2F2F\u4F5C\u5F53\u4E2D\uFF0C\u56E0\u4E3Aimpala\u7684\u67E5\u8BE2\u2F50\u8F83\u5FEB\uFF0C\u6240\u4EE5\u53EF\u80FD\u6709\u4F1A\u4F7F\u2F64\u5230impala\u6765\u505A\u6570\u636E\u5E93\u67E5\u8BE2\u7684\u60C5\u51B5\uFF0C\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7java\u4EE3\u7801\u6765\u8FDB\u2F8F\u64CD\u4F5Cimpala\u7684\u67E5\u8BE2</p><ol><li>\u5BFC\u2F0Ajar\u5305</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.hadoop/hadoopcommon --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.hadoop<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hadoop-common<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.9.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.hive/hive-common --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.hive<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hive-common<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.3.7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.hive/hive-metastore--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.hive<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hive-metastore<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.3.7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.hive/hive-service --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.hive<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hive-service<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.3.7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.hive/hive-jdbc --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.hive<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hive-jdbc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.3.7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.hive/hive-exec --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.hive<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hive-exec<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.3.7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><ol start="2"><li>Java\u7F16\u7801</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ImpalaTest</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u5B9A\u4E49\u8FDE\u63A5impala\u7684\u9A71\u52A8\u548C\u8FDE\u63A5url</span>
    <span class="token class-name">String</span> driver <span class="token operator">=</span> <span class="token string">&quot;org.apache.hive.jdbc.HiveDriver&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> driverUrl <span class="token operator">=</span> <span class="token string">&quot;jdbc:hive2://linux122:21050/default;auth=noSasl&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">//\u67E5\u8BE2\u7684sql\u8BED\u53E5</span>
    <span class="token class-name">String</span> querySql <span class="token operator">=</span> <span class="token string">&quot;select * from t1&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">//\u83B7\u53D6\u8FDE\u63A5</span>
    <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u901A\u8FC7Drivermanager\u83B7\u53D6\u8FDE\u63A5</span>
    <span class="token keyword">final</span> <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>driverUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token class-name">PreparedStatement</span> ps <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>querySql<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u6267\u2F8F\u67E5\u8BE2</span>
    <span class="token keyword">final</span> <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> ps<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u89E3\u6790\u8FD4\u56DE\u7ED3\u679C</span>
    <span class="token comment">//\u83B7\u53D6\u5230\u6BCF\u6761\u6570\u636E\u7684\u5217\u6570</span>
    <span class="token keyword">final</span> <span class="token keyword">int</span> columnCount <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getMetaData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getColumnCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//\u904D\u5386\u7ED3\u679C\u96C6</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> columnCount<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token class-name">String</span> string <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>string <span class="token operator">+</span> <span class="token string">&quot;\\t&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//\u5173\u95ED\u8D44\u6E90</span>
    ps<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><blockquote><p>\u65E2\u7136\u53EF\u4EE5\u7528 JDBC\uFF0C\u5176\u5B9E\u7528 MyBatis \u4E5F\u662F\u4E00\u6837\u7684\u3002</p></blockquote><h2 id="\u7B2C-6-\u90E8\u5206-impala\u8FDB\u9636" tabindex="-1"><a class="header-anchor" href="#\u7B2C-6-\u90E8\u5206-impala\u8FDB\u9636" aria-hidden="true">#</a> \u7B2C 6 \u90E8\u5206 Impala\u8FDB\u9636</h2><h3 id="\u7B2C-1-\u8282-impala\u7684\u8D1F\u8F7D\u5747\u8861" tabindex="-1"><a class="header-anchor" href="#\u7B2C-1-\u8282-impala\u7684\u8D1F\u8F7D\u5747\u8861" aria-hidden="true">#</a> \u7B2C 1 \u8282 Impala\u7684\u8D1F\u8F7D\u5747\u8861</h3><p>Impala\u4E3B\u8981\u6709\u4E09\u4E2A\u7EC4\u4EF6\uFF0C\u5206\u522B\u662F<code>statestore</code>\uFF0C<code>catalog</code>\u548C<code>impalad</code>\uFF0C\u5BF9\u4E8EImpalad\u8282\u70B9\uFF0C\u6BCF\u2F00\u4E2A\u8282\u70B9\u90FD\u53EF\u4EE5\u63A5\u6536\u5BA2\u6237\u7AEF\u7684\u67E5\u8BE2\u8BF7\u6C42\uFF0C \u5E76\u4E14\u5BF9\u4E8E\u8FDE\u63A5\u5230\u8BE5Impalad\u7684\u67E5\u8BE2\u8FD8\u8981\u4F5C\u4E3A Coordinator \u8282\u70B9\uFF08\u9700\u8981\u6D88\u8017\u2F00\u5B9A\u7684\u5185\u5B58\u548CCPU\uFF09\u5B58\u5728\uFF0C \u4E3A\u4E86\u4FDD\u8BC1\u6BCF\u2F00\u4E2A\u8282\u70B9\u7684\u8D44\u6E90\u5F00\u9500\u7684\u5E73\u8861\u9700\u8981\u5BF9\u4E8E\u96C6\u7FA4\u4E2D\u7684Impalad\u8282\u70B9\u505A\u2F00\u4E0B\u8D1F\u8F7D\u5747\u8861.</p><ul><li>Cloudera\u5B98\u2F45\u63A8\u8350\u7684\u4EE3\u7406\u2F45\u6848: HAProxy</li><li>DNS\u505A\u8D1F\u8F7D\u5747\u8861</li></ul><p>DNS\u505A\u8D1F\u8F7D\u5747\u8861\u2F45\u6848\u662F\u6700\u7B80\u5355\u7684\uFF0C\u4F46\u662F\u6027\u80FD\u2F00\u822C\uFF0C\u6240\u4EE5\u8FD9\u2FA5\u6211\u4EEC\u6309\u7167\u5B98\u2F45\u7684\u5EFA\u8BAE\u4F7F\u2F64HAProxy\u5B9E\u73B0\u8D1F\u8F7D\u5747\u8861</p><blockquote><p>\u2F63\u4EA7\u4E2D\u5E94\u8BE5\u9009\u62E9\u2F00\u4E2A\u2FAE Impalad \u8282\u70B9\u4F5C\u4E3AHAProxy\u7684\u5B89\u88C5\u8282\u70B9</p></blockquote><h4 id="haproxy\u65B9\u6848" tabindex="-1"><a class="header-anchor" href="#haproxy\u65B9\u6848" aria-hidden="true">#</a> HAProxy\u2F45\u6848</h4><p>\u5B89\u88C5haproxy</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u6B64\u5904\u5B89\u88C5\u5728 linux123 \u4E0A</span>
yum <span class="token function">install</span> haproxy -y
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u4FEE\u6539\u914D\u7F6E\u2F42\u4EF6</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">vim</span> /etc/haproxy/haproxy.cfg
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u5177\u4F53\u914D\u7F6E\u5185\u5BB9</p><blockquote><p>\u6CE8\u91CA\u6389 defaults \u6A21\u5757\u7684\u5982\u4E0B\u5185\u5BB9</p></blockquote><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>    # option http-server-close
    # option forwardfor       except 127.0.0.0/8
    # option                  redispatch

    # timeout connect         10s
    # timeout client          1m
    # timeout server          1m
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p>\u5728 defaults \u6A21\u5757\u4E0B\u65B9\u6DFB\u52A0\u5982\u4E0B\u5185\u5BB9</p></blockquote><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>listen status #\u5B9A\u4E49\u7BA1\u7406\u754C\u2FAF
    bind    0.0.0.0:1080 #\u7BA1\u7406\u754C\u2FAF\u8BBF\u95EEIP\u548C\u7AEF\u2F1D
    mode    http #\u7BA1\u7406\u754C\u2FAF\u6240\u4F7F\u2F64\u7684\u534F\u8BAE
    option  httplog
    maxconn 5000 #\u6700\u2F24\u8FDE\u63A5\u6570
    stats   refresh 30s #30\u79D2\u2F83\u52A8\u5237\u65B0
    stats   uri /stats

listen impalashell
    bind    0.0.0.0:25003 #ha\u4F5C\u4E3Aproxy\u6240\u7ED1\u5B9A\u7684IP\u548C\u7AEF\u2F1D
    mode    tcp #\u4EE54\u5C42\u2F45\u5F0F\u4EE3\u7406\uFF0C\u91CD\u8981
    option  tcplog
    balance roundrobin #\u8C03\u5EA6\u7B97\u6CD5 &#39;leastconn&#39; \u6700\u5C11\u8FDE\u63A5\u6570\u5206\u914D\uFF0C\u6216\u8005 &#39;roundrobin&#39;\uFF0C\u8F6E\u8BE2\u5206
    server  impalashell_1 linux121:21000 check
    server  impalashell_2 linux122:21000 check
    server  impalashell_3 linux123:21000 check

listen impalajdbc
    bind    0.0.0.0:25004 #ha\u4F5C\u4E3Aproxy\u6240\u7ED1\u5B9A\u7684IP\u548C\u7AEF\u2F1D
    mode    tcp #\u4EE54\u5C42\u2F45\u5F0F\u4EE3\u7406\uFF0C\u91CD\u8981
    option  tcplog
    balance roundrobin #\u8C03\u5EA6\u7B97\u6CD5 &#39;leastconn&#39; \u6700\u5C11\u8FDE\u63A5\u6570\u5206\u914D\uFF0C\u6216\u8005 &#39;roundrobin&#39;\uFF0C\u8F6E\u8BE2\u5206
    server  impalajdbc_1 linux121:21050 check
    server  impalajdbc_2 linux122:21050 check
    server  impalajdbc_3 linux122:21050 check
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>\u542F\u52A8</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u5F00\u542F</span>
<span class="token function">service</span> haproxy start
<span class="token comment"># \u5173\u95ED</span>
<span class="token function">service</span> haproxy stop
<span class="token comment"># \u91CD\u542F</span>
<span class="token function">service</span> haproxy restart
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>\u4F7F\u2F64</p><p>Impala-shell\u8BBF\u95EE\u2F45\u5F0F</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>impala-shell -i linux123:25003
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u4F7F\u2F64\u8D77\u6765\u2F17\u5206\u2F45\u4FBF\uFF0C\u533A\u522B\u4EC5\u4EC5\u76F8\u5F53\u4E8E\u662F\u4FEE\u6539\u4E86\u2F00\u4E2Aip\u5730\u5740\u548C\u7AEF\u2F1D\u2F7D\u5DF2\uFF0C\u5176\u4F59\u4E0D\u53D8\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>jdbc:hive2://linux123:25004/default;auth=noSasl
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>Impala\u96C6\u7FA4\u5728\u64CD\u4F5C\u8FC7\u7A0B\u4E2D\u5C3D\u91CF\u591A\u7ED9\u5185\u5B58\uFF0C\u5982\u679C\u5185\u5B58\u4E0D\u80FD\u6EE1\u2F9C\u4F7F\u2F64\u8981\u6C42\uFF0CImpala\u7684\u6267\u2F8F\u5F88\u53EF\u80FD\u4F1A\u62A5\u9519\uFF01\uFF01</p></blockquote><blockquote><p>\u5B9E\u6D4B\u6B64\u5904\u7684 HAProxy \u914D\u7F6E\u6587\u4EF6\u5E76\u4E0D\u80FD\u6210\u529F\u542F\u52A8...</p></blockquote><h3 id="\u7B2C-2-\u8282-impala\u4F18\u5316" tabindex="-1"><a class="header-anchor" href="#\u7B2C-2-\u8282-impala\u4F18\u5316" aria-hidden="true">#</a> \u7B2C 2 \u8282 Impala\u4F18\u5316</h3><p>cloudera\u5B98\u2F79\u4E0A\u7684Impala\u2F42\u6863\uFF0C\u539F\u540D\u4E3A\u300AImpala Performance Guidelines and Best Practices\u300B\u3002</p><p>\u4E3B\u8981\u4ECB\u7ECD\u4E86\u4E3A\u4E86\u63D0\u5347impala\u6027\u80FD\u5E94\u8BE5\u8003\u8651\u7684\u2F00\u4E9B\u4E8B\u60C5\uFF0C\u7ED3\u5408\u5B9E\u9645\u8003\u8651\uFF1A</p><h4 id="\u57FA\u672C\u4F18\u5316\u7B56\u7565" tabindex="-1"><a class="header-anchor" href="#\u57FA\u672C\u4F18\u5316\u7B56\u7565" aria-hidden="true">#</a> \u57FA\u672C\u4F18\u5316\u7B56\u7565</h4><ul><li>\u2F42\u4EF6\u683C\u5F0F</li></ul><p>\u5BF9\u4E8E\u2F24\u6570\u636E\u91CF\u6765\u8BF4\uFF0C<code>Parquet</code> \u2F42\u4EF6\u683C\u5F0F\u662F\u6700\u4F73\u7684</p><ul><li>\u907F\u514D\u2F29\u2F42\u4EF6</li></ul><p><code>INSERT ... VALUES</code> \u4F1A\u4EA7\u2F63\u2F24\u91CF\u2F29\u2F42\u4EF6\uFF0C\u907F\u514D\u4F7F\u2F64</p><ul><li>\u5408\u7406\u5206\u533A\u7C92\u5EA6</li></ul><p>\u5229\u2F64\u5206\u533A\u53EF\u4EE5\u5728\u67E5\u8BE2\u7684\u65F6\u5019\u5FFD\u7565\u6389\u2F46\u2F64\u6570\u636E\uFF0C\u63D0\u2FBC\u67E5\u8BE2\u6548\u7387\uFF0C\u901A\u5E38\u5EFA\u8BAE\u5206\u533A\u6570\u91CF\u57283\u4E07\u4EE5\u4E0B (\u592A\u591A\u7684\u5206\u533A\u4E5F\u4F1A\u9020\u6210\u5143\u6570\u636E\u7BA1\u7406\u7684\u6027\u80FD\u4E0B\u964D)</p><ul><li>\u5206\u533A\u5217\u6570\u636E\u7C7B\u578B\u6700\u597D\u662F\u6574\u6570\u7C7B\u578B</li></ul><p>\u5206\u533A\u5217\u53EF\u4EE5\u4F7F\u2F64string\u7C7B\u578B\uFF0C\u56E0\u4E3A\u5206\u533A\u5217\u7684\u503C\u6700\u540E\u90FD\u662F\u4F5C\u4E3AHDFS\u2F6C\u5F55\u4F7F\u2F64\uFF0C\u5982\u679C\u5206\u533A\u5217\u4F7F\u2F64\u6574\u6570\u7C7B\u578B\u53EF\u4EE5\u964D\u4F4E\u5185\u5B58\u6D88\u8017</p><ul><li>\u83B7\u53D6\u8868\u7684\u7EDF\u8BA1\u6307\u6807</li></ul><p>\u5728\u8FFD\u6C42\u6027\u80FD\u6216\u8005\u2F24\u6570\u636E\u91CF\u67E5\u8BE2\u7684\u65F6\u5019\uFF0C\u8981\u5148\u83B7\u53D6\u6240\u9700\u8981\u7684\u8868\u7684\u7EDF\u8BA1\u6307\u6807 (\u5982:\u6267\u2F8F <code>COMPUTE STATS</code> )</p><ul><li>\u51CF\u5C11\u4F20\u8F93\u5BA2\u6237\u7AEF\u6570\u636E\u91CF</li></ul><p>\u805A\u5408(\u5982count\u3001sum\u3001max \u7B49)</p><p>\u8FC7\u6EE4(\u5982 WHERE )</p><p>limit\u9650\u5236\u8FD4\u56DE\u6761\u6570</p><p>\u8FD4\u56DE\u7ED3\u679C\u4E0D\u8981\u4F7F\u2F64\u7F8E\u5316\u683C\u5F0F\u8FDB\u2F8F\u5C55\u793A(\u5728\u901A\u8FC7impala-shell\u5C55\u793A\u7ED3\u679C\u65F6\uFF0C\u6DFB\u52A0\u8FD9\u4E9B\u53EF\u9009\u53C2\u6570: <code>-B</code>\u3001 <code>--output_delimiter</code>)</p><ul><li><p>\u5728\u6267\u2F8F\u4E4B\u524D\u4F7F\u2F64EXPLAIN\u6765\u67E5\u770B\u903B\u8F91\u89C4\u5212\uFF0C\u5206\u6790\u6267\u2F8F\u903B\u8F91</p></li><li><p>Impala join\u2F83\u52A8\u7684\u4F18\u5316\u2F3F\u6BB5\u5C31\u662F\u901A\u8FC7\u4F7F\u2F64 <code>COMPUTE STATS</code> \u6765\u6536\u96C6\u53C2\u4E0EJoin\u7684\u6BCF\u5F20\u8868\u7684\u7EDF\u8BA1\u4FE1\u606F\uFF0C\u7136\u540E\u7531Impala\u6839\u636E\u8868\u7684\u2F24\u2F29\u3001\u5217\u7684\u552F\u2F00\u503C\u6570\u2F6C\u7B49\u6765\u2F83\u52A8\u4F18\u5316\u67E5\u8BE2\u3002 \u4E3A\u4E86\u66F4\u52A0\u7CBE\u786E\u5730\u83B7\u53D6\u6BCF\u5F20\u8868\u7684\u7EDF\u8BA1\u4FE1\u606F\uFF0C\u6BCF\u6B21\u8868\u7684\u6570\u636E\u53D8\u66F4\u65F6(\u5982\u6267\u2F8FInsert,add partition,drop partition\u7B49)\u6700\u597D\u90FD\u8981\u6267\u2F8F\u2F00\u904D <code>COMPUTE STATS</code> \u83B7\u53D6\u5230\u51C6\u786E\u7684\u8868\u7EDF\u8BA1\u4FE1\u606F\u3002</p></li></ul>`,246);function J(j,z){const s=l("ExternalLinkIcon");return o(),c(i,null,[v,a("p",null,[y,a("a",I,[f,e(s)])]),x,A,a("p",null,[q,a("a",E,[w,e(s)])]),S,a("p",null,[C,a("a",_,[T,e(s)])]),H,a("ul",null,[a("li",null,[R,F,Q,a("a",B,[D,e(s)])]),a("li",null,[U,N,L,a("a",P,[M,e(s)])])]),O],64)}var K=t(g,[["render",J],["__file","index.html.vue"]]);export{K as default};
